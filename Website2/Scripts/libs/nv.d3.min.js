(function(){function t(n,t){return new Date(t,n+1,0).getDate()}function i(n,t,i){return function(r,u,f){var e=n(r),o=[],s;if(e<r&&t(e),f>1)while(e<u)s=new Date(+e),i(s)%f==0&&o.push(s),t(e);else while(e<u)o.push(new Date(+e)),t(e);return o}}var n=window.nv||{};if(n.version="1.1.15b",n.dev=!0,window.nv=n,n.tooltip=n.tooltip||{},n.utils=n.utils||{},n.models=n.models||{},n.charts={},n.graphs=[],n.logs={},n.dispatch=d3.dispatch("render_start","render_end"),n.dev){n.dispatch.on("render_start",function(){n.logs.startTime=+new Date});n.dispatch.on("render_end",function(){n.logs.endTime=+new Date;n.logs.totalTime=n.logs.endTime-n.logs.startTime;n.log("total",n.logs.totalTime)})}n.log=function(){if(console)if(n.dev&&console.log&&console.log.apply)console.log.apply(console,arguments);else if(n.dev&&typeof console.log=="function"&&Function.prototype.bind){var t=Function.prototype.bind.call(console.log,console);t.apply(console,arguments)}return arguments[arguments.length-1]};n.render=function(t){t=t||1;n.render.active=!0;n.dispatch.render_start();setTimeout(function(){for(var u,i,r=0;r<t&&(i=n.render.queue[r]);r++)u=i.generate(),typeof i.callback==typeof Function&&i.callback(u),n.graphs.push(u);n.render.queue.splice(0,r);n.render.queue.length?setTimeout(arguments.callee,0):(n.dispatch.render_end(),n.render.active=!1)},0)};n.render.active=!1;n.render.queue=[];n.addGraph=function(t){typeof arguments[0]==typeof Function&&(t={generate:arguments[0],callback:arguments[1]});n.render.queue.push(t);n.render.active||n.render()};n.identity=function(n){return n};n.strip=function(n){return n.replace(/(\s|&)/g,"")};d3.time.monthEnd=function(n){return new Date(n.getFullYear(),n.getMonth(),0)};d3.time.monthEnds=i(d3.time.monthEnd,function(n){n.setUTCDate(n.getUTCDate()+1);n.setDate(t(n.getMonth()+1,n.getFullYear()))},function(n){return n.getMonth()});n.interactiveGuideline=function(){"use strict";function t(l){l.each(function(l){function a(){var e=d3.mouse(this),n=e[0],u=e[1],s=!0,l=!1,f;if(c&&(n=d3.event.offsetX,u=d3.event.offsetY,d3.event.target.tagName!=="svg"&&(s=!1),d3.event.target.className.baseVal.match("nv-legend")&&(l=!0)),s&&(n-=i.left,u-=i.top),n<0||u<0||n>w||u>v||d3.event.relatedTarget&&d3.event.relatedTarget.ownerSVGElement===undefined||l){if(c&&d3.event.relatedTarget&&d3.event.relatedTarget.ownerSVGElement===undefined&&d3.event.relatedTarget.className.match(h.nvPointerEventsClass))return;r.elementMouseout({mouseX:n,mouseY:u});t.renderGuideLine(null);return}f=o.invert(n);r.elementMousemove({mouseX:n,mouseY:u,pointXValue:f});d3.event.type==="dblclick"&&r.elementDblclick({mouseX:n,mouseY:u,pointXValue:f})}var p=d3.select(this),w=f||960,v=e||400,y=p.selectAll("g.nv-wrap.nv-interactiveLineLayer").data([l]),b=y.enter().append("g").attr("class"," nv-wrap nv-interactiveLineLayer");if(b.append("g").attr("class","nv-interactiveGuideLine"),u){u.on("mousemove",a,!0).on("mouseout",a,!0).on("dblclick",a);t.renderGuideLine=function(t){if(s){var i=y.select(".nv-interactiveGuideLine").selectAll("line").data(t!=null?[n.utils.NaNtoZero(t)]:[],String);i.enter().append("line").attr("class","nv-guideline").attr("x1",function(n){return n}).attr("x2",function(n){return n}).attr("y1",v).attr("y2",0);i.exit().remove()}}}})}var h=n.models.tooltip(),f=null,e=null,i={left:0,top:0},o=d3.scale.linear(),l=d3.scale.linear(),r=d3.dispatch("elementMousemove","elementMouseout","elementDblclick"),s=!0,u=null,c=navigator.userAgent.indexOf("MSIE")!==-1;return t.dispatch=r,t.tooltip=h,t.margin=function(n){return arguments.length?(i.top=typeof n.top!="undefined"?n.top:i.top,i.left=typeof n.left!="undefined"?n.left:i.left,t):i},t.width=function(n){return arguments.length?(f=n,t):f},t.height=function(n){return arguments.length?(e=n,t):e},t.xScale=function(n){return arguments.length?(o=n,t):o},t.showGuideLine=function(n){return arguments.length?(s=n,t):s},t.svgContainer=function(n){return arguments.length?(u=n,t):u},t};n.interactiveBisect=function(n,t,i){"use strict";var u,e;if(!n instanceof Array)return null;typeof i!="function"&&(i=function(n){return n.x});var o=d3.bisector(i).left,r=d3.max([0,o(n,t)-1]),f=i(n[r],r);return(typeof f=="undefined"&&(f=r),f===t)?r:(u=d3.min([r+1,n.length-1]),e=i(n[u],u),typeof e=="undefined"&&(e=u),Math.abs(e-t)>=Math.abs(f-t)?r:u)};n.nearestValueIndex=function(n,t,i){"use strict";var r=Infinity,u=null;return n.forEach(function(n,f){var e=Math.abs(t-n);e<=r&&e<i&&(r=e,u=f)}),u},function(){"use strict";window.nv.tooltip={};window.nv.models.tooltip=function(){function d(){var n,t,u;i&&(n=d3.select(i),n.node().tagName!=="svg"&&(n=n.select("svg")),t=n.node()?n.attr("viewBox"):null,t&&(t=t.split(" "),u=parseInt(n.style("width"))/t[2],r.left=r.left*u,r.top=r.top*u))}function g(n){var r,t;return r=i?d3.select(i):d3.select("body"),t=r.select(".nvtooltip"),t.node()===null&&(t=r.append("div").attr("class","nvtooltip "+(s?s:"xy-tooltip")).attr("id",b)),t.node().innerHTML=n,t.style("top",0).style("left",0).style("opacity",0),t.selectAll("div, table, td, tr").classed(a,!0),t.classed(a,!0),t.node()}function t(){var it;if(l&&k(e)){d();var y=r.left,s=o!=null?o:r.top,b=g(p(e));if(w=b,i){var a=i.getElementsByTagName("svg")[0],rt=a?a.getBoundingClientRect():i.getBoundingClientRect(),v={left:0,top:0};if(a){var nt=a.getBoundingClientRect(),tt=i.getBoundingClientRect(),f=nt.top;f<0&&(it=i.getBoundingClientRect(),f=Math.abs(f)>it.height?0:f);v.top=Math.abs(f-tt.top);v.left=Math.abs(nt.left-tt.left)}y+=i.offsetLeft+v.left-2*i.scrollLeft;s+=i.offsetTop+v.top-2*i.scrollTop}return u&&u>0&&(s=Math.floor(s/u)*u),n.tooltip.calcTooltipPosition([y,s],h,c,b),t}}var f=null,e=null,h="w",c=50,u=25,o=null,s=null,i=null,w=null,r={left:null,top:null},l=!0,b="nvtooltip-"+Math.floor(Math.random()*1e5),a="nv-pointer-events-none",v=function(n){return n},y=function(n){return n},p=function(n){var i,u,e,t,r;return f!=null?f:n==null?"":(i=d3.select(document.createElement("table")),u=i.selectAll("thead").data([n]).enter().append("thead"),u.append("tr").append("td").attr("colspan",3).append("strong").classed("x-value",!0).html(y(n.value)),e=i.selectAll("tbody").data([n]).enter().append("tbody"),t=e.selectAll("tr").data(function(n){return n.series}).enter().append("tr").classed("highlight",function(n){return n.highlight}),t.append("td").classed("legend-color-guide",!0).append("div").style("background-color",function(n){return n.color}),t.append("td").classed("key",!0).html(function(n){return n.key}),t.append("td").classed("value",!0).html(function(n,t){return v(n.value,t)}),t.selectAll("td").each(function(n){if(n.highlight){var t=d3.scale.linear().domain([0,1]).range(["#fff",n.color]),i=.6;d3.select(this).style("border-bottom-color",t(i)).style("border-top-color",t(i))}}),r=i.node().outerHTML,n.footer!==undefined&&(r+="<div class='footer'>"+n.footer+"<\/div>"),r)},k=function(n){return n&&n.series&&n.series.length>0?!0:!1};return t.nvPointerEventsClass=a,t.content=function(n){return arguments.length?(f=n,t):f},t.tooltipElem=function(){return w},t.contentGenerator=function(n){return arguments.length?(typeof n=="function"&&(p=n),t):p},t.data=function(n){return arguments.length?(e=n,t):e},t.gravity=function(n){return arguments.length?(h=n,t):h},t.distance=function(n){return arguments.length?(c=n,t):c},t.snapDistance=function(n){return arguments.length?(u=n,t):u},t.classes=function(n){return arguments.length?(s=n,t):s},t.chartContainer=function(n){return arguments.length?(i=n,t):i},t.position=function(n){return arguments.length?(r.left=typeof n.left!="undefined"?n.left:r.left,r.top=typeof n.top!="undefined"?n.top:r.top,t):r},t.fixedTop=function(n){return arguments.length?(o=n,t):o},t.enabled=function(n){return arguments.length?(l=n,t):l},t.valueFormatter=function(n){return arguments.length?(typeof n=="function"&&(v=n),t):v},t.headerFormatter=function(n){return arguments.length?(typeof n=="function"&&(y=n),t):y},t.id=function(){return b},t};n.tooltip.show=function(t,i,r,u,f,e){var o=document.createElement("div"),s;o.className="nvtooltip "+(e?e:"xy-tooltip");s=f;(!f||f.tagName.match(/g|svg/i))&&(s=document.getElementsByTagName("body")[0]);o.style.left=0;o.style.top=0;o.style.opacity=0;o.innerHTML=i;s.appendChild(o);f&&(t[0]=t[0]-f.scrollLeft,t[1]=t[1]-f.scrollTop);n.tooltip.calcTooltipPosition(t,r,u,o)};n.tooltip.findFirstNonSVGParent=function(n){while(n.tagName.match(/^g|svg$/i)!==null)n=n.parentNode;return n};n.tooltip.findTotalOffsetTop=function(n,t){var i=t;do isNaN(n.offsetTop)||(i+=n.offsetTop);while(n=n.offsetParent);return i};n.tooltip.findTotalOffsetLeft=function(n,t){var i=t;do isNaN(n.offsetLeft)||(i+=n.offsetLeft);while(n=n.offsetParent);return i};n.tooltip.calcTooltipPosition=function(t,i,r,u){var c=parseInt(u.offsetHeight),l=parseInt(u.offsetWidth),y=n.utils.windowSize().width,a=n.utils.windowSize().height,s=window.pageYOffset,v=window.pageXOffset,e,f,p,w,h,o;a=window.innerWidth>=document.body.scrollWidth?a:a-16;y=window.innerHeight>=document.body.scrollHeight?y:y-16;i=i||"s";r=r||20;p=function(t){return n.tooltip.findTotalOffsetTop(t,f)};w=function(t){return n.tooltip.findTotalOffsetLeft(t,e)};switch(i){case"e":e=t[0]-l-r;f=t[1]-c/2;h=w(u);o=p(u);h<v&&(e=t[0]+r>v?t[0]+r:v-h+e);o<s&&(f=s-o+f);o+c>s+a&&(f=s+a-o+f-c);break;case"w":e=t[0]+r;f=t[1]-c/2;h=w(u);o=p(u);h+l>y&&(e=t[0]-l-r);o<s&&(f=s+5);o+c>s+a&&(f=s+a-o+f-c);break;case"n":e=t[0]-l/2-5;f=t[1]+r;h=w(u);o=p(u);h<v&&(e=v+5);h+l>y&&(e=e-l/2+5);o+c>s+a&&(f=s+a-o+f-c);break;case"s":e=t[0]-l/2;f=t[1]-c-r;h=w(u);o=p(u);h<v&&(e=v+5);h+l>y&&(e=e-l/2+5);s>o&&(f=s);break;case"none":e=t[0];f=t[1]-r;h=w(u);o=p(u)}return u.style.left=e+"px",u.style.top=f+"px",u.style.opacity=1,u.style.position="absolute",u};n.tooltip.cleanup=function(){for(var n=document.getElementsByClassName("nvtooltip"),t=[];n.length;)t.push(n[0]),n[0].style.transitionDelay="0 !important",n[0].style.opacity=0,n[0].className="nvtooltip-pending-removal";setTimeout(function(){while(t.length){var n=t.pop();n.parentNode.removeChild(n)}},500)}}();n.utils.windowSize=function(){var n={width:640,height:480};return document.body&&document.body.offsetWidth&&(n.width=document.body.offsetWidth,n.height=document.body.offsetHeight),document.compatMode=="CSS1Compat"&&document.documentElement&&document.documentElement.offsetWidth&&(n.width=document.documentElement.offsetWidth,n.height=document.documentElement.offsetHeight),window.innerWidth&&window.innerHeight&&(n.width=window.innerWidth,n.height=window.innerHeight),n};n.utils.windowResize=function(n){if(n!==undefined){var t=window.onresize;window.onresize=function(i){typeof t=="function"&&t(i);n(i)}}};n.utils.getColor=function(t){return arguments.length?Object.prototype.toString.call(t)==="[object Array]"?function(n,i){return n.color||t[i%t.length]}:t:n.utils.defaultColor()};n.utils.defaultColor=function(){var n=d3.scale.category20().range();return function(t,i){return t.color||n[i%n.length]}};n.utils.customTheme=function(n,t,i){t=t||function(n){return n.key};i=i||d3.scale.category20().range();var r=i.length;return function(u){var f=t(u);return r||(r=i.length),typeof n[f]!="undefined"?typeof n[f]=="function"?n[f]():n[f]:i[--r]}};n.utils.pjax=function(t,i){function r(r){d3.html(r,function(r){var u=d3.select(i).node();u.parentNode.replaceChild(d3.select(r).select(i).node(),u);n.utils.pjax(t,i)})}d3.selectAll(t).on("click",function(){history.pushState(this.href,this.textContent,this.href);r(this.href);d3.event.preventDefault()});d3.select(window).on("popstate",function(){d3.event.state&&r(d3.event.state)})};n.utils.calcApproxTextWidth=function(n){if(typeof n.style=="function"&&typeof n.text=="function"){var t=parseInt(n.style("font-size").replace("px","")),i=n.text().length;return i*t*.5}return 0};n.utils.NaNtoZero=function(n){return typeof n!="number"||isNaN(n)||n===null||n===Infinity?0:n};n.utils.optionsFunc=function(n){return n&&d3.map(n).forEach(function(n,t){typeof this[n]=="function"&&this[n](t)}.bind(this)),this};n.models.axis=function(){"use strict";function i(n){return n.each(function(n){var ft=d3.select(this),b=ft.selectAll("g.nv-wrap.nv-axis").data([n]),et=b.enter().append("g").attr("class","nvd3 nv-wrap nv-axis"),ot=et.append("g"),g=b.select("g"),k,w,rt,ut,nt,i,d;c!==null?r.ticks(c):(r.orient()=="top"||r.orient()=="bottom")&&r.ticks(Math.abs(t.range()[1]-t.range()[0])/100);g.transition().call(r);s=s||r.scale();k=r.tickFormat();k==null&&(k=s.tickFormat());w=g.selectAll("text.nv-axislabel").data([l||null]);w.exit().remove();switch(r.orient()){case"top":w.enter().append("text").attr("class","nv-axislabel");nt=t.range().length==2?t.range()[1]:t.range()[t.range().length-1]+(t.range()[1]-t.range()[0]);w.attr("text-anchor","middle").attr("y",0).attr("x",nt/2);o&&(i=b.selectAll("g.nv-axisMaxMin").data(t.domain()),i.enter().append("g").attr("class","nv-axisMaxMin").append("text"),i.exit().remove(),i.attr("transform",function(n){return"translate("+t(n)+",0)"}).select("text").attr("dy","-0.5em").attr("y",-r.tickPadding()).attr("text-anchor","middle").text(function(n){var t=k(n);return(""+t).match("NaN")?"":t}),i.transition().attr("transform",function(n,i){return"translate("+t.range()[i]+",0)"}));break;case"bottom":var ut=36,tt=30,it=g.selectAll("g").select("text");e%360&&(it.each(function(){var n=this.getBBox().width;n>tt&&(tt=n)}),rt=Math.abs(Math.sin(e*Math.PI/180)),ut=(rt?rt*tt:tt)+30,it.attr("transform",function(){return"rotate("+e+" 0,0)"}).style("text-anchor",e%360>0?"start":"end"));w.enter().append("text").attr("class","nv-axislabel");nt=t.range().length==2?t.range()[1]:t.range()[t.range().length-1]+(t.range()[1]-t.range()[0]);w.attr("text-anchor","middle").attr("y",ut).attr("x",nt/2);o&&(i=b.selectAll("g.nv-axisMaxMin").data([t.domain()[0],t.domain()[t.domain().length-1]]),i.enter().append("g").attr("class","nv-axisMaxMin").append("text"),i.exit().remove(),i.attr("transform",function(n){return"translate("+(t(n)+(y?t.rangeBand()/2:0))+",0)"}).select("text").attr("dy",".71em").attr("y",r.tickPadding()).attr("transform",function(){return"rotate("+e+" 0,0)"}).style("text-anchor",e?e%360>0?"start":"end":"middle").text(function(n){var t=k(n);return(""+t).match("NaN")?"":t}),i.transition().attr("transform",function(n){return"translate("+(t(n)+(y?t.rangeBand()/2:0))+",0)"}));v&&it.attr("transform",function(n,t){return"translate(0,"+(t%2==0?"0":"12")+")"});break;case"right":w.enter().append("text").attr("class","nv-axislabel");w.style("text-anchor",f?"middle":"begin").attr("transform",f?"rotate(90)":"").attr("y",f?-Math.max(u.right,h)+12:-10).attr("x",f?t.range()[0]/2:r.tickPadding());o&&(i=b.selectAll("g.nv-axisMaxMin").data(t.domain()),i.enter().append("g").attr("class","nv-axisMaxMin").append("text").style("opacity",0),i.exit().remove(),i.attr("transform",function(n){return"translate(0,"+t(n)+")"}).select("text").attr("dy",".32em").attr("y",0).attr("x",r.tickPadding()).style("text-anchor","start").text(function(n){var t=k(n);return(""+t).match("NaN")?"":t}),i.transition().attr("transform",function(n,i){return"translate(0,"+t.range()[i]+")"}).select("text").style("opacity",1));break;case"left":w.enter().append("text").attr("class","nv-axislabel");w.style("text-anchor",f?"middle":"end").attr("transform",f?"rotate(-90)":"").attr("y",f?-Math.max(u.left,h)+p:-10).attr("x",f?-t.range()[0]/2:-r.tickPadding());o&&(i=b.selectAll("g.nv-axisMaxMin").data(t.domain()),i.enter().append("g").attr("class","nv-axisMaxMin").append("text").style("opacity",0),i.exit().remove(),i.attr("transform",function(n){return"translate(0,"+s(n)+")"}).select("text").attr("dy",".32em").attr("y",0).attr("x",-r.tickPadding()).attr("text-anchor","end").text(function(n){var t=k(n);return(""+t).match("NaN")?"":t}),i.transition().attr("transform",function(n,i){return"translate(0,"+t.range()[i]+")"}).select("text").style("opacity",1))}w.text(function(n){return n});o&&(r.orient()==="left"||r.orient()==="right")&&(g.selectAll("g").each(function(n){d3.select(this).select("text").attr("opacity",1);(t(n)<t.range()[1]+10||t(n)>t.range()[0]-10)&&((n>1e-10||n<-1e-10)&&d3.select(this).attr("opacity",0),d3.select(this).select("text").attr("opacity",0))}),t.domain()[0]==t.domain()[1]&&t.domain()[0]==0&&b.selectAll("g.nv-axisMaxMin").style("opacity",function(n,t){return t?0:1}));o&&(r.orient()==="top"||r.orient()==="bottom")&&(d=[],b.selectAll("g.nv-axisMaxMin").each(function(n,i){try{i?d.push(t(n)-this.getBBox().width-4):d.push(t(n)+this.getBBox().width+4)}catch(r){i?d.push(t(n)-4):d.push(t(n)+4)}}),g.selectAll("g").each(function(n){(t(n)<d[0]||t(n)>d[1])&&(n>1e-10||n<-1e-10?d3.select(this).remove():d3.select(this).select("text").remove())}));a&&g.selectAll(".tick").filter(function(n){return!parseFloat(Math.round(n.__data__*1e5)/1e6)&&n.__data__!==undefined}).classed("zero",!0);s=t.copy()}),i}var r=d3.svg.axis(),u={top:0,right:0,bottom:0,left:0},h=75,w=60,t=d3.scale.linear(),l=null,o=!0,a=!0,e=0,f=!0,v=!1,y=!1,c=null,p=12,s;return r.scale(t).orient("bottom").tickFormat(function(n){return n}),i.axis=r,d3.rebind(i,r,"orient","tickValues","tickSubdivide","tickSize","tickPadding","tickFormat"),d3.rebind(i,t,"domain","range","rangeBand","rangeBands"),i.options=n.utils.optionsFunc.bind(i),i.margin=function(n){return arguments.length?(u.top=typeof n.top!="undefined"?n.top:u.top,u.right=typeof n.right!="undefined"?n.right:u.right,u.bottom=typeof n.bottom!="undefined"?n.bottom:u.bottom,u.left=typeof n.left!="undefined"?n.left:u.left,i):u},i.width=function(n){return arguments.length?(h=n,i):h},i.ticks=function(n){return arguments.length?(c=n,i):c},i.height=function(n){return arguments.length?(w=n,i):w},i.axisLabel=function(n){return arguments.length?(l=n,i):l},i.showMaxMin=function(n){return arguments.length?(o=n,i):o},i.highlightZero=function(n){return arguments.length?(a=n,i):a},i.scale=function(n){return arguments.length?(t=n,r.scale(t),y=typeof t.rangeBands=="function",d3.rebind(i,t,"domain","range","rangeBand","rangeBands"),i):t},i.rotateYLabel=function(n){return arguments.length?(f=n,i):f},i.rotateLabels=function(n){return arguments.length?(e=n,i):e},i.staggerLabels=function(n){return arguments.length?(v=n,i):v},i.axisLabelDistance=function(n){return arguments.length?(p=n,i):p},i};n.models.historicalBar=function(){"use strict";function t(nt){return nt.each(function(t){var nt=l-u.left-u.right,rt=a-u.top-u.bottom,ut=d3.select(this),it,ht;r.domain(k||d3.extent(t[0].values.map(o).concat(v)));p?r.range(c||[nt*.5/t[0].values.length,nt*(t[0].values.length-.5)/t[0].values.length]):r.range(c||[0,nt]);i.domain(d||d3.extent(t[0].values.map(f).concat(y))).range(g||[rt,0]);r.domain()[0]===r.domain()[1]&&(r.domain()[0]?r.domain([r.domain()[0]-r.domain()[0]*.01,r.domain()[1]+r.domain()[1]*.01]):r.domain([-1,1]));i.domain()[0]===i.domain()[1]&&(i.domain()[0]?i.domain([i.domain()[0]+i.domain()[0]*.01,i.domain()[1]-i.domain()[1]*.01]):i.domain([-1,1]));var tt=ut.selectAll("g.nv-wrap.nv-historicalBar-"+e).data([t[0].values]),ft=tt.enter().append("g").attr("class","nvd3 nv-wrap nv-historicalBar-"+e),et=ft.append("defs"),ot=ft.append("g"),st=tt.select("g");ot.append("g").attr("class","nv-bars");tt.attr("transform","translate("+u.left+","+u.top+")");ut.on("click",function(n,t){s.chartClick({data:n,index:t,pos:d3.event,id:e})});et.append("clipPath").attr("id","nv-chart-clip-path-"+e).append("rect");tt.select("#nv-chart-clip-path-"+e+" rect").attr("width",nt).attr("height",rt);st.attr("clip-path",w?"url(#nv-chart-clip-path-"+e+")":"");it=tt.select(".nv-bars").selectAll(".nv-bar").data(function(n){return n},function(n,t){return o(n,t)});it.exit().remove();ht=it.enter().append("rect").attr("x",0).attr("y",function(t,r){return n.utils.NaNtoZero(i(Math.max(0,f(t,r))))}).attr("height",function(t,r){return n.utils.NaNtoZero(Math.abs(i(f(t,r))-i(0)))}).attr("transform",function(n,i){return"translate("+(r(o(n,i))-nt/t[0].values.length*.45)+",0)"}).on("mouseover",function(n,u){h&&(d3.select(this).classed("hover",!0),s.elementMouseover({point:n,series:t[0],pos:[r(o(n,u)),i(f(n,u))],pointIndex:u,seriesIndex:0,e:d3.event}))}).on("mouseout",function(n,i){h&&(d3.select(this).classed("hover",!1),s.elementMouseout({point:n,series:t[0],pointIndex:i,seriesIndex:0,e:d3.event}))}).on("click",function(n,t){h&&(s.elementClick({value:f(n,t),data:n,index:t,pos:[r(o(n,t)),i(f(n,t))],e:d3.event,id:e}),d3.event.stopPropagation())}).on("dblclick",function(n,t){h&&(s.elementDblClick({value:f(n,t),data:n,index:t,pos:[r(o(n,t)),i(f(n,t))],e:d3.event,id:e}),d3.event.stopPropagation())});it.attr("fill",function(n,t){return b(n,t)}).attr("class",function(n,t,i){return(f(n,t)<0?"nv-bar negative":"nv-bar positive")+" nv-bar-"+i+"-"+t}).transition().attr("transform",function(n,i){return"translate("+(r(o(n,i))-nt/t[0].values.length*.45)+",0)"}).attr("width",nt/t[0].values.length*.9);it.transition().attr("y",function(t,r){var u=f(t,r)<0?i(0):i(0)-i(f(t,r))<1?i(0)-1:i(f(t,r));return n.utils.NaNtoZero(u)}).attr("height",function(t,r){return n.utils.NaNtoZero(Math.max(Math.abs(i(f(t,r))-i(0)),1))})}),t}var u={top:0,right:0,bottom:0,left:0},l=960,a=500,e=Math.floor(Math.random()*1e4),r=d3.scale.linear(),i=d3.scale.linear(),o=function(n){return n.x},f=function(n){return n.y},v=[],y=[0],p=!1,w=!0,b=n.utils.defaultColor(),k,d,c,g,s=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout"),h=!0;return t.highlightPoint=function(n,t){d3.select(".nv-historicalBar-"+e).select(".nv-bars .nv-bar-0-"+n).classed("hover",t)},t.clearHighlights=function(){d3.select(".nv-historicalBar-"+e).select(".nv-bars .nv-bar.hover").classed("hover",!1)},t.dispatch=s,t.options=n.utils.optionsFunc.bind(t),t.x=function(n){return arguments.length?(o=n,t):o},t.y=function(n){return arguments.length?(f=n,t):f},t.margin=function(n){return arguments.length?(u.top=typeof n.top!="undefined"?n.top:u.top,u.right=typeof n.right!="undefined"?n.right:u.right,u.bottom=typeof n.bottom!="undefined"?n.bottom:u.bottom,u.left=typeof n.left!="undefined"?n.left:u.left,t):u},t.width=function(n){return arguments.length?(l=n,t):l},t.height=function(n){return arguments.length?(a=n,t):a},t.xScale=function(n){return arguments.length?(r=n,t):r},t.yScale=function(n){return arguments.length?(i=n,t):i},t.xDomain=function(n){return arguments.length?(k=n,t):k},t.yDomain=function(n){return arguments.length?(d=n,t):d},t.xRange=function(n){return arguments.length?(c=n,t):c},t.yRange=function(n){return arguments.length?(g=n,t):g},t.forceX=function(n){return arguments.length?(v=n,t):v},t.forceY=function(n){return arguments.length?(y=n,t):y},t.padData=function(n){return arguments.length?(p=n,t):p},t.clipEdge=function(n){return arguments.length?(w=n,t):w},t.color=function(i){return arguments.length?(b=n.utils.getColor(i),t):b},t.id=function(n){return arguments.length?(e=n,t):e},t.interactive=function(){return arguments.length?(h=!1,t):h},t};n.models.bullet=function(){"use strict";function t(n){return n.each(function(n,t){var ht=h-i.left-i.right,b=c-i.top-i.bottom,vt=d3.select(this),ut=f.call(this,n,t).slice().sort(d3.descending),tt=e.call(this,n,t).slice().sort(d3.descending),k=o.call(this,n,t).slice().sort(d3.descending),ct=y.call(this,n,t).slice(),lt=p.call(this,n,t).slice(),at=w.call(this,n,t).slice(),u=d3.scale.linear().domain(d3.extent(d3.merge([s,ut]))).range(a?[ht,0]:[0,ht]),ft=this.__chart__||d3.scale.linear().domain([0,Infinity]).range(u.range()),nt;this.__chart__=u;var d=d3.min(ut),v=d3.max(ut),st=ut[1],et=vt.selectAll("g.nv-wrap.nv-bullet").data([n]),yt=et.enter().append("g").attr("class","nvd3 nv-wrap nv-bullet"),it=yt.append("g"),g=et.select("g");it.append("rect").attr("class","nv-range nv-rangeMax");it.append("rect").attr("class","nv-range nv-rangeAvg");it.append("rect").attr("class","nv-range nv-rangeMin");it.append("rect").attr("class","nv-measure");it.append("path").attr("class","nv-markerTriangle");et.attr("transform","translate("+i.left+","+i.top+")");var pt=function(n){return Math.abs(ft(n)-ft(0))},ot=function(n){return Math.abs(u(n)-u(0))},wt=function(n){return n<0?ft(n):ft(0)},rt=function(n){return n<0?u(n):u(0)};g.select("rect.nv-rangeMax").attr("height",b).attr("width",ot(v>0?v:d)).attr("x",rt(v>0?v:d)).datum(v>0?v:d);g.select("rect.nv-rangeAvg").attr("height",b).attr("width",ot(st)).attr("x",rt(st)).datum(st);g.select("rect.nv-rangeMin").attr("height",b).attr("width",ot(v)).attr("x",rt(v)).attr("width",ot(v>0?d:v)).attr("x",rt(v>0?d:v)).datum(v>0?d:v);g.select("rect.nv-measure").style("fill",l).attr("height",b/3).attr("y",b/3).attr("width",k<0?u(0)-u(k[0]):u(k[0])-u(0)).attr("x",rt(k)).on("mouseover",function(){r.elementMouseover({value:k[0],label:at[0]||"Current",pos:[u(k[0]),b/2]})}).on("mouseout",function(){r.elementMouseout({value:k[0],label:at[0]||"Current"})});if(nt=b/6,tt[0])g.selectAll("path.nv-markerTriangle").attr("transform",function(){return"translate("+u(tt[0])+","+b/2+")"}).attr("d","M0,"+nt+"L"+nt+","+-nt+" "+-nt+","+-nt+"Z").on("mouseover",function(){r.elementMouseover({value:tt[0],label:lt[0]||"Previous",pos:[u(tt[0]),b/2]})}).on("mouseout",function(){r.elementMouseout({value:tt[0],label:lt[0]||"Previous"})});else g.selectAll("path.nv-markerTriangle").remove();et.selectAll(".nv-range").on("mouseover",function(n,t){var i=ct[t]||(t?t==1?"Mean":"Minimum":"Maximum");r.elementMouseover({value:n,label:i,pos:[u(n),b/2]})}).on("mouseout",function(n,t){var i=ct[t]||(t?t==1?"Mean":"Minimum":"Maximum");r.elementMouseout({value:n,label:i})})}),t}var i={top:0,right:0,bottom:0,left:0},u="left",a=!1,f=function(n){return n.ranges},e=function(n){return n.markers},o=function(n){return n.measures},y=function(n){return n.rangeLabels?n.rangeLabels:[]},p=function(n){return n.markerLabels?n.markerLabels:[]},w=function(n){return n.measureLabels?n.measureLabels:[]},s=[0],h=380,c=30,v=null,l=n.utils.getColor(["#1f77b4"]),r=d3.dispatch("elementMouseover","elementMouseout");return t.dispatch=r,t.options=n.utils.optionsFunc.bind(t),t.orient=function(n){return arguments.length?(u=n,a=u=="right"||u=="bottom",t):u},t.ranges=function(n){return arguments.length?(f=n,t):f},t.markers=function(n){return arguments.length?(e=n,t):e},t.measures=function(n){return arguments.length?(o=n,t):o},t.forceX=function(n){return arguments.length?(s=n,t):s},t.width=function(n){return arguments.length?(h=n,t):h},t.height=function(n){return arguments.length?(c=n,t):c},t.margin=function(n){return arguments.length?(i.top=typeof n.top!="undefined"?n.top:i.top,i.right=typeof n.right!="undefined"?n.right:i.right,i.bottom=typeof n.bottom!="undefined"?n.bottom:i.bottom,i.left=typeof n.left!="undefined"?n.left:i.left,t):i},t.tickFormat=function(n){return arguments.length?(v=n,t):v},t.color=function(i){return arguments.length?(l=n.utils.getColor(i),t):l},t};n.models.bulletChart=function(){"use strict";function t(n){return n.each(function(f,v){var g=d3.select(this),d=(l||parseInt(g.style("width"))||960)-i.left-i.right,k=o-i.top-i.bottom,lt=this,tt,b,nt,st,ft;if(t.update=function(){t(n)},t.container=this,f&&e.call(this,f,v))g.selectAll(".nv-noData").remove();else return tt=g.selectAll(".nv-noData").data([y]),tt.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),tt.attr("x",i.left+d/2).attr("y",18+i.top+k/2).text(function(n){return n}),t;var at=e.call(this,f,v).slice().sort(d3.descending),vt=h.call(this,f,v).slice().sort(d3.descending),yt=c.call(this,f,v).slice().sort(d3.descending),it=g.selectAll("g.nv-wrap.nv-bulletChart").data([f]),pt=it.enter().append("g").attr("class","nvd3 nv-wrap nv-bulletChart"),rt=pt.append("g"),et=it.select("g");rt.append("g").attr("class","nv-bulletWrap");rt.append("g").attr("class","nv-titles");it.attr("transform","translate("+i.left+","+i.top+")");b=d3.scale.linear().domain([0,Math.max(at[0],vt[0],yt[0])]).range(p?[d,0]:[0,d]);nt=this.__chart__||d3.scale.linear().domain([0,Infinity]).range(b.range());this.__chart__=b;var wt=function(n){return Math.abs(nt(n)-nt(0))},bt=function(n){return Math.abs(b(n)-b(0))},ot=rt.select(".nv-titles").append("g").attr("text-anchor","end").attr("transform","translate(-6,"+(o-i.top-i.bottom)/2+")");ot.append("text").attr("class","nv-title").text(function(n){return n.title});ot.append("text").attr("class","nv-subtitle").attr("dy","1em").text(function(n){return n.subtitle});r.width(d).height(k);st=et.select(".nv-bulletWrap");d3.transition(st).call(r);var ht=a||b.tickFormat(d/100),ut=et.selectAll("g.nv-tick").data(b.ticks(d/50),function(n){return this.textContent||ht(n)}),ct=ut.enter().append("g").attr("class","nv-tick").attr("transform",function(n){return"translate("+nt(n)+",0)"}).style("opacity",1e-6);ct.append("line").attr("y1",k).attr("y2",k*7/6);ct.append("text").attr("text-anchor","middle").attr("dy","1em").attr("y",k*7/6).text(ht);ft=d3.transition(ut).attr("transform",function(n){return"translate("+b(n)+",0)"}).style("opacity",1);ft.select("line").attr("y1",k).attr("y2",k*7/6);ft.select("text").attr("y",k*7/6);d3.transition(ut.exit()).attr("transform",function(n){return"translate("+b(n)+",0)"}).style("opacity",1e-6).remove();u.on("tooltipShow",function(n){n.key=f.title;s&&w(n,lt.parentNode)})}),d3.timer.flush(),t}var r=n.models.bullet(),f="left",p=!1,i={top:5,right:40,bottom:20,left:120},e=function(n){return n.ranges},h=function(n){return n.markers},c=function(n){return n.measures},l=null,o=55,a=null,s=!0,v=function(n,t,i){return"<h3>"+t+"<\/h3><p>"+i+"<\/p>"},y="No Data Available.",u=d3.dispatch("tooltipShow","tooltipHide"),w=function(r,u){var f=r.pos[0]+(u.offsetLeft||0)+i.left,e=r.pos[1]+(u.offsetTop||0)+i.top,o=v(r.key,r.label,r.value,r,t);n.tooltip.show([f,e],o,r.value<0?"e":"w",null,u)};r.dispatch.on("elementMouseover.tooltip",function(n){u.tooltipShow(n)});r.dispatch.on("elementMouseout.tooltip",function(n){u.tooltipHide(n)});u.on("tooltipHide",function(){s&&n.tooltip.cleanup()});return t.dispatch=u,t.bullet=r,d3.rebind(t,r,"color"),t.options=n.utils.optionsFunc.bind(t),t.orient=function(n){return arguments.length?(f=n,p=f=="right"||f=="bottom",t):f},t.ranges=function(n){return arguments.length?(e=n,t):e},t.markers=function(n){return arguments.length?(h=n,t):h},t.measures=function(n){return arguments.length?(c=n,t):c},t.width=function(n){return arguments.length?(l=n,t):l},t.height=function(n){return arguments.length?(o=n,t):o},t.margin=function(n){return arguments.length?(i.top=typeof n.top!="undefined"?n.top:i.top,i.right=typeof n.right!="undefined"?n.right:i.right,i.bottom=typeof n.bottom!="undefined"?n.bottom:i.bottom,i.left=typeof n.left!="undefined"?n.left:i.left,t):i},t.tickFormat=function(n){return arguments.length?(a=n,t):a},t.tooltips=function(n){return arguments.length?(s=n,t):s},t.tooltipContent=function(n){return arguments.length?(v=n,t):v},t.noData=function(n){return arguments.length?(y=n,t):y},t};n.models.cumulativeLineChart=function(){"use strict";function t(et){return et.each(function(et){function li(){d3.select(t.container).style("cursor","ew-resize")}function ai(){f.x=d3.event.x;f.i=Math.round(v.invert(f.x));ei()}function vi(){d3.select(t.container).style("cursor","auto");u.index=f.i;e.stateChange(u)}function ei(){gt.data([f]);var n=t.transitionDuration();t.transitionDuration(0);t.update();t.transitionDuration(n)}var bt=d3.select(this).classed("nv-chart-"+lt,!0),oi=this,ct=(tt||parseInt(bt.style("width"))||960)-i.left-i.right,yt=(d||parseInt(bt.style("height"))||400)-i.top-i.bottom,dt,si,ti,ii,hi,ci,ri,ui,gt;if(t.update=function(){bt.transition().duration(ht).call(t)},t.container=this,u.disabled=et.map(function(n){return!!n.disabled}),!a){a={};for(dt in u)a[dt]=u[dt]instanceof Array?u[dt].slice(0):u[dt]}if(si=d3.behavior.drag().on("dragstart",li).on("drag",ai).on("dragend",vi),et&&et.length&&et.filter(function(n){return n.values.length}).length)bt.selectAll(".nv-noData").remove();else return ti=bt.selectAll(".nv-noData").data([st]),ti.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),ti.attr("x",i.left+ct/2).attr("y",i.top+yt/2).text(function(n){return n}),t;ot=r.xScale();w=r.yScale();o?r.yDomain(null):(ii=et.filter(function(n){return!n.disabled}).map(function(n){var t=d3.extent(n.values,r.y());return t[0]<-.95&&(t[0]=-.95),[(t[0]-t[1])/(1+t[1]),(t[1]-t[0])/(1+t[0])]}),hi=[d3.min(ii,function(n){return n[0]}),d3.max(ii,function(n){return n[1]})],r.yDomain(hi));v.domain([0,et[0].values.length-1]).range([0,ct]).clamp(!0);var et=vt(f.i,et),yi=nt?"none":"all",kt=bt.selectAll("g.nv-wrap.nv-cumulativeLine").data([et]),wt=kt.enter().append("g").attr("class","nvd3 nv-wrap nv-cumulativeLine").append("g"),pt=kt.select("g");wt.append("g").attr("class","nv-interactive");wt.append("g").attr("class","nv-x nv-axis").style("pointer-events","none");wt.append("g").attr("class","nv-y nv-axis");wt.append("g").attr("class","nv-background");wt.append("g").attr("class","nv-linesWrap").style("pointer-events",yi);wt.append("g").attr("class","nv-avgLinesWrap").style("pointer-events","none");wt.append("g").attr("class","nv-legendWrap");wt.append("g").attr("class","nv-controlsWrap");it&&(h.width(ct),pt.select(".nv-legendWrap").datum(et).call(h),i.top!=h.height()&&(i.top=h.height(),yt=(d||parseInt(bt.style("height"))||400)-i.top-i.bottom),pt.select(".nv-legendWrap").attr("transform","translate(0,"+-i.top+")"));ft&&(ci=[{key:"Re-scale y-axis",disabled:!o}],k.width(140).color(["#444","#444","#444"]).rightAlign(!1).margin({top:5,right:0,bottom:5,left:20}),pt.select(".nv-controlsWrap").datum(ci).attr("transform","translate(0,"+-i.top+")").call(k));kt.attr("transform","translate("+i.left+","+i.top+")");g&&pt.select(".nv-y.nv-axis").attr("transform","translate("+ct+",0)");ri=et.filter(function(n){return n.tempDisabled});kt.select(".tempDisabled").remove();ri.length&&kt.append("text").attr("class","tempDisabled").attr("x",ct/2).attr("y","-.71em").style("text-anchor","end").text(ri.map(function(n){return n.key}).join(", ")+" values cannot be calculated for this time period.");nt&&(c.width(ct).height(yt).margin({left:i.left,top:i.top}).svgContainer(bt).xScale(ot),kt.select(".nv-interactive").call(c));wt.select(".nv-background").append("rect");pt.select(".nv-background rect").attr("width",ct).attr("height",yt);r.y(function(n){return n.display.y}).width(ct).height(yt).color(et.map(function(n,t){return n.color||y(n,t)}).filter(function(n,t){return!et[t].disabled&&!et[t].tempDisabled}));ui=pt.select(".nv-linesWrap").datum(et.filter(function(n){return!n.disabled&&!n.tempDisabled}));ui.call(r);et.forEach(function(n,t){n.seriesIndex=t});var pi=et.filter(function(n){return!n.disabled&&!!b(n)}),fi=pt.select(".nv-avgLinesWrap").selectAll("line").data(pi,function(n){return n.key}),ni=function(n){var t=w(b(n));return t<0?0:t>yt?yt:t};fi.enter().append("line").style("stroke-width",2).style("stroke-dasharray","10,10").style("stroke",function(n){return r.color()(n,n.seriesIndex)}).attr("x1",0).attr("x2",ct).attr("y1",ni).attr("y2",ni);fi.style("stroke-opacity",function(n){var t=w(b(n));return t<0||t>yt?0:1}).attr("x1",0).attr("x2",ct).attr("y1",ni).attr("y2",ni);fi.exit().remove();gt=ui.selectAll(".nv-indexLine").data([f]);gt.enter().append("rect").attr("class","nv-indexLine").attr("width",3).attr("x",-2).attr("fill","red").attr("fill-opacity",.5).style("pointer-events","all").call(si);gt.attr("transform",function(n){return"translate("+v(n.i)+",0)"}).attr("height",yt);rt&&(l.scale(ot).ticks(Math.min(et[0].values.length,ct/70)).tickSize(-yt,0),pt.select(".nv-x.nv-axis").attr("transform","translate(0,"+w.range()[0]+")"),d3.transition(pt.select(".nv-x.nv-axis")).call(l));ut&&(s.scale(w).ticks(yt/36).tickSize(-ct,0),d3.transition(pt.select(".nv-y.nv-axis")).call(s));pt.select(".nv-background rect").on("click",function(){f.x=d3.mouse(this)[0];f.i=Math.round(v.invert(f.x));u.index=f.i;e.stateChange(u);ei()});r.dispatch.on("elementClick",function(n){f.i=n.pointIndex;f.x=v(f.i);u.index=f.i;e.stateChange(u);ei()});k.dispatch.on("legendClick",function(n){n.disabled=!n.disabled;o=!n.disabled;u.rescaleY=o;e.stateChange(u);t.update()});h.dispatch.on("stateChange",function(n){u.disabled=n.disabled;e.stateChange(u);t.update()});c.dispatch.on("elementMousemove",function(u){var h,f,o,e,v;if(r.clearHighlights(),e=[],et.filter(function(n,t){return n.seriesIndex=t,!n.disabled}).forEach(function(i,s){f=n.interactiveBisect(i.values,u.pointXValue,t.x());r.highlightPoint(s,f,!0);var c=i.values[f];typeof c!="undefined"&&(typeof h=="undefined"&&(h=c),typeof o=="undefined"&&(o=t.xScale()(t.x()(c,f))),e.push({key:i.key,value:t.y()(c,f),color:y(i,i.seriesIndex)}))}),e.length>2){var w=t.yScale().invert(u.mouseY),b=Math.abs(t.yScale().domain()[0]-t.yScale().domain()[1]),k=.03*b,a=n.nearestValueIndex(e.map(function(n){return n.value}),w,k);a!==null&&(e[a].highlight=!0)}v=l.tickFormat()(t.x()(h,f),f);c.tooltip.position({left:o+i.left,top:u.mouseY+i.top}).chartContainer(oi.parentNode).enabled(p).valueFormatter(function(n){return s.tickFormat()(n)}).data({value:v,series:e})();c.renderGuideLine(o)});c.dispatch.on("elementMouseout",function(){e.tooltipHide();r.clearHighlights()});e.on("tooltipShow",function(n){p&&at(n,oi.parentNode)});e.on("changeState",function(n){typeof n.disabled!="undefined"&&(et.forEach(function(t,i){t.disabled=n.disabled[i]}),u.disabled=n.disabled);typeof n.index!="undefined"&&(f.i=n.index,f.x=v(f.i),u.index=n.index,gt.data([f]));typeof n.rescaleY!="undefined"&&(o=n.rescaleY);t.update()})}),t}function vt(n,t){return t.map(function(t){var u,i;return t.values?(u=t.values[n],u==null)?t:(i=r.y()(u,n),i<-.95&&!ct)?(t.tempDisabled=!0,t):(t.tempDisabled=!1,t.values=t.values.map(function(n,t){return n.display={y:(r.y()(n,t)-i)/(1+i)},n}),t):t})}var r=n.models.line(),l=n.models.axis(),s=n.models.axis(),h=n.models.legend(),k=n.models.legend(),c=n.interactiveGuideline(),i={top:30,right:30,bottom:50,left:60},y=n.utils.defaultColor(),tt=null,d=null,it=!0,rt=!0,ut=!0,g=!1,p=!0,ft=!0,nt=!1,o=!0,et=function(n,t,i){return"<h3>"+n+"<\/h3><p>"+i+" at "+t+"<\/p>"},ot,w,lt=r.id(),u={index:0,rescaleY:o},a=null,st="No Data Available.",b=function(n){return n.average},e=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState"),ht=250,ct=!1;l.orient("bottom").tickPadding(7);s.orient(g?"right":"left");k.updateState(!1);var v=d3.scale.linear(),f={i:0,x:0},at=function(i,u){var f=i.pos[0]+(u.offsetLeft||0),e=i.pos[1]+(u.offsetTop||0),o=l.tickFormat()(r.x()(i.point,i.pointIndex)),h=s.tickFormat()(r.y()(i.point,i.pointIndex)),c=et(i.series.key,o,h,i,t);n.tooltip.show([f,e],c,null,null,u)};r.dispatch.on("elementMouseover.tooltip",function(n){n.pos=[n.pos[0]+i.left,n.pos[1]+i.top];e.tooltipShow(n)});r.dispatch.on("elementMouseout.tooltip",function(n){e.tooltipHide(n)});e.on("tooltipHide",function(){p&&n.tooltip.cleanup()});return t.dispatch=e,t.lines=r,t.legend=h,t.xAxis=l,t.yAxis=s,t.interactiveLayer=c,d3.rebind(t,r,"defined","isArea","x","y","xScale","yScale","size","xDomain","yDomain","xRange","yRange","forceX","forceY","interactive","clipEdge","clipVoronoi","useVoronoi","id"),t.options=n.utils.optionsFunc.bind(t),t.margin=function(n){return arguments.length?(i.top=typeof n.top!="undefined"?n.top:i.top,i.right=typeof n.right!="undefined"?n.right:i.right,i.bottom=typeof n.bottom!="undefined"?n.bottom:i.bottom,i.left=typeof n.left!="undefined"?n.left:i.left,t):i},t.width=function(n){return arguments.length?(tt=n,t):tt},t.height=function(n){return arguments.length?(d=n,t):d},t.color=function(i){return arguments.length?(y=n.utils.getColor(i),h.color(y),t):y},t.rescaleY=function(n){return arguments.length?(o=n,t):o},t.showControls=function(n){return arguments.length?(ft=n,t):ft},t.useInteractiveGuideline=function(n){return arguments.length?(nt=n,n===!0&&(t.interactive(!1),t.useVoronoi(!1)),t):nt},t.showLegend=function(n){return arguments.length?(it=n,t):it},t.showXAxis=function(n){return arguments.length?(rt=n,t):rt},t.showYAxis=function(n){return arguments.length?(ut=n,t):ut},t.rightAlignYAxis=function(n){return arguments.length?(g=n,s.orient(n?"right":"left"),t):g},t.tooltips=function(n){return arguments.length?(p=n,t):p},t.tooltipContent=function(n){return arguments.length?(et=n,t):et},t.state=function(n){return arguments.length?(u=n,t):u},t.defaultState=function(n){return arguments.length?(a=n,t):a},t.noData=function(n){return arguments.length?(st=n,t):st},t.average=function(n){return arguments.length?(b=n,t):b},t.transitionDuration=function(n){return arguments.length?(ht=n,t):ht},t.noErrorCheck=function(n){return arguments.length?(ct=n,t):ct},t};n.models.discreteBar=function(){"use strict";function t(n){return n.each(function(n){var ft=v-f.left-f.right,ut=y-f.top-f.bottom,et=d3.select(this),it,nt,t,rt;n.forEach(function(n,t){n.values.forEach(function(n){n.series=t})});it=l&&o?[]:n.map(function(n){return n.values.map(function(n,t){return{x:e(n,t),y:u(n,t),y0:n.y0}})});r.domain(l||d3.merge(it).map(function(n){return n.x})).rangeBands(b||[0,ft],.1);i.domain(o||d3.extent(d3.merge(it).map(function(n){return n.y}).concat(p)));c?i.range(a||[ut-(i.domain()[0]<0?12:0),i.domain()[1]>0?12:0]):i.range(a||[ut,0]);d=d||r;g=g||i.copy().range([i(0),i(0)]);var tt=et.selectAll("g.nv-wrap.nv-discretebar").data([n]),ot=tt.enter().append("g").attr("class","nvd3 nv-wrap nv-discretebar"),st=ot.append("g"),ht=tt.select("g");st.append("g").attr("class","nv-groups");tt.attr("transform","translate("+f.left+","+f.top+")");nt=tt.select(".nv-groups").selectAll(".nv-group").data(function(n){return n},function(n){return n.key});nt.enter().append("g").style("stroke-opacity",1e-6).style("fill-opacity",1e-6);nt.exit().transition().style("stroke-opacity",1e-6).style("fill-opacity",1e-6).remove();nt.attr("class",function(n,t){return"nv-group nv-series-"+t}).classed("hover",function(n){return n.hover});nt.transition().style("stroke-opacity",1).style("fill-opacity",.75);t=nt.selectAll("g.nv-bar").data(function(n){return n.values});t.exit().remove();rt=t.enter().append("g").attr("transform",function(n,t){return"translate("+(r(e(n,t))+r.rangeBand()*.05)+", "+i(0)+")"}).on("mouseover",function(t,f){d3.select(this).classed("hover",!0);s.elementMouseover({value:u(t,f),point:t,series:n[t.series],pos:[r(e(t,f))+r.rangeBand()*(t.series+.5)/n.length,i(u(t,f))],pointIndex:f,seriesIndex:t.series,e:d3.event})}).on("mouseout",function(t,i){d3.select(this).classed("hover",!1);s.elementMouseout({value:u(t,i),point:t,series:n[t.series],pointIndex:i,seriesIndex:t.series,e:d3.event})}).on("click",function(t,f){s.elementClick({value:u(t,f),point:t,series:n[t.series],pos:[r(e(t,f))+r.rangeBand()*(t.series+.5)/n.length,i(u(t,f))],pointIndex:f,seriesIndex:t.series,e:d3.event});d3.event.stopPropagation()}).on("dblclick",function(t,f){s.elementDblClick({value:u(t,f),point:t,series:n[t.series],pos:[r(e(t,f))+r.rangeBand()*(t.series+.5)/n.length,i(u(t,f))],pointIndex:f,seriesIndex:t.series,e:d3.event});d3.event.stopPropagation()});rt.append("rect").attr("height",0).attr("width",r.rangeBand()*.9/n.length);c?(rt.append("text").attr("text-anchor","middle"),t.select("text").text(function(n,t){return w(u(n,t))}).transition().attr("x",r.rangeBand()*.9/2).attr("y",function(n,t){return u(n,t)<0?i(u(n,t))-i(0)+12:-4})):t.selectAll("text").remove();t.attr("class",function(n,t){return u(n,t)<0?"nv-bar negative":"nv-bar positive"}).style("fill",function(n,t){return n.color||h(n,t)}).style("stroke",function(n,t){return n.color||h(n,t)}).select("rect").attr("class",k).transition().attr("width",r.rangeBand()*.9/n.length);t.transition().attr("transform",function(n,t){var f=r(e(n,t))+r.rangeBand()*.05,o=u(n,t)<0?i(0):i(0)-i(u(n,t))<1?i(0)-1:i(u(n,t));return"translate("+f+", "+o+")"}).select("rect").attr("height",function(n,t){return Math.max(Math.abs(i(u(n,t))-i(o&&o[0]||0))||1)});d=r.copy();g=i.copy()}),t}var f={top:0,right:0,bottom:0,left:0},v=960,y=500,nt=Math.floor(Math.random()*1e4),r=d3.scale.ordinal(),i=d3.scale.linear(),e=function(n){return n.x},u=function(n){return n.y},p=[0],h=n.utils.defaultColor(),c=!1,w=d3.format(",.2f"),l,o,b,a,s=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout"),k="discreteBar",d,g;return t.dispatch=s,t.options=n.utils.optionsFunc.bind(t),t.x=function(n){return arguments.length?(e=n,t):e},t.y=function(n){return arguments.length?(u=n,t):u},t.margin=function(n){return arguments.length?(f.top=typeof n.top!="undefined"?n.top:f.top,f.right=typeof n.right!="undefined"?n.right:f.right,f.bottom=typeof n.bottom!="undefined"?n.bottom:f.bottom,f.left=typeof n.left!="undefined"?n.left:f.left,t):f},t.width=function(n){return arguments.length?(v=n,t):v},t.height=function(n){return arguments.length?(y=n,t):y},t.xScale=function(n){return arguments.length?(r=n,t):r},t.yScale=function(n){return arguments.length?(i=n,t):i},t.xDomain=function(n){return arguments.length?(l=n,t):l},t.yDomain=function(n){return arguments.length?(o=n,t):o},t.xRange=function(n){return arguments.length?(b=n,t):b},t.yRange=function(n){return arguments.length?(a=n,t):a},t.forceY=function(n){return arguments.length?(p=n,t):p},t.color=function(i){return arguments.length?(h=n.utils.getColor(i),t):h},t.id=function(n){return arguments.length?(nt=n,t):nt},t.showValues=function(n){return arguments.length?(c=n,t):c},t.valueFormat=function(n){return arguments.length?(w=n,t):w},t.rectClass=function(n){return arguments.length?(k=n,t):k},t};n.models.discreteBarChart=function(){"use strict";function t(n){return n.each(function(n){var b=d3.select(this),ot=this,nt=(a||parseInt(b.style("width"))||960)-i.left-i.right,tt=(v||parseInt(b.style("height"))||400)-i.top-i.bottom,rt,ft,et;if(t.update=function(){e.beforeUpdate();b.transition().duration(d).call(t)},t.container=this,n&&n.length&&n.filter(function(n){return n.values.length}).length)b.selectAll(".nv-noData").remove();else return rt=b.selectAll(".nv-noData").data([k]),rt.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),rt.attr("x",i.left+nt/2).attr("y",i.top+tt/2).text(function(n){return n}),t;l=r.xScale();f=r.yScale().clamp(!0);var ut=b.selectAll("g.nv-wrap.nv-discreteBarWithAxes").data([n]),it=ut.enter().append("g").attr("class","nvd3 nv-wrap nv-discreteBarWithAxes").append("g"),st=it.append("defs"),y=ut.select("g");it.append("g").attr("class","nv-x nv-axis");it.append("g").attr("class","nv-y nv-axis").append("g").attr("class","nv-zeroLine").append("line");it.append("g").attr("class","nv-barsWrap");y.attr("transform","translate("+i.left+","+i.top+")");h&&y.select(".nv-y.nv-axis").attr("transform","translate("+nt+",0)");r.width(nt).height(tt);ft=y.select(".nv-barsWrap").datum(n.filter(function(n){return!n.disabled}));ft.transition().call(r);st.append("clipPath").attr("id","nv-x-label-clip-"+r.id()).append("rect");y.select("#nv-x-label-clip-"+r.id()+" rect").attr("width",l.rangeBand()*(s?2:1)).attr("height",16).attr("x",-l.rangeBand()/(s?1:2));p&&(o.scale(l).ticks(nt/100).tickSize(-tt,0),y.select(".nv-x.nv-axis").attr("transform","translate(0,"+(f.range()[0]+(r.showValues()&&f.domain()[0]<0?16:0))+")"),y.select(".nv-x.nv-axis").transition().call(o),et=y.select(".nv-x.nv-axis").selectAll("g"),s&&et.selectAll("text").attr("transform",function(n,t,i){return"translate(0,"+(i%2==0?"5":"17")+")"}));w&&(u.scale(f).ticks(tt/36).tickSize(-nt,0),y.select(".nv-y.nv-axis").transition().call(u));y.select(".nv-zeroLine line").attr("x1",0).attr("x2",nt).attr("y1",f(0)).attr("y2",f(0));e.on("tooltipShow",function(n){c&&g(n,ot.parentNode)})}),t}var r=n.models.discreteBar(),o=n.models.axis(),u=n.models.axis(),i={top:15,right:10,bottom:50,left:60},a=null,v=null,y=n.utils.getColor(),p=!0,w=!0,h=!1,s=!1,c=!0,b=function(n,t,i){return"<h3>"+t+"<\/h3><p>"+i+"<\/p>"},l,f,k="No Data Available.",e=d3.dispatch("tooltipShow","tooltipHide","beforeUpdate"),d=250,g;o.orient("bottom").highlightZero(!1).showMaxMin(!1).tickFormat(function(n){return n});u.orient(h?"right":"left").tickFormat(d3.format(",.1f"));g=function(i,f){var e=i.pos[0]+(f.offsetLeft||0),s=i.pos[1]+(f.offsetTop||0),h=o.tickFormat()(r.x()(i.point,i.pointIndex)),c=u.tickFormat()(r.y()(i.point,i.pointIndex)),l=b(i.series.key,h,c,i,t);n.tooltip.show([e,s],l,i.value<0?"n":"s",null,f)};r.dispatch.on("elementMouseover.tooltip",function(n){n.pos=[n.pos[0]+i.left,n.pos[1]+i.top];e.tooltipShow(n)});r.dispatch.on("elementMouseout.tooltip",function(n){e.tooltipHide(n)});e.on("tooltipHide",function(){c&&n.tooltip.cleanup()});return t.dispatch=e,t.discretebar=r,t.xAxis=o,t.yAxis=u,d3.rebind(t,r,"x","y","xDomain","yDomain","xRange","yRange","forceX","forceY","id","showValues","valueFormat"),t.options=n.utils.optionsFunc.bind(t),t.margin=function(n){return arguments.length?(i.top=typeof n.top!="undefined"?n.top:i.top,i.right=typeof n.right!="undefined"?n.right:i.right,i.bottom=typeof n.bottom!="undefined"?n.bottom:i.bottom,i.left=typeof n.left!="undefined"?n.left:i.left,t):i},t.width=function(n){return arguments.length?(a=n,t):a},t.height=function(n){return arguments.length?(v=n,t):v},t.color=function(i){return arguments.length?(y=n.utils.getColor(i),r.color(y),t):y},t.showXAxis=function(n){return arguments.length?(p=n,t):p},t.showYAxis=function(n){return arguments.length?(w=n,t):w},t.rightAlignYAxis=function(n){return arguments.length?(h=n,u.orient(n?"right":"left"),t):h},t.staggerLabels=function(n){return arguments.length?(s=n,t):s},t.tooltips=function(n){return arguments.length?(c=n,t):c},t.tooltipContent=function(n){return arguments.length?(b=n,t):b},t.noData=function(n){return arguments.length?(k=n,t):k},t.transitionDuration=function(n){return arguments.length?(d=n,t):d},t};n.models.distribution=function(){"use strict";function t(n){return n.each(function(n){var w=o-(r==="x"?i.left+i.right:i.top+i.bottom),a=r=="x"?"y":"x",v=d3.select(this),t,c;e=e||f;var l=v.selectAll("g.nv-distribution").data([n]),y=l.enter().append("g").attr("class","nvd3 nv-distribution"),b=y.append("g"),p=l.select("g");l.attr("transform","translate("+i.left+","+i.top+")");t=p.selectAll("g.nv-dist").data(function(n){return n},function(n){return n.key});t.enter().append("g");t.attr("class",function(n,t){return"nv-dist nv-series-"+t}).style("stroke",function(n,t){return h(n,t)});c=t.selectAll("line.nv-dist"+r).data(function(n){return n.values});c.enter().append("line").attr(r+"1",function(n,t){return e(u(n,t))}).attr(r+"2",function(n,t){return e(u(n,t))});t.exit().selectAll("line.nv-dist"+r).transition().attr(r+"1",function(n,t){return f(u(n,t))}).attr(r+"2",function(n,t){return f(u(n,t))}).style("stroke-opacity",0).remove();c.attr("class",function(n,t){return"nv-dist"+r+" nv-dist"+r+"-"+t}).attr(a+"1",0).attr(a+"2",s);c.transition().attr(r+"1",function(n,t){return f(u(n,t))}).attr(r+"2",function(n,t){return f(u(n,t))});e=f.copy()}),t}var i={top:0,right:0,bottom:0,left:0},o=400,s=8,r="x",u=function(n){return n[r]},h=n.utils.defaultColor(),f=d3.scale.linear(),e;return t.options=n.utils.optionsFunc.bind(t),t.margin=function(n){return arguments.length?(i.top=typeof n.top!="undefined"?n.top:i.top,i.right=typeof n.right!="undefined"?n.right:i.right,i.bottom=typeof n.bottom!="undefined"?n.bottom:i.bottom,i.left=typeof n.left!="undefined"?n.left:i.left,t):i},t.width=function(n){return arguments.length?(o=n,t):o},t.axis=function(n){return arguments.length?(r=n,t):r},t.size=function(n){return arguments.length?(s=n,t):s},t.getData=function(n){return arguments.length?(u=d3.functor(n),t):u},t.scale=function(n){return arguments.length?(f=n,t):f},t.color=function(i){return arguments.length?(h=n.utils.getColor(i),t):h},t};n.models.historicalBarChart=function(){"use strict";function t(n){return n.each(function(k){var rt=d3.select(this),at=this,ft=(y||parseInt(rt.style("width"))||960)-i.left-i.right,et=(l||parseInt(rt.style("height"))||400)-i.top-i.bottom,ot,ct,lt;if(t.update=function(){rt.transition().duration(nt).call(t)},t.container=this,r.disabled=k.map(function(n){return!!n.disabled}),!s){s={};for(ot in r)s[ot]=r[ot]instanceof Array?r[ot].slice(0):r[ot]}if(k&&k.length&&k.filter(function(n){return n.values.length}).length)rt.selectAll(".nv-noData").remove();else return ct=rt.selectAll(".nv-noData").data([g]),ct.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),ct.attr("x",i.left+ft/2).attr("y",i.top+et/2).text(function(n){return n}),t;tt=u.xScale();d=u.yScale();var st=rt.selectAll("g.nv-wrap.nv-historicalBarChart").data([k]),ht=st.enter().append("g").attr("class","nvd3 nv-wrap nv-historicalBarChart").append("g"),ut=st.select("g");ht.append("g").attr("class","nv-x nv-axis");ht.append("g").attr("class","nv-y nv-axis");ht.append("g").attr("class","nv-barsWrap");ht.append("g").attr("class","nv-legendWrap");p&&(f.width(ft),ut.select(".nv-legendWrap").datum(k).call(f),i.top!=f.height()&&(i.top=f.height(),et=(l||parseInt(rt.style("height"))||400)-i.top-i.bottom),st.select(".nv-legendWrap").attr("transform","translate(0,"+-i.top+")"));st.attr("transform","translate("+i.left+","+i.top+")");a&&ut.select(".nv-y.nv-axis").attr("transform","translate("+ft+",0)");u.width(ft).height(et).color(k.map(function(n,t){return n.color||c(n,t)}).filter(function(n,t){return!k[t].disabled}));lt=ut.select(".nv-barsWrap").datum(k.filter(function(n){return!n.disabled}));lt.transition().call(u);w&&(h.scale(tt).tickSize(-et,0),ut.select(".nv-x.nv-axis").attr("transform","translate(0,"+d.range()[0]+")"),ut.select(".nv-x.nv-axis").transition().call(h));b&&(o.scale(d).ticks(et/36).tickSize(-ft,0),ut.select(".nv-y.nv-axis").transition().call(o));f.dispatch.on("legendClick",function(i){i.disabled=!i.disabled;k.filter(function(n){return!n.disabled}).length||k.map(function(n){return n.disabled=!1,st.selectAll(".nv-series").classed("disabled",!1),n});r.disabled=k.map(function(n){return!!n.disabled});e.stateChange(r);n.transition().call(t)});f.dispatch.on("legendDblclick",function(n){k.forEach(function(n){n.disabled=!0});n.disabled=!1;r.disabled=k.map(function(n){return!!n.disabled});e.stateChange(r);t.update()});e.on("tooltipShow",function(n){v&&it(n,at.parentNode)});e.on("changeState",function(n){typeof n.disabled!="undefined"&&(k.forEach(function(t,i){t.disabled=n.disabled[i]}),r.disabled=n.disabled);t.update()})}),t}var u=n.models.historicalBar(),h=n.models.axis(),o=n.models.axis(),f=n.models.legend(),i={top:30,right:90,bottom:50,left:90},c=n.utils.defaultColor(),y=null,l=null,p=!1,w=!0,b=!0,a=!1,v=!0,k=function(n,t,i){return"<h3>"+n+"<\/h3><p>"+i+" at "+t+"<\/p>"},tt,d,r={},s=null,g="No Data Available.",e=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState"),nt=250,it;h.orient("bottom").tickPadding(7);o.orient(a?"right":"left");it=function(i,r){var e,f,s;r&&(e=d3.select(r).select("svg"),f=e.node()?e.attr("viewBox"):null,f&&(f=f.split(" "),s=parseInt(e.style("width"))/f[2],i.pos[0]=i.pos[0]*s,i.pos[1]=i.pos[1]*s));var c=i.pos[0]+(r.offsetLeft||0),l=i.pos[1]+(r.offsetTop||0),a=h.tickFormat()(u.x()(i.point,i.pointIndex)),v=o.tickFormat()(u.y()(i.point,i.pointIndex)),y=k(i.series.key,a,v,i,t);n.tooltip.show([c,l],y,null,null,r)};u.dispatch.on("elementMouseover.tooltip",function(n){n.pos=[n.pos[0]+i.left,n.pos[1]+i.top];e.tooltipShow(n)});u.dispatch.on("elementMouseout.tooltip",function(n){e.tooltipHide(n)});e.on("tooltipHide",function(){v&&n.tooltip.cleanup()});return t.dispatch=e,t.bars=u,t.legend=f,t.xAxis=h,t.yAxis=o,d3.rebind(t,u,"defined","isArea","x","y","size","xScale","yScale","xDomain","yDomain","xRange","yRange","forceX","forceY","interactive","clipEdge","clipVoronoi","id","interpolate","highlightPoint","clearHighlights","interactive"),t.options=n.utils.optionsFunc.bind(t),t.margin=function(n){return arguments.length?(i.top=typeof n.top!="undefined"?n.top:i.top,i.right=typeof n.right!="undefined"?n.right:i.right,i.bottom=typeof n.bottom!="undefined"?n.bottom:i.bottom,i.left=typeof n.left!="undefined"?n.left:i.left,t):i},t.width=function(n){return arguments.length?(y=n,t):y},t.height=function(n){return arguments.length?(l=n,t):l},t.color=function(i){return arguments.length?(c=n.utils.getColor(i),f.color(c),t):c},t.showLegend=function(n){return arguments.length?(p=n,t):p},t.showXAxis=function(n){return arguments.length?(w=n,t):w},t.showYAxis=function(n){return arguments.length?(b=n,t):b},t.rightAlignYAxis=function(n){return arguments.length?(a=n,o.orient(n?"right":"left"),t):a},t.tooltips=function(n){return arguments.length?(v=n,t):v},t.tooltipContent=function(n){return arguments.length?(k=n,t):k},t.state=function(n){return arguments.length?(r=n,t):r},t.defaultState=function(n){return arguments.length?(s=n,t):s},t.noData=function(n){return arguments.length?(g=n,t):g},t.transitionDuration=function(n){return arguments.length?(nt=n,t):nt},t};n.models.indentedTree=function(){"use strict";function t(n){return n.each(function(n){function rt(n,i,r){if(d3.event.stopPropagation(),d3.event.shiftKey&&!r)return d3.event.shiftKey=!1,n.values&&n.values.forEach(function(n){(n.values||n._values)&&rt(n,0,!0)}),!0;if(!ht(n))return!0;n.values?(n._values=n.values,n.values=null):(n.values=n._values,n._values=null);t.update()}function s(n){return n._values&&n._values.length?v:n.values&&n.values.length?y:""}function ut(n){return n._values&&n._values.length}function ht(n){var t=n.values||n._values;return t&&t.length}var w=1,ft=d3.select(this),k=d3.layout.tree().children(function(n){return n.values}).size([u,l]),nt,tt,p,i,it;t.update=function(){ft.transition().duration(600).call(t)};n[0]||(n[0]={key:c});var d=k.nodes(n[0]),g=d3.select(this).selectAll("div").data([[d]]),et=g.enter().append("div").attr("class","nvd3 nv-wrap nv-indentedtree"),ot=et.append("table"),st=g.select("table").attr("width","100%").attr("class",a);h&&(nt=ot.append("thead"),tt=nt.append("tr"),f.forEach(function(n){tt.append("th").attr("width",n.width?n.width:"10%").style("text-align",n.type=="numeric"?"right":"left").append("span").text(n.label)}));p=st.selectAll("tbody").data(function(n){return n});p.enter().append("tbody");w=d3.max(d,function(n){return n.depth});k.size([u,w*l]);i=p.selectAll("tr").data(function(n){return n.filter(function(n){return r&&!n.children?r(n):!0})},function(n){return n.id||n.id||++b});i.exit().remove();i.select("img.nv-treeicon").attr("src",s).classed("folded",ut);it=i.enter().append("tr");f.forEach(function(n,t){var u=it.append("td").style("padding-left",function(n){return(t?0:n.depth*l+12+(s(n)?0:16))+"px"},"important").style("text-align",n.type=="numeric"?"right":"left");if(t==0)u.append("img").classed("nv-treeicon",!0).classed("nv-folded",ut).attr("src",s).style("width","14px").style("height","14px").style("padding","0 1px").style("display",function(n){return s(n)?"inline-block":"none"}).on("click",rt);u.each(function(i){!t&&o(i)?d3.select(this).append("a").attr("href",o).attr("class",d3.functor(n.classes)).append("span"):d3.select(this).append("span");d3.select(this).select("span").attr("class",d3.functor(n.classes)).text(function(t){return n.format?n.format(t):t[n.key]||"-"})});n.showCount&&(u.append("span").attr("class","nv-childrenCount"),i.selectAll("span.nv-childrenCount").text(function(n){return n.values&&n.values.length||n._values&&n._values.length?"("+(n.values&&n.values.filter(function(n){return r?r(n):!0}).length||n._values&&n._values.filter(function(n){return r?r(n):!0}).length||0)+")":""}))});i.order().on("click",function(n){e.elementClick({row:this,data:n,pos:[n.x,n.y]})}).on("dblclick",function(n){e.elementDblclick({row:this,data:n,pos:[n.x,n.y]})}).on("mouseover",function(n){e.elementMouseover({row:this,data:n,pos:[n.x,n.y]})}).on("mouseout",function(n){e.elementMouseout({row:this,data:n,pos:[n.x,n.y]})})}),t}var i={top:0,right:0,bottom:0,left:0},p=960,u=500,s=n.utils.defaultColor(),w=Math.floor(Math.random()*1e4),h=!0,r=!1,c="No Data Available.",l=20,f=[{key:"key",label:"Name",type:"text"}],a=null,v="images/grey-plus.png",y="images/grey-minus.png",e=d3.dispatch("elementClick","elementDblclick","elementMouseover","elementMouseout"),o=function(n){return n.url},b=0;return t.options=n.utils.optionsFunc.bind(t),t.margin=function(n){return arguments.length?(i.top=typeof n.top!="undefined"?n.top:i.top,i.right=typeof n.right!="undefined"?n.right:i.right,i.bottom=typeof n.bottom!="undefined"?n.bottom:i.bottom,i.left=typeof n.left!="undefined"?n.left:i.left,t):i},t.width=function(n){return arguments.length?(p=n,t):p},t.height=function(n){return arguments.length?(u=n,t):u},t.color=function(i){return arguments.length?(s=n.utils.getColor(i),scatter.color(s),t):s},t.id=function(n){return arguments.length?(w=n,t):w},t.header=function(n){return arguments.length?(h=n,t):h},t.noData=function(n){return arguments.length?(c=n,t):c},t.filterZero=function(n){return arguments.length?(r=n,t):r},t.columns=function(n){return arguments.length?(f=n,t):f},t.tableClass=function(n){return arguments.length?(a=n,t):a},t.iconOpen=function(n){return arguments.length?(v=n,t):v},t.iconClose=function(n){return arguments.length?(y=n,t):y},t.getUrl=function(n){return arguments.length?(o=n,t):o},t};n.models.legend=function(){"use strict";function i(a){return a.each(function(i){var ot=u-t.left-t.right,st=d3.select(this),tt=st.selectAll("g.nv-legend").data([i]),ht=tt.enter().append("g").attr("class","nvd3 nv-legend").append("g"),g=tt.select("g"),v,it,y,p,rt,k,ut;if(tt.attr("transform","translate("+t.left+","+t.top+")"),v=g.selectAll(".nv-series").data(function(n){return n}),it=v.enter().append("g").attr("class","nv-series").on("mouseover",function(n,t){r.legendMouseover(n,t)}).on("mouseout",function(n,t){r.legendMouseout(n,t)}).on("click",function(n,t){r.legendClick(n,t);o&&(l?(i.forEach(function(n){n.disabled=!0}),n.disabled=!1):(n.disabled=!n.disabled,i.every(function(n){return n.disabled})&&i.forEach(function(n){n.disabled=!1})),r.stateChange({disabled:i.map(function(n){return!!n.disabled})}))}).on("dblclick",function(n,t){r.legendDblclick(n,t);o&&(i.forEach(function(n){n.disabled=!0}),n.disabled=!1,r.stateChange({disabled:i.map(function(n){return!!n.disabled})}))}),it.append("circle").style("stroke-width",2).attr("class","nv-legend-symbol").attr("r",5),it.append("text").attr("text-anchor","start").attr("class","nv-legend-text").attr("dy",".32em").attr("dx","8"),v.classed("disabled",function(n){return n.disabled}),v.exit().remove(),v.select("circle").style("fill",function(n,t){return n.color||e(n,t)}).style("stroke",function(n,t){return n.color||e(n,t)}),v.select("text").text(s),h){y=[];v.each(function(){var i=d3.select(this).select("text"),t;try{if(t=i.getComputedTextLength(),t<=0)throw Error();}catch(r){t=n.utils.calcApproxTextWidth(i)}y.push(t+28)});for(var a=0,b=0,w=[];b<ot&&a<y.length;)w[a]=y[a],b+=y[a++];for(a===0&&(a=1);b>ot&&a>1;){for(w=[],a--,p=0;p<y.length;p++)y[p]>(w[p%a]||0)&&(w[p%a]=y[p]);b=w.reduce(function(n,t){return n+t})}for(rt=[],k=0,ut=0;k<a;k++)rt[k]=ut,ut+=w[k];v.attr("transform",function(n,t){return"translate("+rt[t%a]+","+(5+Math.floor(t/a)*20)+")"});c?g.attr("transform","translate("+(u-t.right-b)+","+t.top+")"):g.attr("transform","translate(0,"+t.top+")");f=t.top+t.bottom+Math.ceil(y.length/a)*20}else{var ft=5,d=5,et=0,nt;v.attr("transform",function(){var n=d3.select(this).select("text").node().getComputedTextLength()+28;return nt=d,u<t.left+t.right+nt+n&&(d=nt=5,ft+=20),d+=n,d>et&&(et=d),"translate("+nt+","+ft+")"});g.attr("transform","translate("+(u-t.right-et)+","+t.top+")");f=t.top+t.bottom+ft+15}}),i}var t={top:5,right:0,bottom:5,left:0},u=400,f=20,s=function(n){return n.key},e=n.utils.defaultColor(),h=!0,c=!0,o=!0,l=!1,r=d3.dispatch("legendClick","legendDblclick","legendMouseover","legendMouseout","stateChange");return i.dispatch=r,i.options=n.utils.optionsFunc.bind(i),i.margin=function(n){return arguments.length?(t.top=typeof n.top!="undefined"?n.top:t.top,t.right=typeof n.right!="undefined"?n.right:t.right,t.bottom=typeof n.bottom!="undefined"?n.bottom:t.bottom,t.left=typeof n.left!="undefined"?n.left:t.left,i):t},i.width=function(n){return arguments.length?(u=n,i):u},i.height=function(n){return arguments.length?(f=n,i):f},i.key=function(n){return arguments.length?(s=n,i):s},i.color=function(t){return arguments.length?(e=n.utils.getColor(t),i):e},i.align=function(n){return arguments.length?(h=n,i):h},i.rightAlign=function(n){return arguments.length?(c=n,i):c},i.updateState=function(n){return arguments.length?(o=n,i):o},i.radioButtonMode=function(n){return arguments.length?(l=n,i):l},i};n.models.line=function(){"use strict";function t(b){return b.each(function(t){var it=y-r.left-r.right,d=p-r.top-r.bottom,ft=d3.select(this),g,b,nt,tt;l=i.xScale();u=i.yScale();a=a||l;h=h||u;var k=ft.selectAll("g.nv-wrap.nv-line").data([t]),rt=k.enter().append("g").attr("class","nvd3 nv-wrap nv-line"),et=rt.append("defs"),ut=rt.append("g"),ot=k.select("g");ut.append("g").attr("class","nv-groups");ut.append("g").attr("class","nv-scatterWrap");k.attr("transform","translate("+r.left+","+r.top+")");i.width(it).height(d);g=k.select(".nv-scatterWrap");g.transition().call(i);et.append("clipPath").attr("id","nv-edge-clip-"+i.id()).append("rect");k.select("#nv-edge-clip-"+i.id()+" rect").attr("width",it).attr("height",d>0?d:0);ot.attr("clip-path",v?"url(#nv-edge-clip-"+i.id()+")":"");g.attr("clip-path",v?"url(#nv-edge-clip-"+i.id()+")":"");b=k.select(".nv-groups").selectAll(".nv-group").data(function(n){return n},function(n){return n.key});b.enter().append("g").style("stroke-opacity",1e-6).style("fill-opacity",1e-6);b.exit().remove();b.attr("class",function(n,t){return"nv-group nv-series-"+t}).classed("hover",function(n){return n.hover}).style("fill",function(n,t){return c(n,t)}).style("stroke",function(n,t){return c(n,t)});b.transition().style("stroke-opacity",1).style("fill-opacity",.5);nt=b.selectAll("path.nv-area").data(function(n){return w(n)?[n]:[]});nt.enter().append("path").attr("class","nv-area").attr("d",function(t){return d3.svg.area().interpolate(s).defined(o).x(function(t,i){return n.utils.NaNtoZero(a(e(t,i)))}).y0(function(t,i){return n.utils.NaNtoZero(h(f(t,i)))}).y1(function(){return h(u.domain()[0]<=0?u.domain()[1]>=0?0:u.domain()[1]:u.domain()[0])}).apply(this,[t.values])});b.exit().selectAll("path.nv-area").remove();nt.transition().attr("d",function(t){return d3.svg.area().interpolate(s).defined(o).x(function(t,i){return n.utils.NaNtoZero(l(e(t,i)))}).y0(function(t,i){return n.utils.NaNtoZero(u(f(t,i)))}).y1(function(){return u(u.domain()[0]<=0?u.domain()[1]>=0?0:u.domain()[1]:u.domain()[0])}).apply(this,[t.values])});tt=b.selectAll("path.nv-line").data(function(n){return[n.values]});tt.enter().append("path").attr("class","nv-line").attr("d",d3.svg.line().interpolate(s).defined(o).x(function(t,i){return n.utils.NaNtoZero(a(e(t,i)))}).y(function(t,i){return n.utils.NaNtoZero(h(f(t,i)))}));tt.transition().attr("d",d3.svg.line().interpolate(s).defined(o).x(function(t,i){return n.utils.NaNtoZero(l(e(t,i)))}).y(function(t,i){return n.utils.NaNtoZero(u(f(t,i)))}));a=l.copy();h=u.copy()}),t}var i=n.models.scatter(),r={top:0,right:0,bottom:0,left:0},y=960,p=500,c=n.utils.defaultColor(),e=function(n){return n.x},f=function(n){return n.y},o=function(n,t){return!isNaN(f(n,t))&&f(n,t)!==null},w=function(n){return n.area},v=!1,l,u,s="linear",a,h;return i.size(16).sizeDomain([16,256]),t.dispatch=i.dispatch,t.scatter=i,d3.rebind(t,i,"id","interactive","size","xScale","yScale","zScale","xDomain","yDomain","xRange","yRange","sizeDomain","forceX","forceY","forceSize","clipVoronoi","useVoronoi","clipRadius","padData","highlightPoint","clearHighlights"),t.options=n.utils.optionsFunc.bind(t),t.margin=function(n){return arguments.length?(r.top=typeof n.top!="undefined"?n.top:r.top,r.right=typeof n.right!="undefined"?n.right:r.right,r.bottom=typeof n.bottom!="undefined"?n.bottom:r.bottom,r.left=typeof n.left!="undefined"?n.left:r.left,t):r},t.width=function(n){return arguments.length?(y=n,t):y},t.height=function(n){return arguments.length?(p=n,t):p},t.x=function(n){return arguments.length?(e=n,i.x(n),t):e},t.y=function(n){return arguments.length?(f=n,i.y(n),t):f},t.clipEdge=function(n){return arguments.length?(v=n,t):v},t.color=function(r){return arguments.length?(c=n.utils.getColor(r),i.color(c),t):c},t.interpolate=function(n){return arguments.length?(s=n,t):s},t.defined=function(n){return arguments.length?(o=n,t):o},t.isArea=function(n){return arguments.length?(w=d3.functor(n),t):w},t};n.models.lineChart=function(){"use strict";function t(g){return g.each(function(g){var ft=d3.select(this),vt=this,et=(p||parseInt(ft.style("width"))||960)-i.left-i.right,ot=(v||parseInt(ft.style("height"))||400)-i.top-i.bottom,ct,at,yt;if(t.update=function(){ft.transition().duration(rt).call(t)},t.container=this,u.disabled=g.map(function(n){return!!n.disabled}),!c){c={};for(ct in u)c[ct]=u[ct]instanceof Array?u[ct].slice(0):u[ct]}if(g&&g.length&&g.filter(function(n){return n.values.length}).length)ft.selectAll(".nv-noData").remove();else return at=ft.selectAll(".nv-noData").data([it]),at.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),at.attr("x",i.left+et/2).attr("y",i.top+ot/2).text(function(n){return n}),t;nt=r.xScale();tt=r.yScale();var lt=ft.selectAll("g.nv-wrap.nv-lineChart").data([g]),ht=lt.enter().append("g").attr("class","nvd3 nv-wrap nv-lineChart").append("g"),st=lt.select("g");ht.append("rect").style("opacity",0);ht.append("g").attr("class","nv-x nv-axis");ht.append("g").attr("class","nv-y nv-axis");ht.append("g").attr("class","nv-linesWrap");ht.append("g").attr("class","nv-legendWrap");ht.append("g").attr("class","nv-interactive");st.select("rect").attr("width",et).attr("height",ot>0?ot:0);w&&(o.width(et),st.select(".nv-legendWrap").datum(g).call(o),i.top!=o.height()&&(i.top=o.height(),ot=(v||parseInt(ft.style("height"))||400)-i.top-i.bottom),lt.select(".nv-legendWrap").attr("transform","translate(0,"+-i.top+")"));lt.attr("transform","translate("+i.left+","+i.top+")");y&&st.select(".nv-y.nv-axis").attr("transform","translate("+et+",0)");d&&(s.width(et).height(ot).margin({left:i.left,top:i.top}).svgContainer(ft).xScale(nt),lt.select(".nv-interactive").call(s));r.width(et).height(ot).color(g.map(function(n,t){return n.color||l(n,t)}).filter(function(n,t){return!g[t].disabled}));yt=st.select(".nv-linesWrap").datum(g.filter(function(n){return!n.disabled}));yt.transition().call(r);b&&(h.scale(nt).ticks(et/100).tickSize(-ot,0),st.select(".nv-x.nv-axis").attr("transform","translate(0,"+tt.range()[0]+")"),st.select(".nv-x.nv-axis").transition().call(h));k&&(e.scale(tt).ticks(ot/36).tickSize(-et,0),st.select(".nv-y.nv-axis").transition().call(e));o.dispatch.on("stateChange",function(n){u=n;f.stateChange(u);t.update()});s.dispatch.on("elementMousemove",function(u){var v,f,c,o,p;if(r.clearHighlights(),o=[],g.filter(function(n,t){return n.seriesIndex=t,!n.disabled}).forEach(function(i,e){f=n.interactiveBisect(i.values,u.pointXValue,t.x());r.highlightPoint(e,f,!0);var s=i.values[f];typeof s!="undefined"&&(typeof v=="undefined"&&(v=s),typeof c=="undefined"&&(c=t.xScale()(t.x()(s,f))),o.push({key:i.key,value:t.y()(s,f),color:l(i,i.seriesIndex)}))}),o.length>2){var w=t.yScale().invert(u.mouseY),b=Math.abs(t.yScale().domain()[0]-t.yScale().domain()[1]),k=.03*b,y=n.nearestValueIndex(o.map(function(n){return n.value}),w,k);y!==null&&(o[y].highlight=!0)}p=h.tickFormat()(t.x()(v,f));s.tooltip.position({left:c+i.left,top:u.mouseY+i.top}).chartContainer(vt.parentNode).enabled(a).valueFormatter(function(n){return e.tickFormat()(n)}).data({value:p,series:o})();s.renderGuideLine(c)});s.dispatch.on("elementMouseout",function(){f.tooltipHide();r.clearHighlights()});f.on("tooltipShow",function(n){a&&ut(n,vt.parentNode)});f.on("changeState",function(n){typeof n.disabled!="undefined"&&g.length===n.disabled.length&&(g.forEach(function(t,i){t.disabled=n.disabled[i]}),u.disabled=n.disabled);t.update()})}),t}var r=n.models.line(),h=n.models.axis(),e=n.models.axis(),o=n.models.legend(),s=n.interactiveGuideline(),i={top:30,right:20,bottom:50,left:60},l=n.utils.defaultColor(),p=null,v=null,w=!0,b=!0,k=!0,y=!1,d=!1,a=!0,g=function(n,t,i){return"<h3>"+n+"<\/h3><p>"+i+" at "+t+"<\/p>"},nt,tt,u={},c=null,it="No Data Available.",f=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState"),rt=250,ut;h.orient("bottom").tickPadding(7);e.orient(y?"right":"left");ut=function(i,u){var f=i.pos[0]+(u.offsetLeft||0),o=i.pos[1]+(u.offsetTop||0),s=h.tickFormat()(r.x()(i.point,i.pointIndex)),c=e.tickFormat()(r.y()(i.point,i.pointIndex)),l=g(i.series.key,s,c,i,t);n.tooltip.show([f,o],l,null,null,u)};r.dispatch.on("elementMouseover.tooltip",function(n){n.pos=[n.pos[0]+i.left,n.pos[1]+i.top];f.tooltipShow(n)});r.dispatch.on("elementMouseout.tooltip",function(n){f.tooltipHide(n)});f.on("tooltipHide",function(){a&&n.tooltip.cleanup()});return t.dispatch=f,t.lines=r,t.legend=o,t.xAxis=h,t.yAxis=e,t.interactiveLayer=s,d3.rebind(t,r,"defined","isArea","x","y","size","xScale","yScale","xDomain","yDomain","xRange","yRange","forceX","forceY","interactive","clipEdge","clipVoronoi","useVoronoi","id","interpolate"),t.options=n.utils.optionsFunc.bind(t),t.margin=function(n){return arguments.length?(i.top=typeof n.top!="undefined"?n.top:i.top,i.right=typeof n.right!="undefined"?n.right:i.right,i.bottom=typeof n.bottom!="undefined"?n.bottom:i.bottom,i.left=typeof n.left!="undefined"?n.left:i.left,t):i},t.width=function(n){return arguments.length?(p=n,t):p},t.height=function(n){return arguments.length?(v=n,t):v},t.color=function(i){return arguments.length?(l=n.utils.getColor(i),o.color(l),t):l},t.showLegend=function(n){return arguments.length?(w=n,t):w},t.showXAxis=function(n){return arguments.length?(b=n,t):b},t.showYAxis=function(n){return arguments.length?(k=n,t):k},t.rightAlignYAxis=function(n){return arguments.length?(y=n,e.orient(n?"right":"left"),t):y},t.useInteractiveGuideline=function(n){return arguments.length?(d=n,n===!0&&(t.interactive(!1),t.useVoronoi(!1)),t):d},t.tooltips=function(n){return arguments.length?(a=n,t):a},t.tooltipContent=function(n){return arguments.length?(g=n,t):g},t.state=function(n){return arguments.length?(u=n,t):u},t.defaultState=function(n){return arguments.length?(c=n,t):c},t.noData=function(n){return arguments.length?(it=n,t):it},t.transitionDuration=function(n){return arguments.length?(rt=n,t):rt},t};n.models.linePlusBarChart=function(){"use strict";function t(n){return n.each(function(n){var ft=d3.select(this),vt=this,b=(p||parseInt(ft.style("width"))||960)-i.left-i.right,nt=(v||parseInt(ft.style("height"))||400)-i.top-i.bottom,ot,ht,st,ut,lt,at;if(t.update=function(){ft.transition().call(t)},f.disabled=n.map(function(n){return!!n.disabled}),!s){s={};for(ot in f)s[ot]=f[ot]instanceof Array?f[ot].slice(0):f[ot]}if(n&&n.length&&n.filter(function(n){return n.values.length}).length)ft.selectAll(".nv-noData").remove();else return ht=ft.selectAll(".nv-noData").data([d]),ht.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),ht.attr("x",i.left+b/2).attr("y",i.top+nt/2).text(function(n){return n}),t;st=n.filter(function(n){return!n.disabled&&n.bar});ut=n.filter(function(n){return!n.bar});tt=ut.filter(function(n){return!n.disabled}).length&&ut.filter(function(n){return!n.disabled})[0].values.length?r.xScale():u.xScale();k=u.yScale();it=r.yScale();var ct=d3.select(this).selectAll("g.nv-wrap.nv-linePlusBar").data([n]),et=ct.enter().append("g").attr("class","nvd3 nv-wrap nv-linePlusBar").append("g"),g=ct.select("g");et.append("g").attr("class","nv-x nv-axis");et.append("g").attr("class","nv-y1 nv-axis");et.append("g").attr("class","nv-y2 nv-axis");et.append("g").attr("class","nv-barsWrap");et.append("g").attr("class","nv-linesWrap");et.append("g").attr("class","nv-legendWrap");w&&(o.width(b/2),g.select(".nv-legendWrap").datum(n.map(function(n){return n.originalKey=n.originalKey===undefined?n.key:n.originalKey,n.key=n.originalKey+(n.bar?" (left axis)":" (right axis)"),n})).call(o),i.top!=o.height()&&(i.top=o.height(),nt=(v||parseInt(ft.style("height"))||400)-i.top-i.bottom),g.select(".nv-legendWrap").attr("transform","translate("+b/2+","+-i.top+")"));ct.attr("transform","translate("+i.left+","+i.top+")");r.width(b).height(nt).color(n.map(function(n,t){return n.color||a(n,t)}).filter(function(t,i){return!n[i].disabled&&!n[i].bar}));u.width(b).height(nt).color(n.map(function(n,t){return n.color||a(n,t)}).filter(function(t,i){return!n[i].disabled&&n[i].bar}));lt=g.select(".nv-barsWrap").datum(st.length?st:[{values:[]}]);at=g.select(".nv-linesWrap").datum(ut[0]&&!ut[0].disabled?ut:[{values:[]}]);d3.transition(lt).call(u);d3.transition(at).call(r);h.scale(tt).ticks(b/100).tickSize(-nt,0);g.select(".nv-x.nv-axis").attr("transform","translate(0,"+k.range()[0]+")");d3.transition(g.select(".nv-x.nv-axis")).call(h);c.scale(k).ticks(nt/36).tickSize(-b,0);d3.transition(g.select(".nv-y1.nv-axis")).style("opacity",st.length?1:0).call(c);l.scale(it).ticks(nt/36).tickSize(st.length?0:-b,0);g.select(".nv-y2.nv-axis").style("opacity",ut.length?1:0).attr("transform","translate("+b+",0)");d3.transition(g.select(".nv-y2.nv-axis")).call(l);o.dispatch.on("stateChange",function(n){f=n;e.stateChange(f);t.update()});e.on("tooltipShow",function(n){y&&rt(n,vt.parentNode)});e.on("changeState",function(i){typeof i.disabled!="undefined"&&(n.forEach(function(n,t){n.disabled=i.disabled[t]}),f.disabled=i.disabled);t.update()})}),t}var r=n.models.line(),u=n.models.historicalBar(),h=n.models.axis(),c=n.models.axis(),l=n.models.axis(),o=n.models.legend(),i={top:30,right:60,bottom:50,left:60},p=null,v=null,g=function(n){return n.x},nt=function(n){return n.y},a=n.utils.defaultColor(),w=!0,y=!0,b=function(n,t,i){return"<h3>"+n+"<\/h3><p>"+i+" at "+t+"<\/p>"},tt,k,it,f={},s=null,d="No Data Available.",e=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState"),rt;u.padData(!0);r.clipEdge(!1).padData(!0);h.orient("bottom").tickPadding(7).highlightZero(!1);c.orient("left");l.orient("right");rt=function(i,u){var f=i.pos[0]+(u.offsetLeft||0),e=i.pos[1]+(u.offsetTop||0),o=h.tickFormat()(r.x()(i.point,i.pointIndex)),s=(i.series.bar?c:l).tickFormat()(r.y()(i.point,i.pointIndex)),a=b(i.series.key,o,s,i,t);n.tooltip.show([f,e],a,i.value<0?"n":"s",null,u)};r.dispatch.on("elementMouseover.tooltip",function(n){n.pos=[n.pos[0]+i.left,n.pos[1]+i.top];e.tooltipShow(n)});r.dispatch.on("elementMouseout.tooltip",function(n){e.tooltipHide(n)});u.dispatch.on("elementMouseover.tooltip",function(n){n.pos=[n.pos[0]+i.left,n.pos[1]+i.top];e.tooltipShow(n)});u.dispatch.on("elementMouseout.tooltip",function(n){e.tooltipHide(n)});e.on("tooltipHide",function(){y&&n.tooltip.cleanup()});return t.dispatch=e,t.legend=o,t.lines=r,t.bars=u,t.xAxis=h,t.y1Axis=c,t.y2Axis=l,d3.rebind(t,r,"defined","size","clipVoronoi","interpolate"),t.options=n.utils.optionsFunc.bind(t),t.x=function(n){return arguments.length?(g=n,r.x(n),u.x(n),t):g},t.y=function(n){return arguments.length?(nt=n,r.y(n),u.y(n),t):nt},t.margin=function(n){return arguments.length?(i.top=typeof n.top!="undefined"?n.top:i.top,i.right=typeof n.right!="undefined"?n.right:i.right,i.bottom=typeof n.bottom!="undefined"?n.bottom:i.bottom,i.left=typeof n.left!="undefined"?n.left:i.left,t):i},t.width=function(n){return arguments.length?(p=n,t):p},t.height=function(n){return arguments.length?(v=n,t):v},t.color=function(i){return arguments.length?(a=n.utils.getColor(i),o.color(a),t):a},t.showLegend=function(n){return arguments.length?(w=n,t):w},t.tooltips=function(n){return arguments.length?(y=n,t):y},t.tooltipContent=function(n){return arguments.length?(b=n,t):b},t.state=function(n){return arguments.length?(f=n,t):f},t.defaultState=function(n){return arguments.length?(s=n,t):s},t.noData=function(n){return arguments.length?(d=n,t):d},t};n.models.lineWithFocusChart=function(){"use strict";function t(n){return n.each(function(n){function ti(n){var r=+(n=="e"),i=r?1:-1,t=ct/3;return"M"+.5*i+","+t+"A6,6 0 0 "+r+" "+6.5*i+","+(t+6)+"V"+(2*t-6)+"A6,6 0 0 "+r+" "+.5*i+","+2*t+"ZM"+2.5*i+","+(t+8)+"V"+(2*t-8)+"M"+4.5*i+","+(t+8)+"V"+(2*t-8)}function ii(){u.empty()||u.extent(o);wt.data([u.empty()?e.domain():o]).each(function(n){var t=e(n[0])-d.range()[0],i=d.range()[1]-e(n[1]);d3.select(this).select(".left").attr("width",t<0?0:t);d3.select(this).select(".right").attr("x",e(n[1])).attr("width",i<0?0:i)})}function gt(){var t,i;(o=u.empty()?null:u.extent(),t=u.empty()?e.domain():u.extent(),Math.abs(t[0]-t[1])<=1)||(l.brush({extent:t,brush:u}),ii(),i=rt.select(".nv-focus .nv-linesWrap").datum(n.filter(function(n){return!n.disabled}).map(function(n){return{key:n.key,values:n.values.filter(function(n,i){return r.x()(n,i)>=t[0]&&r.x()(n,i)<=t[1]})}})),i.transition().duration(a).call(r),rt.select(".nv-focus .nv-x.nv-axis").transition().duration(a).call(s),rt.select(".nv-focus .nv-y.nv-axis").transition().duration(a).call(h))}var st=d3.select(this),ni=this,ot=(tt||parseInt(st.style("width"))||960)-i.left-i.right,ht=(k||parseInt(st.style("height"))||400)-i.top-i.bottom-b,ct=b-p.top-p.bottom,vt,at,lt,dt,wt,bt,kt;if(t.update=function(){st.transition().duration(a).call(t)},t.container=this,n&&n.length&&n.filter(function(n){return n.values.length}).length)st.selectAll(".nv-noData").remove();else return vt=st.selectAll(".nv-noData").data([ut]),vt.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),vt.attr("x",i.left+ot/2).attr("y",i.top+ht/2).text(function(n){return n}),t;d=r.xScale();ft=r.yScale();e=f.xScale();g=f.yScale();var yt=st.selectAll("g.nv-wrap.nv-lineWithFocusChart").data([n]),pt=yt.enter().append("g").attr("class","nvd3 nv-wrap nv-lineWithFocusChart").append("g"),rt=yt.select("g");pt.append("g").attr("class","nv-legendWrap");at=pt.append("g").attr("class","nv-focus");at.append("g").attr("class","nv-x nv-axis");at.append("g").attr("class","nv-y nv-axis");at.append("g").attr("class","nv-linesWrap");lt=pt.append("g").attr("class","nv-context");lt.append("g").attr("class","nv-x nv-axis");lt.append("g").attr("class","nv-y nv-axis");lt.append("g").attr("class","nv-linesWrap");lt.append("g").attr("class","nv-brushBackground");lt.append("g").attr("class","nv-x nv-brush");it&&(c.width(ot),rt.select(".nv-legendWrap").datum(n).call(c),i.top!=c.height()&&(i.top=c.height(),ht=(k||parseInt(st.style("height"))||400)-i.top-i.bottom-b),rt.select(".nv-legendWrap").attr("transform","translate(0,"+-i.top+")"));yt.attr("transform","translate("+i.left+","+i.top+")");r.width(ot).height(ht).color(n.map(function(n,t){return n.color||w(n,t)}).filter(function(t,i){return!n[i].disabled}));f.defined(r.defined()).width(ot).height(ct).color(n.map(function(n,t){return n.color||w(n,t)}).filter(function(t,i){return!n[i].disabled}));rt.select(".nv-context").attr("transform","translate(0,"+(ht+i.bottom+p.top)+")");dt=rt.select(".nv-context .nv-linesWrap").datum(n.filter(function(n){return!n.disabled}));d3.transition(dt).call(f);s.scale(d).ticks(ot/100).tickSize(-ht,0);h.scale(ft).ticks(ht/36).tickSize(-ot,0);rt.select(".nv-focus .nv-x.nv-axis").attr("transform","translate(0,"+ht+")");u.x(e).on("brush",function(){var n=t.transitionDuration();t.transitionDuration(0);gt();t.transitionDuration(n)});o&&u.extent(o);wt=rt.select(".nv-brushBackground").selectAll("g").data([o||u.extent()]);bt=wt.enter().append("g");bt.append("rect").attr("class","left").attr("x",0).attr("y",0).attr("height",ct);bt.append("rect").attr("class","right").attr("x",0).attr("y",0).attr("height",ct);kt=rt.select(".nv-x.nv-brush").call(u);kt.selectAll("rect").attr("height",ct);kt.selectAll(".resize").append("path").attr("d",ti);gt();v.scale(e).ticks(ot/100).tickSize(-ct,0);rt.select(".nv-context .nv-x.nv-axis").attr("transform","translate(0,"+g.range()[0]+")");d3.transition(rt.select(".nv-context .nv-x.nv-axis")).call(v);y.scale(g).ticks(ct/36).tickSize(-ot,0);d3.transition(rt.select(".nv-context .nv-y.nv-axis")).call(y);rt.select(".nv-context .nv-x.nv-axis").attr("transform","translate(0,"+g.range()[0]+")");c.dispatch.on("stateChange",function(){t.update()});l.on("tooltipShow",function(n){nt&&et(n,ni.parentNode)})}),t}var r=n.models.line(),f=n.models.line(),s=n.models.axis(),h=n.models.axis(),v=n.models.axis(),y=n.models.axis(),c=n.models.legend(),u=d3.svg.brush(),i={top:30,right:30,bottom:30,left:60},p={top:0,right:30,bottom:20,left:60},w=n.utils.defaultColor(),tt=null,k=null,b=100,d,ft,e,g,it=!0,o=null,nt=!0,rt=function(n,t,i){return"<h3>"+n+"<\/h3><p>"+i+" at "+t+"<\/p>"},ut="No Data Available.",l=d3.dispatch("tooltipShow","tooltipHide","brush"),a=250,et;r.clipEdge(!0);f.interactive(!1);s.orient("bottom").tickPadding(5);h.orient("left");v.orient("bottom").tickPadding(5);y.orient("left");et=function(i,u){var f=i.pos[0]+(u.offsetLeft||0),e=i.pos[1]+(u.offsetTop||0),o=s.tickFormat()(r.x()(i.point,i.pointIndex)),c=h.tickFormat()(r.y()(i.point,i.pointIndex)),l=rt(i.series.key,o,c,i,t);n.tooltip.show([f,e],l,null,null,u)};r.dispatch.on("elementMouseover.tooltip",function(n){n.pos=[n.pos[0]+i.left,n.pos[1]+i.top];l.tooltipShow(n)});r.dispatch.on("elementMouseout.tooltip",function(n){l.tooltipHide(n)});l.on("tooltipHide",function(){nt&&n.tooltip.cleanup()});return t.dispatch=l,t.legend=c,t.lines=r,t.lines2=f,t.xAxis=s,t.yAxis=h,t.x2Axis=v,t.y2Axis=y,d3.rebind(t,r,"defined","isArea","size","xDomain","yDomain","xRange","yRange","forceX","forceY","interactive","clipEdge","clipVoronoi","id"),t.options=n.utils.optionsFunc.bind(t),t.x=function(n){return arguments.length?(r.x(n),f.x(n),t):r.x},t.y=function(n){return arguments.length?(r.y(n),f.y(n),t):r.y},t.margin=function(n){return arguments.length?(i.top=typeof n.top!="undefined"?n.top:i.top,i.right=typeof n.right!="undefined"?n.right:i.right,i.bottom=typeof n.bottom!="undefined"?n.bottom:i.bottom,i.left=typeof n.left!="undefined"?n.left:i.left,t):i},t.margin2=function(n){return arguments.length?(p=n,t):p},t.width=function(n){return arguments.length?(tt=n,t):tt},t.height=function(n){return arguments.length?(k=n,t):k},t.height2=function(n){return arguments.length?(b=n,t):b},t.color=function(i){return arguments.length?(w=n.utils.getColor(i),c.color(w),t):w},t.showLegend=function(n){return arguments.length?(it=n,t):it},t.tooltips=function(n){return arguments.length?(nt=n,t):nt},t.tooltipContent=function(n){return arguments.length?(rt=n,t):rt},t.interpolate=function(n){return arguments.length?(r.interpolate(n),f.interpolate(n),t):r.interpolate()},t.noData=function(n){return arguments.length?(ut=n,t):ut},t.xTickFormat=function(n){return arguments.length?(s.tickFormat(n),v.tickFormat(n),t):s.tickFormat()},t.yTickFormat=function(n){return arguments.length?(h.tickFormat(n),y.tickFormat(n),t):h.tickFormat()},t.brushExtent=function(n){return arguments.length?(o=n,t):o},t.transitionDuration=function(n){return arguments.length?(a=n,t):a},t};n.models.linePlusBarWithFocusChart=function(){"use strict";function t(n){return n.each(function(n){function pi(n){var r=+(n=="e"),i=r?1:-1,t=kt/3;return"M"+.5*i+","+t+"A6,6 0 0 "+r+" "+6.5*i+","+(t+6)+"V"+(2*t-6)+"A6,6 0 0 "+r+" "+.5*i+","+2*t+"ZM"+2.5*i+","+(t+8)+"V"+(2*t-8)+"M"+4.5*i+","+(t+8)+"V"+(2*t-8)}function wi(){f.empty()||f.extent(s);ei.data([f.empty()?e.domain():s]).each(function(n){var t=e(n[0])-e.range()[0],i=e.range()[1]-e(n[1]);d3.select(this).select(".left").attr("width",t<0?0:t);d3.select(this).select(".right").attr("x",e(n[1])).attr("width",i<0?0:i)})}function vi(){s=f.empty()?null:f.extent();o=f.empty()?e.domain():f.extent();h.brush({extent:o,brush:f});wi();u.width(wt).height(dt).color(n.map(function(n,t){return n.color||l(n,t)}).filter(function(t,i){return!n[i].disabled&&n[i].bar}));r.width(wt).height(dt).color(n.map(function(n,t){return n.color||l(n,t)}).filter(function(t,i){return!n[i].disabled&&!n[i].bar}));var t=ht.select(".nv-focus .nv-barsWrap").datum(bt.length?bt.map(function(n){return{key:n.key,values:n.values.filter(function(n,t){return u.x()(n,t)>=o[0]&&u.x()(n,t)<=o[1]})}}):[{values:[]}]),i=ht.select(".nv-focus .nv-linesWrap").datum(ti[0].disabled?[{values:[]}]:ti.map(function(n){return{key:n.key,values:n.values.filter(function(n,t){return r.x()(n,t)>=o[0]&&r.x()(n,t)<=o[1]})}}));v=bt.length?u.xScale():r.xScale();a.scale(v).ticks(wt/100).tickSize(-dt,0);a.domain([Math.ceil(o[0]),Math.floor(o[1])]);ht.select(".nv-x.nv-axis").transition().duration(y).call(a);t.transition().duration(y).call(u);i.transition().duration(y).call(r);ht.select(".nv-focus .nv-x.nv-axis").attr("transform","translate(0,"+ct.range()[0]+")");b.scale(ct).ticks(dt/36).tickSize(-wt,0);ht.select(".nv-focus .nv-y1.nv-axis").style("opacity",bt.length?1:0);k.scale(vt).ticks(dt/36).tickSize(bt.length?0:-wt,0);ht.select(".nv-focus .nv-y2.nv-axis").style("opacity",ti.length?1:0).attr("transform","translate("+v.range()[1]+",0)");ht.select(".nv-focus .nv-y1.nv-axis").transition().duration(y).call(b);ht.select(".nv-focus .nv-y2.nv-axis").transition().duration(y).call(k)}var ni=d3.select(this),yi=this,wt=(et||parseInt(ni.style("width"))||960)-i.left-i.right,dt=(tt||parseInt(ni.style("height"))||400)-i.top-i.bottom-ot,kt=ot-ft.top-ft.bottom,ri,bt,ti,hi,ci,ii,gt,li,ai,ei,oi,si;if(t.update=function(){ni.transition().duration(y).call(t)},t.container=this,n&&n.length&&n.filter(function(n){return n.values.length}).length)ni.selectAll(".nv-noData").remove();else return ri=ni.selectAll(".nv-noData").data([at]),ri.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),ri.attr("x",i.left+wt/2).attr("y",i.top+dt/2).text(function(n){return n}),t;bt=n.filter(function(n){return!n.disabled&&n.bar});ti=n.filter(function(n){return!n.bar});v=u.xScale();e=w.scale();ct=u.yScale();vt=r.yScale();lt=d.yScale();yt=p.yScale();hi=n.filter(function(n){return!n.disabled&&n.bar}).map(function(n){return n.values.map(function(n,t){return{x:it(n,t),y:rt(n,t)}})});ci=n.filter(function(n){return!n.disabled&&!n.bar}).map(function(n){return n.values.map(function(n,t){return{x:it(n,t),y:rt(n,t)}})});v.range([0,wt]);e.domain(d3.extent(d3.merge(hi.concat(ci)),function(n){return n.x})).range([0,wt]);var ui=ni.selectAll("g.nv-wrap.nv-linePlusBar").data([n]),fi=ui.enter().append("g").attr("class","nvd3 nv-wrap nv-linePlusBar").append("g"),ht=ui.select("g");fi.append("g").attr("class","nv-legendWrap");ii=fi.append("g").attr("class","nv-focus");ii.append("g").attr("class","nv-x nv-axis");ii.append("g").attr("class","nv-y1 nv-axis");ii.append("g").attr("class","nv-y2 nv-axis");ii.append("g").attr("class","nv-barsWrap");ii.append("g").attr("class","nv-linesWrap");gt=fi.append("g").attr("class","nv-context");gt.append("g").attr("class","nv-x nv-axis");gt.append("g").attr("class","nv-y1 nv-axis");gt.append("g").attr("class","nv-y2 nv-axis");gt.append("g").attr("class","nv-barsWrap");gt.append("g").attr("class","nv-linesWrap");gt.append("g").attr("class","nv-brushBackground");gt.append("g").attr("class","nv-x nv-brush");st&&(c.width(wt/2),ht.select(".nv-legendWrap").datum(n.map(function(n){return n.originalKey=n.originalKey===undefined?n.key:n.originalKey,n.key=n.originalKey+(n.bar?" (left axis)":" (right axis)"),n})).call(c),i.top!=c.height()&&(i.top=c.height(),dt=(tt||parseInt(ni.style("height"))||400)-i.top-i.bottom-ot),ht.select(".nv-legendWrap").attr("transform","translate("+wt/2+","+-i.top+")"));ui.attr("transform","translate("+i.left+","+i.top+")");d.width(wt).height(kt).color(n.map(function(n,t){return n.color||l(n,t)}).filter(function(t,i){return!n[i].disabled&&n[i].bar}));p.width(wt).height(kt).color(n.map(function(n,t){return n.color||l(n,t)}).filter(function(t,i){return!n[i].disabled&&!n[i].bar}));li=ht.select(".nv-context .nv-barsWrap").datum(bt.length?bt:[{values:[]}]);ai=ht.select(".nv-context .nv-linesWrap").datum(ti[0].disabled?[{values:[]}]:ti);ht.select(".nv-context").attr("transform","translate(0,"+(dt+i.bottom+ft.top)+")");li.transition().call(d);ai.transition().call(p);f.x(e).on("brush",vi);s&&f.extent(s);ei=ht.select(".nv-brushBackground").selectAll("g").data([s||f.extent()]);oi=ei.enter().append("g");oi.append("rect").attr("class","left").attr("x",0).attr("y",0).attr("height",kt);oi.append("rect").attr("class","right").attr("x",0).attr("y",0).attr("height",kt);si=ht.select(".nv-x.nv-brush").call(f);si.selectAll("rect").attr("height",kt);si.selectAll(".resize").append("path").attr("d",pi);w.ticks(wt/100).tickSize(-kt,0);ht.select(".nv-context .nv-x.nv-axis").attr("transform","translate(0,"+lt.range()[0]+")");ht.select(".nv-context .nv-x.nv-axis").transition().call(w);g.scale(lt).ticks(kt/36).tickSize(-wt,0);ht.select(".nv-context .nv-y1.nv-axis").style("opacity",bt.length?1:0).attr("transform","translate(0,"+e.range()[0]+")");ht.select(".nv-context .nv-y1.nv-axis").transition().call(g);nt.scale(yt).ticks(kt/36).tickSize(bt.length?0:-wt,0);ht.select(".nv-context .nv-y2.nv-axis").style("opacity",ti.length?1:0).attr("transform","translate("+e.range()[1]+",0)");ht.select(".nv-context .nv-y2.nv-axis").transition().call(nt);c.dispatch.on("stateChange",function(){t.update()});h.on("tooltipShow",function(n){ut&&pt(n,yi.parentNode)});vi()}),t}var r=n.models.line(),p=n.models.line(),u=n.models.historicalBar(),d=n.models.historicalBar(),a=n.models.axis(),w=n.models.axis(),b=n.models.axis(),k=n.models.axis(),g=n.models.axis(),nt=n.models.axis(),c=n.models.legend(),f=d3.svg.brush(),i={top:30,right:30,bottom:30,left:60},ft={top:0,right:30,bottom:20,left:60},et=null,tt=null,ot=100,it=function(n){return n.x},rt=function(n){return n.y},l=n.utils.defaultColor(),st=!0,o,s=null,ut=!0,ht=function(n,t,i){return"<h3>"+n+"<\/h3><p>"+i+" at "+t+"<\/p>"},v,e,ct,vt,lt,yt,at="No Data Available.",h=d3.dispatch("tooltipShow","tooltipHide","brush"),y=0,pt;r.clipEdge(!0);p.interactive(!1);a.orient("bottom").tickPadding(5);b.orient("left");k.orient("right");w.orient("bottom").tickPadding(5);g.orient("left");nt.orient("right");pt=function(i,u){o&&(i.pointIndex+=Math.ceil(o[0]));var f=i.pos[0]+(u.offsetLeft||0),e=i.pos[1]+(u.offsetTop||0),s=a.tickFormat()(r.x()(i.point,i.pointIndex)),h=(i.series.bar?b:k).tickFormat()(r.y()(i.point,i.pointIndex)),c=ht(i.series.key,s,h,i,t);n.tooltip.show([f,e],c,i.value<0?"n":"s",null,u)};r.dispatch.on("elementMouseover.tooltip",function(n){n.pos=[n.pos[0]+i.left,n.pos[1]+i.top];h.tooltipShow(n)});r.dispatch.on("elementMouseout.tooltip",function(n){h.tooltipHide(n)});u.dispatch.on("elementMouseover.tooltip",function(n){n.pos=[n.pos[0]+i.left,n.pos[1]+i.top];h.tooltipShow(n)});u.dispatch.on("elementMouseout.tooltip",function(n){h.tooltipHide(n)});h.on("tooltipHide",function(){ut&&n.tooltip.cleanup()});return t.dispatch=h,t.legend=c,t.lines=r,t.lines2=p,t.bars=u,t.bars2=d,t.xAxis=a,t.x2Axis=w,t.y1Axis=b,t.y2Axis=k,t.y3Axis=g,t.y4Axis=nt,d3.rebind(t,r,"defined","size","clipVoronoi","interpolate"),t.options=n.utils.optionsFunc.bind(t),t.x=function(n){return arguments.length?(it=n,r.x(n),u.x(n),t):it},t.y=function(n){return arguments.length?(rt=n,r.y(n),u.y(n),t):rt},t.margin=function(n){return arguments.length?(i.top=typeof n.top!="undefined"?n.top:i.top,i.right=typeof n.right!="undefined"?n.right:i.right,i.bottom=typeof n.bottom!="undefined"?n.bottom:i.bottom,i.left=typeof n.left!="undefined"?n.left:i.left,t):i},t.width=function(n){return arguments.length?(et=n,t):et},t.height=function(n){return arguments.length?(tt=n,t):tt},t.color=function(i){return arguments.length?(l=n.utils.getColor(i),c.color(l),t):l},t.showLegend=function(n){return arguments.length?(st=n,t):st},t.tooltips=function(n){return arguments.length?(ut=n,t):ut},t.tooltipContent=function(n){return arguments.length?(ht=n,t):ht},t.noData=function(n){return arguments.length?(at=n,t):at},t.brushExtent=function(n){return arguments.length?(s=n,t):s},t};n.models.multiBar=function(){"use strict";function t(n){return n.each(function(n){var ht=k-e.left-e.right,ct=d-e.top-e.bottom,at=d3.select(this),st,et,t,wt;s&&n.length&&(s=[{values:n[0].values.map(function(n){return{x:n.x,y:0,series:n.series,size:.01}})}]);u&&(n=d3.layout.stack().offset(tt).values(function(n){return n.values}).y(f)(!n.length&&s?s:n));n.forEach(function(n,t){n.values.forEach(function(n){n.series=t})});u&&n[0].values.map(function(t,i){var r=0,u=0;n.map(function(n){var t=n.values[i];t.size=Math.abs(t.y);t.y<0?(t.y1=u,u=u-t.size):(t.y1=t.size+r,r=r+t.size)})});st=w&&b?[]:n.map(function(n){return n.values.map(function(n,t){return{x:o(n,t),y:f(n,t),y0:n.y0,y1:n.y1}})});i.domain(w||d3.merge(st).map(function(n){return n.x})).rangeBands(it||[0,ht],ut);r.domain(b||d3.extent(d3.merge(st).map(function(n){return u?n.y>0?n.y1:n.y1+n.y:n.y}).concat(g))).range(rt||[ct,0]);i.domain()[0]===i.domain()[1]&&(i.domain()[0]?i.domain([i.domain()[0]-i.domain()[0]*.01,i.domain()[1]+i.domain()[1]*.01]):i.domain([-1,1]));r.domain()[0]===r.domain()[1]&&(r.domain()[0]?r.domain([r.domain()[0]+r.domain()[0]*.01,r.domain()[1]-r.domain()[1]*.01]):r.domain([-1,1]));ft=ft||i;l=l||r;var ot=at.selectAll("g.nv-wrap.nv-multibar").data([n]),lt=ot.enter().append("g").attr("class","nvd3 nv-wrap nv-multibar"),vt=lt.append("defs"),yt=lt.append("g"),pt=ot.select("g");yt.append("g").attr("class","nv-groups");ot.attr("transform","translate("+e.left+","+e.top+")");vt.append("clipPath").attr("id","nv-edge-clip-"+a).append("rect");ot.select("#nv-edge-clip-"+a+" rect").attr("width",ht).attr("height",ct);pt.attr("clip-path",nt?"url(#nv-edge-clip-"+a+")":"");et=ot.select(".nv-groups").selectAll(".nv-group").data(function(n){return n},function(n,t){return t});et.enter().append("g").style("stroke-opacity",1e-6).style("fill-opacity",1e-6);et.exit().transition().selectAll("rect.nv-bar").delay(function(t,i){return i*y/n[0].values.length}).attr("y",function(n){return u?l(n.y0):l(0)}).attr("height",0).remove();et.attr("class",function(n,t){return"nv-group nv-series-"+t}).classed("hover",function(n){return n.hover}).style("fill",function(n,t){return c(n,t)}).style("stroke",function(n,t){return c(n,t)});et.transition().style("stroke-opacity",1).style("fill-opacity",.75);t=et.selectAll("rect.nv-bar").data(function(t){return s&&!n.length?s.values:t.values});t.exit().remove();wt=t.enter().append("rect").attr("class",function(n,t){return f(n,t)<0?"nv-bar negative":"nv-bar positive"}).attr("x",function(t,r,f){return u?0:f*i.rangeBand()/n.length}).attr("y",function(n){return l(u?n.y0:0)}).attr("height",0).attr("width",i.rangeBand()/(u?1:n.length)).attr("transform",function(n,t){return"translate("+i(o(n,t))+",0)"});t.style("fill",function(n,t,i){return c(n,i,t)}).style("stroke",function(n,t,i){return c(n,i,t)}).on("mouseover",function(t,e){d3.select(this).classed("hover",!0);p.elementMouseover({value:f(t,e),point:t,series:n[t.series],pos:[i(o(t,e))+i.rangeBand()*(u?n.length/2:t.series+.5)/n.length,r(f(t,e)+(u?t.y0:0))],pointIndex:e,seriesIndex:t.series,e:d3.event})}).on("mouseout",function(t,i){d3.select(this).classed("hover",!1);p.elementMouseout({value:f(t,i),point:t,series:n[t.series],pointIndex:i,seriesIndex:t.series,e:d3.event})}).on("click",function(t,e){p.elementClick({value:f(t,e),point:t,series:n[t.series],pos:[i(o(t,e))+i.rangeBand()*(u?n.length/2:t.series+.5)/n.length,r(f(t,e)+(u?t.y0:0))],pointIndex:e,seriesIndex:t.series,e:d3.event});d3.event.stopPropagation()}).on("dblclick",function(t,e){p.elementDblClick({value:f(t,e),point:t,series:n[t.series],pos:[i(o(t,e))+i.rangeBand()*(u?n.length/2:t.series+.5)/n.length,r(f(t,e)+(u?t.y0:0))],pointIndex:e,seriesIndex:t.series,e:d3.event});d3.event.stopPropagation()});t.attr("class",function(n,t){return f(n,t)<0?"nv-bar negative":"nv-bar positive"}).transition().attr("transform",function(n,t){return"translate("+i(o(n,t))+",0)"});v&&(h||(h=n.map(function(){return!0})),t.style("fill",function(n,t,i){return d3.rgb(v(n,t)).darker(h.map(function(n,t){return t}).filter(function(n,t){return!h[t]})[i]).toString()}).style("stroke",function(n,t,i){return d3.rgb(v(n,t)).darker(h.map(function(n,t){return t}).filter(function(n,t){return!h[t]})[i]).toString()}));u?t.transition().delay(function(t,i){return i*y/n[0].values.length}).attr("y",function(n){return r(u?n.y1:0)}).attr("height",function(n){return Math.max(Math.abs(r(n.y+(u?n.y0:0))-r(u?n.y0:0)),1)}).attr("x",function(t){return u?0:t.series*i.rangeBand()/n.length}).attr("width",i.rangeBand()/(u?1:n.length)):t.transition().delay(function(t,i){return i*y/n[0].values.length}).attr("x",function(t){return t.series*i.rangeBand()/n.length}).attr("width",i.rangeBand()/n.length).attr("y",function(n,t){return f(n,t)<0?r(0):r(0)-r(f(n,t))<1?r(0)-1:r(f(n,t))||0}).attr("height",function(n,t){return Math.max(Math.abs(r(f(n,t))-r(0)),1)||0});ft=i.copy();l=r.copy()}),t}var e={top:0,right:0,bottom:0,left:0},k=960,d=500,i=d3.scale.ordinal(),r=d3.scale.linear(),a=Math.floor(Math.random()*1e4),o=function(n){return n.x},f=function(n){return n.y},g=[0],nt=!0,u=!1,tt="zero",c=n.utils.defaultColor(),s=!1,v=null,h,y=1200,w,b,it,rt,ut=.1,p=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout"),ft,l;return t.dispatch=p,t.options=n.utils.optionsFunc.bind(t),t.x=function(n){return arguments.length?(o=n,t):o},t.y=function(n){return arguments.length?(f=n,t):f},t.margin=function(n){return arguments.length?(e.top=typeof n.top!="undefined"?n.top:e.top,e.right=typeof n.right!="undefined"?n.right:e.right,e.bottom=typeof n.bottom!="undefined"?n.bottom:e.bottom,e.left=typeof n.left!="undefined"?n.left:e.left,t):e},t.width=function(n){return arguments.length?(k=n,t):k},t.height=function(n){return arguments.length?(d=n,t):d},t.xScale=function(n){return arguments.length?(i=n,t):i},t.yScale=function(n){return arguments.length?(r=n,t):r},t.xDomain=function(n){return arguments.length?(w=n,t):w},t.yDomain=function(n){return arguments.length?(b=n,t):b},t.xRange=function(n){return arguments.length?(it=n,t):it},t.yRange=function(n){return arguments.length?(rt=n,t):rt},t.forceY=function(n){return arguments.length?(g=n,t):g},t.stacked=function(n){return arguments.length?(u=n,t):u},t.stackOffset=function(n){return arguments.length?(tt=n,t):tt},t.clipEdge=function(n){return arguments.length?(nt=n,t):nt},t.color=function(i){return arguments.length?(c=n.utils.getColor(i),t):c},t.barColor=function(i){return arguments.length?(v=n.utils.getColor(i),t):v},t.disabled=function(n){return arguments.length?(h=n,t):h},t.id=function(n){return arguments.length?(a=n,t):a},t.hideable=function(n){return arguments.length?(s=n,t):s},t.delay=function(n){return arguments.length?(y=n,t):y},t.groupSpacing=function(n){return arguments.length?(ut=n,t):ut},t};n.models.multiBarChart=function(){"use strict";function t(n){return n.each(function(n){var ht=d3.select(this),ii=this,ct=(k||parseInt(ht.style("width"))||960)-i.left-i.right,lt=(v||parseInt(ht.style("height"))||400)-i.top-i.bottom,at,wt,pt,kt,yt,ti;if(t.update=function(){ht.transition().duration(et).call(t)},t.container=this,u.disabled=n.map(function(n){return!!n.disabled}),!s){s={};for(at in u)s[at]=u[at]instanceof Array?u[at].slice(0):u[at]}if(n&&n.length&&n.filter(function(n){return n.values.length}).length)ht.selectAll(".nv-noData").remove();else return wt=ht.selectAll(".nv-noData").data([ut]),wt.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),wt.attr("x",i.left+ct/2).attr("y",i.top+lt/2).text(function(n){return n}),t;ot=r.xScale();rt=r.yScale();var bt=ht.selectAll("g.nv-wrap.nv-multiBarWithLegend").data([n]),vt=bt.enter().append("g").attr("class","nvd3 nv-wrap nv-multiBarWithLegend").append("g"),l=bt.select("g");if(vt.append("g").attr("class","nv-x nv-axis"),vt.append("g").attr("class","nv-y nv-axis"),vt.append("g").attr("class","nv-barsWrap"),vt.append("g").attr("class","nv-legendWrap"),vt.append("g").attr("class","nv-controlsWrap"),d&&(e.width(ct-ft()),r.barColor()&&n.forEach(function(n,t){n.color=d3.rgb("#ccc").darker(t*1.5).toString()}),l.select(".nv-legendWrap").datum(n).call(e),i.top!=e.height()&&(i.top=e.height(),lt=(v||parseInt(ht.style("height"))||400)-i.top-i.bottom),l.select(".nv-legendWrap").attr("transform","translate("+ft()+","+-i.top+")")),p&&(pt=[{key:"Grouped",disabled:r.stacked()},{key:"Stacked",disabled:!r.stacked()}],a.width(ft()).color(["#444","#444","#444"]),l.select(".nv-controlsWrap").datum(pt).attr("transform","translate(0,"+-i.top+")").call(a)),bt.attr("transform","translate("+i.left+","+i.top+")"),w&&l.select(".nv-y.nv-axis").attr("transform","translate("+ct+",0)"),r.disabled(n.map(function(n){return n.disabled})).width(ct).height(lt).color(n.map(function(n,t){return n.color||y(n,t)}).filter(function(t,i){return!n[i].disabled})),kt=l.select(".nv-barsWrap").datum(n.filter(function(n){return!n.disabled})),kt.transition().call(r),g){if(h.scale(ot).ticks(ct/100).tickSize(-lt,0),l.select(".nv-x.nv-axis").attr("transform","translate(0,"+rt.range()[0]+")"),l.select(".nv-x.nv-axis").transition().call(h),yt=l.select(".nv-x.nv-axis > g").selectAll("g"),yt.selectAll("line, text").style("opacity",1),it){var dt=function(n,t){return"translate("+n+","+t+")"},gt=5,ni=17;yt.selectAll("text").attr("transform",function(n,t,i){return dt(0,i%2==0?gt:ni)});ti=d3.selectAll(".nv-x.nv-axis .nv-wrap g g text")[0].length;l.selectAll(".nv-x.nv-axis .nv-axisMaxMin text").attr("transform",function(n,t){return dt(0,t===0||ti%2!=0?ni:gt)})}tt&&yt.filter(function(t,i){return i%Math.ceil(n[0].values.length/(ct/100))!=0}).selectAll("text, line").style("opacity",0);c&&yt.selectAll(".tick text").attr("transform","rotate("+c+" 0,0)").style("text-anchor",c>0?"start":"end");l.select(".nv-x.nv-axis").selectAll("g.nv-axisMaxMin text").style("opacity",1)}nt&&(o.scale(rt).ticks(lt/36).tickSize(-ct,0),l.select(".nv-y.nv-axis").transition().call(o));e.dispatch.on("stateChange",function(n){u=n;f.stateChange(u);t.update()});a.dispatch.on("legendClick",function(n){if(n.disabled){pt=pt.map(function(n){return n.disabled=!0,n});n.disabled=!1;switch(n.key){case"Grouped":r.stacked(!1);break;case"Stacked":r.stacked(!0)}u.stacked=r.stacked();f.stateChange(u);t.update()}});f.on("tooltipShow",function(n){b&&st(n,ii.parentNode)});f.on("changeState",function(i){typeof i.disabled!="undefined"&&(n.forEach(function(n,t){n.disabled=i.disabled[t]}),u.disabled=i.disabled);typeof i.stacked!="undefined"&&(r.stacked(i.stacked),u.stacked=i.stacked);t.update()})}),t}var r=n.models.multiBar(),h=n.models.axis(),o=n.models.axis(),e=n.models.legend(),a=n.models.legend(),i={top:30,right:20,bottom:50,left:60},k=null,v=null,y=n.utils.defaultColor(),p=!0,d=!0,g=!0,nt=!0,w=!1,tt=!0,it=!1,c=0,b=!0,l=function(n,t,i){return"<h3>"+n+"<\/h3><p>"+i+" on "+t+"<\/p>"},ot,rt,u={stacked:!1},s=null,ut="No Data Available.",f=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState"),ft=function(){return p?180:0},et=250,st;r.stacked(!1);h.orient("bottom").tickPadding(7).highlightZero(!0).showMaxMin(!1).tickFormat(function(n){return n});o.orient(w?"right":"left").tickFormat(d3.format(",.1f"));a.updateState(!1);st=function(i,u){var f=i.pos[0]+(u.offsetLeft||0),e=i.pos[1]+(u.offsetTop||0),s=h.tickFormat()(r.x()(i.point,i.pointIndex)),c=o.tickFormat()(r.y()(i.point,i.pointIndex)),a=l(i.series.key,s,c,i,t);n.tooltip.show([f,e],a,i.value<0?"n":"s",null,u)};r.dispatch.on("elementMouseover.tooltip",function(n){n.pos=[n.pos[0]+i.left,n.pos[1]+i.top];f.tooltipShow(n)});r.dispatch.on("elementMouseout.tooltip",function(n){f.tooltipHide(n)});f.on("tooltipHide",function(){b&&n.tooltip.cleanup()});return t.dispatch=f,t.multibar=r,t.legend=e,t.xAxis=h,t.yAxis=o,d3.rebind(t,r,"x","y","xDomain","yDomain","xRange","yRange","forceX","forceY","clipEdge","id","stacked","stackOffset","delay","barColor","groupSpacing"),t.options=n.utils.optionsFunc.bind(t),t.margin=function(n){return arguments.length?(i.top=typeof n.top!="undefined"?n.top:i.top,i.right=typeof n.right!="undefined"?n.right:i.right,i.bottom=typeof n.bottom!="undefined"?n.bottom:i.bottom,i.left=typeof n.left!="undefined"?n.left:i.left,t):i},t.width=function(n){return arguments.length?(k=n,t):k},t.height=function(n){return arguments.length?(v=n,t):v},t.color=function(i){return arguments.length?(y=n.utils.getColor(i),e.color(y),t):y},t.showControls=function(n){return arguments.length?(p=n,t):p},t.showLegend=function(n){return arguments.length?(d=n,t):d},t.showXAxis=function(n){return arguments.length?(g=n,t):g},t.showYAxis=function(n){return arguments.length?(nt=n,t):nt},t.rightAlignYAxis=function(n){return arguments.length?(w=n,o.orient(n?"right":"left"),t):w},t.reduceXTicks=function(n){return arguments.length?(tt=n,t):tt},t.rotateLabels=function(n){return arguments.length?(c=n,t):c},t.staggerLabels=function(n){return arguments.length?(it=n,t):it},t.tooltip=function(n){return arguments.length?(l=n,t):l},t.tooltips=function(n){return arguments.length?(b=n,t):b},t.tooltipContent=function(n){return arguments.length?(l=n,t):l},t.state=function(n){return arguments.length?(u=n,t):u},t.defaultState=function(n){return arguments.length?(s=n,t):s},t.noData=function(n){return arguments.length?(ut=n,t):ut},t.transitionDuration=function(n){return arguments.length?(et=n,t):et},t};n.models.multiBarHorizontal=function(){"use strict";function t(n){return n.each(function(n){var st=k-e.left-e.right,ct=d-e.top-e.bottom,at=d3.select(this),ot,ut,t,et;f&&(n=d3.layout.stack().offset("zero").values(function(n){return n.values}).y(r)(n));n.forEach(function(n,t){n.values.forEach(function(n){n.series=t})});f&&n[0].values.map(function(t,i){var r=0,u=0;n.map(function(n){var t=n.values[i];t.size=Math.abs(t.y);t.y<0?(t.y1=u-t.size,u=u-t.size):(t.y1=r,r=r+t.size)})});ot=y&&p?[]:n.map(function(n){return n.values.map(function(n,t){return{x:o(n,t),y:r(n,t),y0:n.y0,y1:n.y1}})});u.domain(y||d3.merge(ot).map(function(n){return n.x})).rangeBands(it||[0,ct],.1);i.domain(p||d3.extent(d3.merge(ot).map(function(n){return f?n.y>0?n.y1+n.y:n.y1:n.y}).concat(g)));a&&!f?i.range(w||[i.domain()[0]<0?v:0,st-(i.domain()[1]>0?v:0)]):i.range(w||[0,st]);rt=rt||u;b=b||d3.scale.linear().domain(i.domain()).range([i(0),i(0)]);var ft=d3.select(this).selectAll("g.nv-wrap.nv-multibarHorizontal").data([n]),ht=ft.enter().append("g").attr("class","nvd3 nv-wrap nv-multibarHorizontal"),vt=ht.append("defs"),lt=ht.append("g"),yt=ft.select("g");lt.append("g").attr("class","nv-groups");ft.attr("transform","translate("+e.left+","+e.top+")");ut=ft.select(".nv-groups").selectAll(".nv-group").data(function(n){return n},function(n,t){return t});ut.enter().append("g").style("stroke-opacity",1e-6).style("fill-opacity",1e-6);ut.exit().transition().style("stroke-opacity",1e-6).style("fill-opacity",1e-6).remove();ut.attr("class",function(n,t){return"nv-group nv-series-"+t}).classed("hover",function(n){return n.hover}).style("fill",function(n,t){return l(n,t)}).style("stroke",function(n,t){return l(n,t)});ut.transition().style("stroke-opacity",1).style("fill-opacity",.75);t=ut.selectAll("g.nv-bar").data(function(n){return n.values});t.exit().remove();et=t.enter().append("g").attr("transform",function(t,i,r){return"translate("+b(f?t.y0:0)+","+(f?0:r*u.rangeBand()/n.length+u(o(t,i)))+")"});et.append("rect").attr("width",0).attr("height",u.rangeBand()/(f?1:n.length));t.on("mouseover",function(t,e){d3.select(this).classed("hover",!0);c.elementMouseover({value:r(t,e),point:t,series:n[t.series],pos:[i(r(t,e)+(f?t.y0:0)),u(o(t,e))+u.rangeBand()*(f?n.length/2:t.series+.5)/n.length],pointIndex:e,seriesIndex:t.series,e:d3.event})}).on("mouseout",function(t,i){d3.select(this).classed("hover",!1);c.elementMouseout({value:r(t,i),point:t,series:n[t.series],pointIndex:i,seriesIndex:t.series,e:d3.event})}).on("click",function(t,e){c.elementClick({value:r(t,e),point:t,series:n[t.series],pos:[u(o(t,e))+u.rangeBand()*(f?n.length/2:t.series+.5)/n.length,i(r(t,e)+(f?t.y0:0))],pointIndex:e,seriesIndex:t.series,e:d3.event});d3.event.stopPropagation()}).on("dblclick",function(t,e){c.elementDblClick({value:r(t,e),point:t,series:n[t.series],pos:[u(o(t,e))+u.rangeBand()*(f?n.length/2:t.series+.5)/n.length,i(r(t,e)+(f?t.y0:0))],pointIndex:e,seriesIndex:t.series,e:d3.event});d3.event.stopPropagation()});et.append("text");a&&!f?(t.select("text").attr("text-anchor",function(n,t){return r(n,t)<0?"end":"start"}).attr("y",u.rangeBand()/(n.length*2)).attr("dy",".32em").text(function(n,t){return tt(r(n,t))}),t.transition().select("text").attr("x",function(n,t){return r(n,t)<0?-4:i(r(n,t))-i(0)+4})):t.selectAll("text").text("");nt&&!f?(et.append("text").classed("nv-bar-label",!0),t.select("text.nv-bar-label").attr("text-anchor",function(n,t){return r(n,t)<0?"start":"end"}).attr("y",u.rangeBand()/(n.length*2)).attr("dy",".32em").text(function(n,t){return o(n,t)}),t.transition().select("text.nv-bar-label").attr("x",function(n,t){return r(n,t)<0?i(0)-i(r(n,t))+4:-4})):t.selectAll("text.nv-bar-label").text("");t.attr("class",function(n,t){return r(n,t)<0?"nv-bar negative":"nv-bar positive"});h&&(s||(s=n.map(function(){return!0})),t.style("fill",function(n,t,i){return d3.rgb(h(n,t)).darker(s.map(function(n,t){return t}).filter(function(n,t){return!s[t]})[i]).toString()}).style("stroke",function(n,t,i){return d3.rgb(h(n,t)).darker(s.map(function(n,t){return t}).filter(function(n,t){return!s[t]})[i]).toString()}));f?t.transition().attr("transform",function(n,t){return"translate("+i(n.y1)+","+u(o(n,t))+")"}).select("rect").attr("width",function(n,t){return Math.abs(i(r(n,t)+n.y0)-i(n.y0))}).attr("height",u.rangeBand()):t.transition().attr("transform",function(t,f){return"translate("+(r(t,f)<0?i(r(t,f)):i(0))+","+(t.series*u.rangeBand()/n.length+u(o(t,f)))+")"}).select("rect").attr("height",u.rangeBand()/n.length).attr("width",function(n,t){return Math.max(Math.abs(i(r(n,t))-i(0)),1)});rt=u.copy();b=i.copy()}),t}var e={top:0,right:0,bottom:0,left:0},k=960,d=500,ut=Math.floor(Math.random()*1e4),u=d3.scale.ordinal(),i=d3.scale.linear(),o=function(n){return n.x},r=function(n){return n.y},g=[0],l=n.utils.defaultColor(),h=null,s,f=!1,a=!1,nt=!1,v=60,tt=d3.format(",.2f"),ft=1200,y,p,it,w,c=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout"),rt,b;return t.dispatch=c,t.options=n.utils.optionsFunc.bind(t),t.x=function(n){return arguments.length?(o=n,t):o},t.y=function(n){return arguments.length?(r=n,t):r},t.margin=function(n){return arguments.length?(e.top=typeof n.top!="undefined"?n.top:e.top,e.right=typeof n.right!="undefined"?n.right:e.right,e.bottom=typeof n.bottom!="undefined"?n.bottom:e.bottom,e.left=typeof n.left!="undefined"?n.left:e.left,t):e},t.width=function(n){return arguments.length?(k=n,t):k},t.height=function(n){return arguments.length?(d=n,t):d},t.xScale=function(n){return arguments.length?(u=n,t):u},t.yScale=function(n){return arguments.length?(i=n,t):i},t.xDomain=function(n){return arguments.length?(y=n,t):y},t.yDomain=function(n){return arguments.length?(p=n,t):p},t.xRange=function(n){return arguments.length?(it=n,t):it},t.yRange=function(n){return arguments.length?(w=n,t):w},t.forceY=function(n){return arguments.length?(g=n,t):g},t.stacked=function(n){return arguments.length?(f=n,t):f},t.color=function(i){return arguments.length?(l=n.utils.getColor(i),t):l},t.barColor=function(i){return arguments.length?(h=n.utils.getColor(i),t):h},t.disabled=function(n){return arguments.length?(s=n,t):s},t.id=function(n){return arguments.length?(ut=n,t):ut},t.delay=function(n){return arguments.length?(ft=n,t):ft},t.showValues=function(n){return arguments.length?(a=n,t):a},t.showBarLabels=function(n){return arguments.length?(nt=n,t):nt},t.valueFormat=function(n){return arguments.length?(tt=n,t):tt},t.valuePadding=function(n){return arguments.length?(v=n,t):v},t};n.models.multiBarHorizontalChart=function(){"use strict";function t(n){return n.each(function(n){var rt=d3.select(this),pt=this,ot=(b||parseInt(rt.style("width"))||960)-i.left-i.right,et=(a||parseInt(rt.style("height"))||400)-i.top-i.bottom,st,lt,ct,vt,yt;if(t.update=function(){rt.transition().duration(it).call(t)},t.container=this,u.disabled=n.map(function(n){return!!n.disabled}),!o){o={};for(st in u)o[st]=u[st]instanceof Array?u[st].slice(0):u[st]}if(n&&n.length&&n.filter(function(n){return n.values.length}).length)rt.selectAll(".nv-noData").remove();else return lt=rt.selectAll(".nv-noData").data([nt]),lt.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),lt.attr("x",i.left+ot/2).attr("y",i.top+et/2).text(function(n){return n}),t;ut=r.xScale();w=r.yScale();var at=rt.selectAll("g.nv-wrap.nv-multiBarHorizontalChart").data([n]),ht=at.enter().append("g").attr("class","nvd3 nv-wrap nv-multiBarHorizontalChart").append("g"),c=at.select("g");ht.append("g").attr("class","nv-x nv-axis");ht.append("g").attr("class","nv-y nv-axis").append("g").attr("class","nv-zeroLine").append("line");ht.append("g").attr("class","nv-barsWrap");ht.append("g").attr("class","nv-legendWrap");ht.append("g").attr("class","nv-controlsWrap");k&&(e.width(ot-tt()),r.barColor()&&n.forEach(function(n,t){n.color=d3.rgb("#ccc").darker(t*1.5).toString()}),c.select(".nv-legendWrap").datum(n).call(e),i.top!=e.height()&&(i.top=e.height(),et=(a||parseInt(rt.style("height"))||400)-i.top-i.bottom),c.select(".nv-legendWrap").attr("transform","translate("+tt()+","+-i.top+")"));y&&(ct=[{key:"Grouped",disabled:r.stacked()},{key:"Stacked",disabled:!r.stacked()}],l.width(tt()).color(["#444","#444","#444"]),c.select(".nv-controlsWrap").datum(ct).attr("transform","translate(0,"+-i.top+")").call(l));at.attr("transform","translate("+i.left+","+i.top+")");r.disabled(n.map(function(n){return n.disabled})).width(ot).height(et).color(n.map(function(n,t){return n.color||v(n,t)}).filter(function(t,i){return!n[i].disabled}));vt=c.select(".nv-barsWrap").datum(n.filter(function(n){return!n.disabled}));vt.transition().call(r);d&&(s.scale(ut).ticks(et/24).tickSize(-ot,0),c.select(".nv-x.nv-axis").transition().call(s),yt=c.select(".nv-x.nv-axis").selectAll("g"),yt.selectAll("line, text"));g&&(h.scale(w).ticks(ot/100).tickSize(-et,0),c.select(".nv-y.nv-axis").attr("transform","translate(0,"+et+")"),c.select(".nv-y.nv-axis").transition().call(h));c.select(".nv-zeroLine line").attr("x1",w(0)).attr("x2",w(0)).attr("y1",0).attr("y2",-et);e.dispatch.on("stateChange",function(n){u=n;f.stateChange(u);t.update()});l.dispatch.on("legendClick",function(n){if(n.disabled){ct=ct.map(function(n){return n.disabled=!0,n});n.disabled=!1;switch(n.key){case"Grouped":r.stacked(!1);break;case"Stacked":r.stacked(!0)}u.stacked=r.stacked();f.stateChange(u);t.update()}});f.on("tooltipShow",function(n){p&&ft(n,pt.parentNode)});f.on("changeState",function(i){typeof i.disabled!="undefined"&&(n.forEach(function(n,t){n.disabled=i.disabled[t]}),u.disabled=i.disabled);typeof i.stacked!="undefined"&&(r.stacked(i.stacked),u.stacked=i.stacked);t.update()})}),t}var r=n.models.multiBarHorizontal(),s=n.models.axis(),h=n.models.axis(),e=n.models.legend().height(30),l=n.models.legend().height(30),i={top:30,right:20,bottom:50,left:60},b=null,a=null,v=n.utils.defaultColor(),y=!0,k=!0,d=!0,g=!0,rt=!1,p=!0,c=function(n,t,i){return"<h3>"+n+" - "+t+"<\/h3><p>"+i+"<\/p>"},ut,w,u={stacked:rt},o=null,nt="No Data Available.",f=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState"),tt=function(){return y?180:0},it=250,ft;r.stacked(rt);s.orient("left").tickPadding(5).highlightZero(!1).showMaxMin(!1).tickFormat(function(n){return n});h.orient("bottom").tickFormat(d3.format(",.1f"));l.updateState(!1);ft=function(i,u){var f=i.pos[0]+(u.offsetLeft||0),e=i.pos[1]+(u.offsetTop||0),o=s.tickFormat()(r.x()(i.point,i.pointIndex)),l=h.tickFormat()(r.y()(i.point,i.pointIndex)),a=c(i.series.key,o,l,i,t);n.tooltip.show([f,e],a,i.value<0?"e":"w",null,u)};r.dispatch.on("elementMouseover.tooltip",function(n){n.pos=[n.pos[0]+i.left,n.pos[1]+i.top];f.tooltipShow(n)});r.dispatch.on("elementMouseout.tooltip",function(n){f.tooltipHide(n)});f.on("tooltipHide",function(){p&&n.tooltip.cleanup()});return t.dispatch=f,t.multibar=r,t.legend=e,t.xAxis=s,t.yAxis=h,d3.rebind(t,r,"x","y","xDomain","yDomain","xRange","yRange","forceX","forceY","clipEdge","id","delay","showValues","showBarLabels","valueFormat","stacked","barColor"),t.options=n.utils.optionsFunc.bind(t),t.margin=function(n){return arguments.length?(i.top=typeof n.top!="undefined"?n.top:i.top,i.right=typeof n.right!="undefined"?n.right:i.right,i.bottom=typeof n.bottom!="undefined"?n.bottom:i.bottom,i.left=typeof n.left!="undefined"?n.left:i.left,t):i},t.width=function(n){return arguments.length?(b=n,t):b},t.height=function(n){return arguments.length?(a=n,t):a},t.color=function(i){return arguments.length?(v=n.utils.getColor(i),e.color(v),t):v},t.showControls=function(n){return arguments.length?(y=n,t):y},t.showLegend=function(n){return arguments.length?(k=n,t):k},t.showXAxis=function(n){return arguments.length?(d=n,t):d},t.showYAxis=function(n){return arguments.length?(g=n,t):g},t.tooltip=function(n){return arguments.length?(c=n,t):c},t.tooltips=function(n){return arguments.length?(p=n,t):p},t.tooltipContent=function(n){return arguments.length?(c=n,t):c},t.state=function(n){return arguments.length?(u=n,t):u},t.defaultState=function(n){return arguments.length?(o=n,t):o},t.noData=function(n){return arguments.length?(nt=n,t):nt},t.transitionDuration=function(n){return arguments.length?(it=n,t):it},t};n.models.multiChart=function(){"use strict";function t(n){return n.each(function(n){var st=d3.select(this),kt=this,at,ot,nt;t.update=function(){st.transition().call(t)};t.container=this;var et=(d||parseInt(st.style("width"))||960)-i.left-i.right,ft=(y||parseInt(st.style("height"))||400)-i.top-i.bottom,vt=n.filter(function(n){return!n.disabled&&n.type=="line"&&n.yAxis==1}),yt=n.filter(function(n){return!n.disabled&&n.type=="line"&&n.yAxis==2}),pt=n.filter(function(n){return!n.disabled&&n.type=="bar"&&n.yAxis==1}),wt=n.filter(function(n){return!n.disabled&&n.type=="bar"&&n.yAxis==2}),ht=n.filter(function(n){return!n.disabled&&n.type=="area"&&n.yAxis==1}),ct=n.filter(function(n){return!n.disabled&&n.type=="area"&&n.yAxis==2}),bt=n.filter(function(n){return!n.disabled&&n.yAxis==1}).map(function(n){return n.values.map(function(n){return{x:n.x,y:n.y}})}),lt=n.filter(function(n){return!n.disabled&&n.yAxis==2}).map(function(n){return n.values.map(function(n){return{x:n.x,y:n.y}})});tt.domain(d3.extent(d3.merge(bt.concat(lt)),function(n){return n.x})).range([0,et]);at=st.selectAll("g.wrap.multiChart").data([n]);ot=at.enter().append("g").attr("class","wrap nvd3 multiChart").append("g");ot.append("g").attr("class","x axis");ot.append("g").attr("class","y1 axis");ot.append("g").attr("class","y2 axis");ot.append("g").attr("class","lines1Wrap");ot.append("g").attr("class","lines2Wrap");ot.append("g").attr("class","bars1Wrap");ot.append("g").attr("class","bars2Wrap");ot.append("g").attr("class","stack1Wrap");ot.append("g").attr("class","stack2Wrap");ot.append("g").attr("class","legendWrap");nt=at.select("g");g&&(v.width(et/2),nt.select(".legendWrap").datum(n.map(function(n){return n.originalKey=n.originalKey===undefined?n.key:n.originalKey,n.key=n.originalKey+(n.yAxis==1?"":" (right axis)"),n})).call(v),i.top!=v.height()&&(i.top=v.height(),ft=(y||parseInt(st.style("height"))||400)-i.top-i.bottom),nt.select(".legendWrap").attr("transform","translate("+et/2+","+-i.top+")"));f.width(et).height(ft).interpolate("monotone").color(n.map(function(n,t){return n.color||u[t%u.length]}).filter(function(t,i){return!n[i].disabled&&n[i].yAxis==1&&n[i].type=="line"}));s.width(et).height(ft).interpolate("monotone").color(n.map(function(n,t){return n.color||u[t%u.length]}).filter(function(t,i){return!n[i].disabled&&n[i].yAxis==2&&n[i].type=="line"}));h.width(et).height(ft).color(n.map(function(n,t){return n.color||u[t%u.length]}).filter(function(t,i){return!n[i].disabled&&n[i].yAxis==1&&n[i].type=="bar"}));a.width(et).height(ft).color(n.map(function(n,t){return n.color||u[t%u.length]}).filter(function(t,i){return!n[i].disabled&&n[i].yAxis==2&&n[i].type=="bar"}));c.width(et).height(ft).color(n.map(function(n,t){return n.color||u[t%u.length]}).filter(function(t,i){return!n[i].disabled&&n[i].yAxis==1&&n[i].type=="area"}));l.width(et).height(ft).color(n.map(function(n,t){return n.color||u[t%u.length]}).filter(function(t,i){return!n[i].disabled&&n[i].yAxis==2&&n[i].type=="area"}));nt.attr("transform","translate("+i.left+","+i.top+")");var dt=nt.select(".lines1Wrap").datum(vt),gt=nt.select(".bars1Wrap").datum(pt),ni=nt.select(".stack1Wrap").datum(ht),ti=nt.select(".lines2Wrap").datum(yt),ii=nt.select(".bars2Wrap").datum(wt),ri=nt.select(".stack2Wrap").datum(ct),ui=ht.length?ht.map(function(n){return n.values}).reduce(function(n,t){return n.map(function(n,i){return{x:n.x,y:n.y+t[i].y}})}).concat([{x:0,y:0}]):[],fi=ct.length?ct.map(function(n){return n.values}).reduce(function(n,t){return n.map(function(n,i){return{x:n.x,y:n.y+t[i].y}})}).concat([{x:0,y:0}]):[];e.domain(it||d3.extent(d3.merge(bt).concat(ui),function(n){return n.y})).range([0,ft]);o.domain(rt||d3.extent(d3.merge(lt).concat(fi),function(n){return n.y})).range([0,ft]);f.yDomain(e.domain());h.yDomain(e.domain());c.yDomain(e.domain());s.yDomain(o.domain());a.yDomain(o.domain());l.yDomain(o.domain());ht.length&&d3.transition(ni).call(c);ct.length&&d3.transition(ri).call(l);pt.length&&d3.transition(gt).call(h);wt.length&&d3.transition(ii).call(a);vt.length&&d3.transition(dt).call(f);yt.length&&d3.transition(ti).call(s);w.ticks(et/100).tickSize(-ft,0);nt.select(".x.axis").attr("transform","translate(0,"+ft+")");d3.transition(nt.select(".x.axis")).call(w);b.ticks(ft/36).tickSize(-et,0);d3.transition(nt.select(".y1.axis")).call(b);k.ticks(ft/36).tickSize(-et,0);d3.transition(nt.select(".y2.axis")).call(k);nt.select(".y2.axis").style("opacity",lt.length?1:0).attr("transform","translate("+tt.range()[1]+",0)");v.dispatch.on("stateChange",function(){t.update()});r.on("tooltipShow",function(n){p&&ut(n,kt.parentNode)})}),t}var i={top:30,right:20,bottom:50,left:60},u=d3.scale.category20().range(),d=null,y=null,g=!0,p=!0,nt=function(n,t,i){return"<h3>"+n+"<\/h3><p>"+i+" at "+t+"<\/p>"},it,rt,tt=d3.scale.linear(),e=d3.scale.linear(),o=d3.scale.linear(),f=n.models.line().yScale(e),s=n.models.line().yScale(o),h=n.models.multiBar().stacked(!1).yScale(e),a=n.models.multiBar().stacked(!1).yScale(o),c=n.models.stackedArea().yScale(e),l=n.models.stackedArea().yScale(o),w=n.models.axis().scale(tt).orient("bottom").tickPadding(5),b=n.models.axis().scale(e).orient("left"),k=n.models.axis().scale(o).orient("right"),v=n.models.legend().height(30),r=d3.dispatch("tooltipShow","tooltipHide"),ut=function(i,r){var u=i.pos[0]+(r.offsetLeft||0),e=i.pos[1]+(r.offsetTop||0),o=w.tickFormat()(f.x()(i.point,i.pointIndex)),s=(i.series.yAxis==2?k:b).tickFormat()(f.y()(i.point,i.pointIndex)),h=nt(i.series.key,o,s,i,t);n.tooltip.show([u,e],h,undefined,undefined,r.offsetParent)};f.dispatch.on("elementMouseover.tooltip",function(n){n.pos=[n.pos[0]+i.left,n.pos[1]+i.top];r.tooltipShow(n)});f.dispatch.on("elementMouseout.tooltip",function(n){r.tooltipHide(n)});s.dispatch.on("elementMouseover.tooltip",function(n){n.pos=[n.pos[0]+i.left,n.pos[1]+i.top];r.tooltipShow(n)});s.dispatch.on("elementMouseout.tooltip",function(n){r.tooltipHide(n)});h.dispatch.on("elementMouseover.tooltip",function(n){n.pos=[n.pos[0]+i.left,n.pos[1]+i.top];r.tooltipShow(n)});h.dispatch.on("elementMouseout.tooltip",function(n){r.tooltipHide(n)});a.dispatch.on("elementMouseover.tooltip",function(n){n.pos=[n.pos[0]+i.left,n.pos[1]+i.top];r.tooltipShow(n)});a.dispatch.on("elementMouseout.tooltip",function(n){r.tooltipHide(n)});c.dispatch.on("tooltipShow",function(n){if(!Math.round(c.y()(n.point)*100))return setTimeout(function(){d3.selectAll(".point.hover").classed("hover",!1)},0),!1;n.pos=[n.pos[0]+i.left,n.pos[1]+i.top];r.tooltipShow(n)});c.dispatch.on("tooltipHide",function(n){r.tooltipHide(n)});l.dispatch.on("tooltipShow",function(n){if(!Math.round(l.y()(n.point)*100))return setTimeout(function(){d3.selectAll(".point.hover").classed("hover",!1)},0),!1;n.pos=[n.pos[0]+i.left,n.pos[1]+i.top];r.tooltipShow(n)});l.dispatch.on("tooltipHide",function(n){r.tooltipHide(n)});f.dispatch.on("elementMouseover.tooltip",function(n){n.pos=[n.pos[0]+i.left,n.pos[1]+i.top];r.tooltipShow(n)});f.dispatch.on("elementMouseout.tooltip",function(n){r.tooltipHide(n)});s.dispatch.on("elementMouseover.tooltip",function(n){n.pos=[n.pos[0]+i.left,n.pos[1]+i.top];r.tooltipShow(n)});s.dispatch.on("elementMouseout.tooltip",function(n){r.tooltipHide(n)});r.on("tooltipHide",function(){p&&n.tooltip.cleanup()});return t.dispatch=r,t.lines1=f,t.lines2=s,t.bars1=h,t.bars2=a,t.stack1=c,t.stack2=l,t.xAxis=w,t.yAxis1=b,t.yAxis2=k,t.options=n.utils.optionsFunc.bind(t),t.x=function(n){return arguments.length?(getX=n,f.x(n),h.x(n),t):getX},t.y=function(n){return arguments.length?(getY=n,f.y(n),h.y(n),t):getY},t.yDomain1=function(n){return arguments.length?(it=n,t):it},t.yDomain2=function(n){return arguments.length?(rt=n,t):rt},t.margin=function(n){return arguments.length?(i=n,t):i},t.width=function(n){return arguments.length?(d=n,t):d},t.height=function(n){return arguments.length?(y=n,t):y},t.color=function(n){return arguments.length?(u=n,v.color(n),t):u},t.showLegend=function(n){return arguments.length?(g=n,t):g},t.tooltips=function(n){return arguments.length?(p=n,t):p},t.tooltipContent=function(n){return arguments.length?(nt=n,t):nt},t};n.models.ohlcBar=function(){"use strict";function t(n){return n.each(function(n){var t=p-u.left-u.right,ut=w-u.top-u.bottom,et=d3.select(this),rt,ct;r.domain(g||d3.extent(n[0].values.map(e).concat(b)));k?r.range(y||[t*.5/n[0].values.length,t*(n[0].values.length-.5)/n[0].values.length]):r.range(y||[0,t]);i.domain(nt||[d3.min(n[0].values.map(c).concat(v)),d3.max(n[0].values.map(h).concat(v))]).range(tt||[ut,0]);r.domain()[0]===r.domain()[1]&&(r.domain()[0]?r.domain([r.domain()[0]-r.domain()[0]*.01,r.domain()[1]+r.domain()[1]*.01]):r.domain([-1,1]));i.domain()[0]===i.domain()[1]&&(i.domain()[0]?i.domain([i.domain()[0]+i.domain()[0]*.01,i.domain()[1]-i.domain()[1]*.01]):i.domain([-1,1]));var it=d3.select(this).selectAll("g.nv-wrap.nv-ohlcBar").data([n[0].values]),ft=it.enter().append("g").attr("class","nvd3 nv-wrap nv-ohlcBar"),ot=ft.append("defs"),st=ft.append("g"),ht=it.select("g");st.append("g").attr("class","nv-ticks");it.attr("transform","translate("+u.left+","+u.top+")");et.on("click",function(n,t){a.chartClick({data:n,index:t,pos:d3.event,id:f})});ot.append("clipPath").attr("id","nv-chart-clip-path-"+f).append("rect");it.select("#nv-chart-clip-path-"+f+" rect").attr("width",t).attr("height",ut);ht.attr("clip-path",d?"url(#nv-chart-clip-path-"+f+")":"");rt=it.select(".nv-ticks").selectAll(".nv-tick").data(function(n){return n});rt.exit().remove();ct=rt.enter().append("path").attr("class",function(n,t,i){return(o(n,t)>l(n,t)?"nv-tick negative":"nv-tick positive")+" nv-tick-"+i+"-"+t}).attr("d",function(r,u){var f=t/n[0].values.length*.9;return"m0,0l0,"+(i(o(r,u))-i(h(r,u)))+"l"+-f/2+",0l"+f/2+",0l0,"+(i(c(r,u))-i(o(r,u)))+"l0,"+(i(l(r,u))-i(c(r,u)))+"l"+f/2+",0l"+-f/2+",0z"}).attr("transform",function(n,t){return"translate("+r(e(n,t))+","+i(h(n,t))+")"}).on("mouseover",function(t,u){d3.select(this).classed("hover",!0);a.elementMouseover({point:t,series:n[0],pos:[r(e(t,u)),i(s(t,u))],pointIndex:u,seriesIndex:0,e:d3.event})}).on("mouseout",function(t,i){d3.select(this).classed("hover",!1);a.elementMouseout({point:t,series:n[0],pointIndex:i,seriesIndex:0,e:d3.event})}).on("click",function(n,t){a.elementClick({value:s(n,t),data:n,index:t,pos:[r(e(n,t)),i(s(n,t))],e:d3.event,id:f});d3.event.stopPropagation()}).on("dblclick",function(n,t){a.elementDblClick({value:s(n,t),data:n,index:t,pos:[r(e(n,t)),i(s(n,t))],e:d3.event,id:f});d3.event.stopPropagation()});rt.attr("class",function(n,t,i){return(o(n,t)>l(n,t)?"nv-tick negative":"nv-tick positive")+" nv-tick-"+i+"-"+t});d3.transition(rt).attr("transform",function(n,t){return"translate("+r(e(n,t))+","+i(h(n,t))+")"}).attr("d",function(r,u){var f=t/n[0].values.length*.9;return"m0,0l0,"+(i(o(r,u))-i(h(r,u)))+"l"+-f/2+",0l"+f/2+",0l0,"+(i(c(r,u))-i(o(r,u)))+"l0,"+(i(l(r,u))-i(c(r,u)))+"l"+f/2+",0l"+-f/2+",0z"})}),t}var u={top:0,right:0,bottom:0,left:0},p=960,w=500,f=Math.floor(Math.random()*1e4),r=d3.scale.linear(),i=d3.scale.linear(),e=function(n){return n.x},s=function(n){return n.y},o=function(n){return n.open},l=function(n){return n.close},h=function(n){return n.high},c=function(n){return n.low},b=[],v=[],k=!1,d=!0,it=n.utils.defaultColor(),g,nt,y,tt,a=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout");return t.dispatch=a,t.options=n.utils.optionsFunc.bind(t),t.x=function(n){return arguments.length?(e=n,t):e},t.y=function(n){return arguments.length?(s=n,t):s},t.open=function(n){return arguments.length?(o=n,t):o},t.close=function(n){return arguments.length?(l=n,t):l},t.high=function(n){return arguments.length?(h=n,t):h},t.low=function(n){return arguments.length?(c=n,t):c},t.margin=function(n){return arguments.length?(u.top=typeof n.top!="undefined"?n.top:u.top,u.right=typeof n.right!="undefined"?n.right:u.right,u.bottom=typeof n.bottom!="undefined"?n.bottom:u.bottom,u.left=typeof n.left!="undefined"?n.left:u.left,t):u},t.width=function(n){return arguments.length?(p=n,t):p},t.height=function(n){return arguments.length?(w=n,t):w},t.xScale=function(n){return arguments.length?(r=n,t):r},t.yScale=function(n){return arguments.length?(i=n,t):i},t.xDomain=function(n){return arguments.length?(g=n,t):g},t.yDomain=function(n){return arguments.length?(nt=n,t):nt},t.xRange=function(n){return arguments.length?(y=n,t):y},t.yRange=function(n){return arguments.length?(tt=n,t):tt},t.forceX=function(n){return arguments.length?(b=n,t):b},t.forceY=function(n){return arguments.length?(v=n,t):v},t.padData=function(n){return arguments.length?(k=n,t):k},t.clipEdge=function(n){return arguments.length?(d=n,t):d},t.color=function(i){return arguments.length?(it=n.utils.getColor(i),t):it},t.id=function(n){return arguments.length?(f=n,t):f},t};n.models.pie=function(){"use strict";function t(n){return n.each(function(n){function dt(n){n.endAngle=isNaN(n.endAngle)?0:n.endAngle;n.startAngle=isNaN(n.startAngle)?0:n.startAngle;c||(n.innerRadius=0);var i=d3.interpolate(this._current,n);return this._current=i(0),function(n){return t(i(n))}}var et=v-i.left-i.right,ot=y-i.top-i.bottom,nt=Math.min(et,ot)/2,it=nt-nt/5,ht=d3.select(this),rt=ht.selectAll(".nv-wrap.nv-pie").data(n),bt=rt.enter().append("g").attr("class","nvd3 nv-wrap nv-pie nv-chart-"+u),ct=bt.append("g"),lt=rt.select("g"),t,vt,kt,tt;ct.append("g").attr("class","nv-pie");ct.append("g").attr("class","nv-pieLabels");rt.attr("transform","translate("+i.left+","+i.top+")");lt.select(".nv-pie").attr("transform","translate("+et/2+","+ot/2+")");lt.select(".nv-pieLabels").attr("transform","translate("+et/2+","+ot/2+")");ht.on("click",function(n,t){o.chartClick({data:n,index:t,pos:d3.event,id:u})});t=d3.svg.arc().outerRadius(it);l&&t.startAngle(l);a&&t.endAngle(a);c&&t.innerRadius(nt*g);var at=d3.layout.pie().sort(null).value(function(n){return n.disabled?0:r(n)}),ut=rt.select(".nv-pie").selectAll(".nv-slice").data(at),ft=rt.select(".nv-pieLabels").selectAll(".nv-label").data(at);if(ut.exit().remove(),ft.exit().remove(),vt=ut.enter().append("g").attr("class","nv-slice").on("mouseover",function(n,t){d3.select(this).classed("hover",!0);o.elementMouseover({label:f(n.data),value:r(n.data),point:n.data,pointIndex:t,pos:[d3.event.pageX,d3.event.pageY],id:u})}).on("mouseout",function(n,t){d3.select(this).classed("hover",!1);o.elementMouseout({label:f(n.data),value:r(n.data),point:n.data,index:t,id:u})}).on("click",function(n,t){o.elementClick({label:f(n.data),value:r(n.data),point:n.data,index:t,pos:d3.event,id:u});d3.event.stopPropagation()}).on("dblclick",function(n,t){o.elementDblClick({label:f(n.data),value:r(n.data),point:n.data,index:t,pos:d3.event,id:u});d3.event.stopPropagation()}),ut.attr("fill",function(n,t){return h(n,t)}).attr("stroke",function(n,t){return h(n,t)}),kt=vt.append("path").each(function(n){this._current=n}),ut.select("path").transition().attr("d",t).attrTween("d",dt),p){tt=d3.svg.arc().innerRadius(0);w&&(tt=t);b&&(tt=d3.svg.arc().outerRadius(t.outerRadius()));ft.enter().append("g").classed("nv-label",!0).each(function(n){var t=d3.select(this);t.attr("transform",function(n){if(e){n.outerRadius=it+10;n.innerRadius=it+15;var t=(n.startAngle+n.endAngle)/2*(180/Math.PI);return(n.startAngle+n.endAngle)/2<Math.PI?t-=90:t+=90,"translate("+tt.centroid(n)+") rotate("+t+")"}return n.outerRadius=nt+10,n.innerRadius=nt+15,"translate("+tt.centroid(n)+")"});t.append("rect").style("stroke","#fff").style("fill","#fff").attr("rx",3).attr("ry",3);t.append("text").style("text-anchor",e?(n.startAngle+n.endAngle)/2<Math.PI?"start":"end":"middle").style("fill","#000")});var yt={},st=14,pt=140,wt=function(n){return Math.floor(n[0]/pt)*pt+","+Math.floor(n[1]/st)*st};ft.transition().attr("transform",function(n){var i,t,r;return e?(n.outerRadius=it+10,n.innerRadius=it+15,i=(n.startAngle+n.endAngle)/2*(180/Math.PI),(n.startAngle+n.endAngle)/2<Math.PI?i-=90:i+=90,"translate("+tt.centroid(n)+") rotate("+i+")"):(n.outerRadius=nt+10,n.innerRadius=nt+15,t=tt.centroid(n),r=wt(t),yt[r]&&(t[1]-=st),yt[wt(t)]=!0,"translate("+t+")")});ft.select(".nv-label text").style("text-anchor",e?(d.startAngle+d.endAngle)/2<Math.PI?"start":"end":"middle").text(function(n){var t=(n.endAngle-n.startAngle)/(2*Math.PI),i={key:f(n.data),value:r(n.data),percent:d3.format("%")(t)};return n.value&&t>k?i[s]:""})}}),t}var i={top:0,right:0,bottom:0,left:0},v=500,y=500,f=function(n){return n.x},r=function(n){return n.y},nt=function(n){return n.description},u=Math.floor(Math.random()*1e4),h=n.utils.defaultColor(),tt=d3.format(",.2f"),p=!0,w=!0,b=!1,s="key",k=.02,c=!1,e=!1,l=!1,a=!1,g=.5,o=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout");return t.dispatch=o,t.options=n.utils.optionsFunc.bind(t),t.margin=function(n){return arguments.length?(i.top=typeof n.top!="undefined"?n.top:i.top,i.right=typeof n.right!="undefined"?n.right:i.right,i.bottom=typeof n.bottom!="undefined"?n.bottom:i.bottom,i.left=typeof n.left!="undefined"?n.left:i.left,t):i},t.width=function(n){return arguments.length?(v=n,t):v},t.height=function(n){return arguments.length?(y=n,t):y},t.values=function(){return n.log("pie.values() is no longer supported."),t},t.x=function(n){return arguments.length?(f=n,t):f},t.y=function(n){return arguments.length?(r=d3.functor(n),t):r},t.description=function(n){return arguments.length?(nt=n,t):nt},t.showLabels=function(n){return arguments.length?(p=n,t):p},t.labelSunbeamLayout=function(n){return arguments.length?(e=n,t):e},t.donutLabelsOutside=function(n){return arguments.length?(b=n,t):b},t.pieLabelsOutside=function(n){return arguments.length?(w=n,t):w},t.labelType=function(n){return arguments.length?(s=n,s=s||"key",t):s},t.donut=function(n){return arguments.length?(c=n,t):c},t.donutRatio=function(n){return arguments.length?(g=n,t):g},t.startAngle=function(n){return arguments.length?(l=n,t):l},t.endAngle=function(n){return arguments.length?(a=n,t):a},t.id=function(n){return arguments.length?(u=n,t):u},t.color=function(i){return arguments.length?(h=n.utils.getColor(i),t):h},t.valueFormat=function(n){return arguments.length?(tt=n,t):tt},t.labelThreshold=function(n){return arguments.length?(k=n,t):k},t};n.models.pieChart=function(){"use strict";function t(n){return n.each(function(n){var h=d3.select(this),nt=this,p=(l||parseInt(h.style("width"))||960)-i.left-i.right,w=(s||parseInt(h.style("height"))||400)-i.top-i.bottom,c,b,d;if(t.update=function(){h.transition().call(t)},t.container=this,u.disabled=n.map(function(n){return!!n.disabled}),!o){o={};for(c in u)o[c]=u[c]instanceof Array?u[c].slice(0):u[c]}if(n&&n.length)h.selectAll(".nv-noData").remove();else return b=h.selectAll(".nv-noData").data([y]),b.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),b.attr("x",i.left+p/2).attr("y",i.top+w/2).text(function(n){return n}),t;var v=h.selectAll("g.nv-wrap.nv-pieChart").data([n]),k=v.enter().append("g").attr("class","nvd3 nv-wrap nv-pieChart").append("g"),g=v.select("g");k.append("g").attr("class","nv-pieWrap");k.append("g").attr("class","nv-legendWrap");a&&(f.width(p).key(r.x()),v.select(".nv-legendWrap").datum(n).call(f),i.top!=f.height()&&(i.top=f.height(),w=(s||parseInt(h.style("height"))||400)-i.top-i.bottom),v.select(".nv-legendWrap").attr("transform","translate(0,"+-i.top+")"));v.attr("transform","translate("+i.left+","+i.top+")");r.width(p).height(w);d=g.select(".nv-pieWrap").datum([n]);d3.transition(d).call(r);f.dispatch.on("stateChange",function(n){u=n;e.stateChange(u);t.update()});r.dispatch.on("elementMouseout.tooltip",function(n){e.tooltipHide(n)});e.on("changeState",function(i){typeof i.disabled!="undefined"&&(n.forEach(function(n,t){n.disabled=i.disabled[t]}),u.disabled=i.disabled);t.update()})}),t}var r=n.models.pie(),f=n.models.legend(),i={top:30,right:20,bottom:20,left:20},l=null,s=null,a=!0,h=n.utils.defaultColor(),c=!0,v=function(n,t){return"<h3>"+n+"<\/h3><p>"+t+"<\/p>"},u={},o=null,y="No Data Available.",e=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState"),p=function(i,u){var f=r.description()(i.point)||r.x()(i.point),e=i.pos[0]+(u&&u.offsetLeft||0),o=i.pos[1]+(u&&u.offsetTop||0),s=r.valueFormat()(r.y()(i.point)),h=v(f,s,i,t);n.tooltip.show([e,o],h,i.value<0?"n":"s",null,u)};r.dispatch.on("elementMouseover.tooltip",function(n){n.pos=[n.pos[0]+i.left,n.pos[1]+i.top];e.tooltipShow(n)});e.on("tooltipShow",function(n){c&&p(n)});e.on("tooltipHide",function(){c&&n.tooltip.cleanup()});return t.legend=f,t.dispatch=e,t.pie=r,d3.rebind(t,r,"valueFormat","values","x","y","description","id","showLabels","donutLabelsOutside","pieLabelsOutside","labelType","donut","donutRatio","labelThreshold"),t.options=n.utils.optionsFunc.bind(t),t.margin=function(n){return arguments.length?(i.top=typeof n.top!="undefined"?n.top:i.top,i.right=typeof n.right!="undefined"?n.right:i.right,i.bottom=typeof n.bottom!="undefined"?n.bottom:i.bottom,i.left=typeof n.left!="undefined"?n.left:i.left,t):i},t.width=function(n){return arguments.length?(l=n,t):l},t.height=function(n){return arguments.length?(s=n,t):s},t.color=function(i){return arguments.length?(h=n.utils.getColor(i),f.color(h),r.color(h),t):h},t.showLegend=function(n){return arguments.length?(a=n,t):a},t.tooltips=function(n){return arguments.length?(c=n,t):c},t.tooltipContent=function(n){return arguments.length?(v=n,t):v},t.state=function(n){return arguments.length?(u=n,t):u},t.defaultState=function(n){return arguments.length?(o=n,t):o},t.noData=function(n){return arguments.length?(y=n,t):y},t};n.models.scatter=function(){"use strict";function t(dt){return dt.each(function(t){function hi(){var n,w,s,p;if(!y)return!1;if(n=d3.merge(t.map(function(n,t){return n.values.map(function(n,u){var o=f(n,u),s=e(n,u);return[i(o)+Math.random()*1e-7,r(s)+Math.random()*1e-7,t,u,n]}).filter(function(n,t){return lt(n[4],t)})})),ft===!0){g&&(w=dt.select("defs").selectAll(".nv-point-clips").data([o]).enter(),w.append("clipPath").attr("class","nv-point-clips").attr("id","nv-points-clip-"+o),s=dt.select("#nv-points-clip-"+o).selectAll("circle").data(n),s.enter().append("circle").attr("r",yt),s.exit().remove(),s.attr("cx",function(n){return n[0]}).attr("cy",function(n){return n[1]}),dt.select(".nv-point-paths").attr("clip-path","url(#nv-points-clip-"+o+")"));n.length&&(n.push([i.range()[0]-20,r.range()[0]-20,null,null]),n.push([i.range()[1]+20,r.range()[1]+20,null,null]),n.push([i.range()[0]-20,r.range()[0]+20,null,null]),n.push([i.range()[1]+20,r.range()[1]-20,null,null]));var b=d3.geom.polygon([[-10,-10],[-10,v+10],[a+10,v+10],[a+10,-10]]),k=d3.geom.voronoi(n).map(function(t,i){return{data:b.clip(t),series:n[i][2],point:n[i][3]}}),c=dt.select(".nv-point-paths").selectAll("path").data(k);c.enter().append("path").attr("class",function(n,t){return"nv-path-"+t});c.exit().remove();c.attr("d",function(n){return n.data.length===0?"M 0 0":"M"+n.data.join("L")+"Z"});p=function(n,o){var s,h;if(l)return 0;(s=t[n.series],typeof s!="undefined")&&(h=s.values[n.point],o({point:h,series:s,pos:[i(f(h,n.point))+u.left,r(e(h,n.point))+u.top],seriesIndex:n.series,pointIndex:n.point}))};c.on("click",function(n){p(n,h.elementClick)}).on("mouseover",function(n){p(n,h.elementMouseover)}).on("mouseout",function(n){p(n,h.elementMouseout)})}else dt.select(".nv-groups").selectAll(".nv-group").selectAll(".nv-point").on("click",function(n,o){if(l||!t[n.series])return 0;var c=t[n.series],s=c.values[o];h.elementClick({point:s,series:c,pos:[i(f(s,o))+u.left,r(e(s,o))+u.top],seriesIndex:n.series,pointIndex:o})}).on("mouseover",function(n,o){if(l||!t[n.series])return 0;var c=t[n.series],s=c.values[o];h.elementMouseover({point:s,series:c,pos:[i(f(s,o))+u.left,r(e(s,o))+u.top],seriesIndex:n.series,pointIndex:o})}).on("mouseout",function(n,i){if(l||!t[n.series])return 0;var r=t[n.series],u=r.values[i];h.elementMouseout({point:u,series:r,seriesIndex:n.series,pointIndex:i})});l=!1}var ti=a-u.left-u.right,ri=v-u.top-u.bottom,ei=d3.select(this),ii,ni,gt;t.forEach(function(n,t){n.values.forEach(function(n){n.series=t})});ii=nt&&tt&&rt?[]:d3.merge(t.map(function(n){return n.values.map(function(n,t){return{x:f(n,t),y:e(n,t),size:c(n,t)}})}));i.domain(nt||d3.extent(ii.map(function(n){return n.x}).concat(ot)));at&&t[0]?i.range(it||[(ti*d+ti)/(2*t[0].values.length),ti-ti*(1+d)/(2*t[0].values.length)]):i.range(it||[0,ti]);r.domain(tt||d3.extent(ii.map(function(n){return n.y}).concat(st))).range(pt||[ri,0]);s.domain(rt||d3.extent(ii.map(function(n){return n.size}).concat(ht))).range(wt||[16,256]);(i.domain()[0]===i.domain()[1]||r.domain()[0]===r.domain()[1])&&(ut=!0);i.domain()[0]===i.domain()[1]&&(i.domain()[0]?i.domain([i.domain()[0]-i.domain()[0]*.01,i.domain()[1]+i.domain()[1]*.01]):i.domain([-1,1]));r.domain()[0]===r.domain()[1]&&(r.domain()[0]?r.domain([r.domain()[0]-r.domain()[0]*.01,r.domain()[1]+r.domain()[1]*.01]):r.domain([-1,1]));isNaN(i.domain()[0])&&i.domain([-1,1]);isNaN(r.domain()[0])&&r.domain([-1,1]);p=p||i;w=w||r;bt=bt||s;var dt=ei.selectAll("g.nv-wrap.nv-scatter").data([t]),ui=dt.enter().append("g").attr("class","nvd3 nv-wrap nv-scatter nv-chart-"+o+(ut?" nv-single-point":"")),oi=ui.append("defs"),fi=ui.append("g"),si=dt.select("g");fi.append("g").attr("class","nv-groups");fi.append("g").attr("class","nv-point-paths");dt.attr("transform","translate("+u.left+","+u.top+")");oi.append("clipPath").attr("id","nv-edge-clip-"+o).append("rect");dt.select("#nv-edge-clip-"+o+" rect").attr("width",ti).attr("height",ri>0?ri:0);si.attr("clip-path",vt?"url(#nv-edge-clip-"+o+")":"");l=!0;ni=dt.select(".nv-groups").selectAll(".nv-group").data(function(n){return n},function(n){return n.key});ni.enter().append("g").style("stroke-opacity",1e-6).style("fill-opacity",1e-6);ni.exit().remove();ni.attr("class",function(n,t){return"nv-group nv-series-"+t}).classed("hover",function(n){return n.hover});ni.transition().style("fill",function(n,t){return b(n,t)}).style("stroke",function(n,t){return b(n,t)}).style("stroke-opacity",1).style("fill-opacity",.5);et?(gt=ni.selectAll("circle.nv-point").data(function(n){return n.values},ct),gt.enter().append("circle").style("fill",function(n){return n.color}).style("stroke",function(n){return n.color}).attr("cx",function(t,i){return n.utils.NaNtoZero(p(f(t,i)))}).attr("cy",function(t,i){return n.utils.NaNtoZero(w(e(t,i)))}).attr("r",function(n,t){return Math.sqrt(s(c(n,t))/Math.PI)}),gt.exit().remove(),ni.exit().selectAll("path.nv-point").transition().attr("cx",function(t,r){return n.utils.NaNtoZero(i(f(t,r)))}).attr("cy",function(t,i){return n.utils.NaNtoZero(r(e(t,i)))}).remove(),gt.each(function(n,t){d3.select(this).classed("nv-point",!0).classed("nv-point-"+t,!0).classed("hover",!1)}),gt.transition().attr("cx",function(t,r){return n.utils.NaNtoZero(i(f(t,r)))}).attr("cy",function(t,i){return n.utils.NaNtoZero(r(e(t,i)))}).attr("r",function(n,t){return Math.sqrt(s(c(n,t))/Math.PI)})):(gt=ni.selectAll("path.nv-point").data(function(n){return n.values}),gt.enter().append("path").style("fill",function(n){return n.color}).style("stroke",function(n){return n.color}).attr("transform",function(n,t){return"translate("+p(f(n,t))+","+w(e(n,t))+")"}).attr("d",d3.svg.symbol().type(k).size(function(n,t){return s(c(n,t))})),gt.exit().remove(),ni.exit().selectAll("path.nv-point").transition().attr("transform",function(n,t){return"translate("+i(f(n,t))+","+r(e(n,t))+")"}).remove(),gt.each(function(n,t){d3.select(this).classed("nv-point",!0).classed("nv-point-"+t,!0).classed("hover",!1)}),gt.transition().attr("transform",function(n,t){return"translate("+i(f(n,t))+","+r(e(n,t))+")"}).attr("d",d3.svg.symbol().type(k).size(function(n,t){return s(c(n,t))})));clearTimeout(kt);kt=setTimeout(hi,300);p=i.copy();w=r.copy();bt=s.copy()}),t}var u={top:0,right:0,bottom:0,left:0},a=960,v=500,b=n.utils.defaultColor(),o=Math.floor(Math.random()*1e5),i=d3.scale.linear(),r=d3.scale.linear(),s=d3.scale.linear(),f=function(n){return n.x},e=function(n){return n.y},c=function(n){return n.size||1},k=function(n){return n.shape||"circle"},et=!0,ot=[],st=[],ht=[],y=!0,ct=null,lt=function(n){return!n.notActive},at=!1,d=.1,vt=!1,g=!0,yt=function(){return 25},nt=null,tt=null,it=null,pt=null,rt=null,wt=null,ut=!1,h=d3.dispatch("elementClick","elementMouseover","elementMouseout"),ft=!0,p,w,bt,kt,l=!1;t.clearHighlights=function(){d3.selectAll(".nv-chart-"+o+" .nv-point.hover").classed("hover",!1)};t.highlightPoint=function(n,t,i){d3.select(".nv-chart-"+o+" .nv-series-"+n+" .nv-point-"+t).classed("hover",i)};h.on("elementMouseover.point",function(n){y&&t.highlightPoint(n.seriesIndex,n.pointIndex,!0)});h.on("elementMouseout.point",function(n){y&&t.highlightPoint(n.seriesIndex,n.pointIndex,!1)});return t.dispatch=h,t.options=n.utils.optionsFunc.bind(t),t.x=function(n){return arguments.length?(f=d3.functor(n),t):f},t.y=function(n){return arguments.length?(e=d3.functor(n),t):e},t.size=function(n){return arguments.length?(c=d3.functor(n),t):c},t.margin=function(n){return arguments.length?(u.top=typeof n.top!="undefined"?n.top:u.top,u.right=typeof n.right!="undefined"?n.right:u.right,u.bottom=typeof n.bottom!="undefined"?n.bottom:u.bottom,u.left=typeof n.left!="undefined"?n.left:u.left,t):u},t.width=function(n){return arguments.length?(a=n,t):a},t.height=function(n){return arguments.length?(v=n,t):v},t.xScale=function(n){return arguments.length?(i=n,t):i},t.yScale=function(n){return arguments.length?(r=n,t):r},t.zScale=function(n){return arguments.length?(s=n,t):s},t.xDomain=function(n){return arguments.length?(nt=n,t):nt},t.yDomain=function(n){return arguments.length?(tt=n,t):tt},t.sizeDomain=function(n){return arguments.length?(rt=n,t):rt},t.xRange=function(n){return arguments.length?(it=n,t):it},t.yRange=function(n){return arguments.length?(pt=n,t):pt},t.sizeRange=function(n){return arguments.length?(wt=n,t):wt},t.forceX=function(n){return arguments.length?(ot=n,t):ot},t.forceY=function(n){return arguments.length?(st=n,t):st},t.forceSize=function(n){return arguments.length?(ht=n,t):ht},t.interactive=function(n){return arguments.length?(y=n,t):y},t.pointKey=function(n){return arguments.length?(ct=n,t):ct},t.pointActive=function(n){return arguments.length?(lt=n,t):lt},t.padData=function(n){return arguments.length?(at=n,t):at},t.padDataOuter=function(n){return arguments.length?(d=n,t):d},t.clipEdge=function(n){return arguments.length?(vt=n,t):vt},t.clipVoronoi=function(n){return arguments.length?(g=n,t):g},t.useVoronoi=function(n){return arguments.length?(ft=n,ft===!1&&(g=!1),t):ft},t.clipRadius=function(n){return arguments.length?(yt=n,t):yt},t.color=function(i){return arguments.length?(b=n.utils.getColor(i),t):b},t.shape=function(n){return arguments.length?(k=n,t):k},t.onlyCircles=function(n){return arguments.length?(et=n,t):et},t.id=function(n){return arguments.length?(o=n,t):o},t.singlePoint=function(n){return arguments.length?(ut=n,t):ut},t};n.models.scatterChart=function(){"use strict";function t(n){return n.each(function(n){function oi(){if(b)return ft.select(".nv-point-paths").style("pointer-events","all"),!1;ft.select(".nv-point-paths").style("pointer-events","none");var t=d3.mouse(this);f.distortion(p).focus(t[0]);u.distortion(p).focus(t[1]);ft.select(".nv-scatterWrap").call(r);tt&&ft.select(".nv-x.nv-axis").call(o);it&&ft.select(".nv-y.nv-axis").call(e);ft.select(".nv-distributionX").datum(n.filter(function(n){return!n.disabled})).call(a);ft.select(".nv-distributionY").datum(n.filter(function(n){return!n.disabled})).call(h)}var dt=d3.select(this),fi=this,et=(st||parseInt(dt.style("width"))||960)-i.left-i.right,kt=(nt||parseInt(dt.style("height"))||400)-i.top-i.bottom,ni,ti,ii,ri,ui;if(t.update=function(){dt.transition().duration(vt).call(t)},t.container=this,s.disabled=n.map(function(n){return!!n.disabled}),!k){k={};for(ni in s)k[ni]=s[ni]instanceof Array?s[ni].slice(0):s[ni]}if(n&&n.length&&n.filter(function(n){return n.values.length}).length)dt.selectAll(".nv-noData").remove();else return ti=dt.selectAll(".nv-noData").data([at]),ti.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),ti.attr("x",i.left+et/2).attr("y",i.top+kt/2).text(function(n){return n}),t;yt=yt||f;pt=pt||u;var gt=dt.selectAll("g.nv-wrap.nv-scatterChart").data([n]),ei=gt.enter().append("g").attr("class","nvd3 nv-wrap nv-scatterChart nv-chart-"+r.id()),ot=ei.append("g"),ft=gt.select("g");if(ot.append("rect").attr("class","nvd3 nv-background"),ot.append("g").attr("class","nv-x nv-axis"),ot.append("g").attr("class","nv-y nv-axis"),ot.append("g").attr("class","nv-scatterWrap"),ot.append("g").attr("class","nv-distWrap"),ot.append("g").attr("class","nv-legendWrap"),ot.append("g").attr("class","nv-controlsWrap"),lt&&(ii=rt?et/2:et,l.width(ii),gt.select(".nv-legendWrap").datum(n).call(l),i.top!=l.height()&&(i.top=l.height(),kt=(nt||parseInt(dt.style("height"))||400)-i.top-i.bottom),gt.select(".nv-legendWrap").attr("transform","translate("+(et-ii)+","+-i.top+")")),rt&&(d.width(180).color(["#444"]),ft.select(".nv-controlsWrap").datum(bt).attr("transform","translate(0,"+-i.top+")").call(d)),gt.attr("transform","translate("+i.left+","+i.top+")"),g&&ft.select(".nv-y.nv-axis").attr("transform","translate("+et+",0)"),r.width(et).height(kt).color(n.map(function(n,t){return n.color||c(n,t)}).filter(function(t,i){return!n[i].disabled})),v!==0&&r.xDomain(null),y!==0&&r.yDomain(null),gt.select(".nv-scatterWrap").datum(n.filter(function(n){return!n.disabled})).call(r),v!==0&&(ri=f.domain()[1]-f.domain()[0],r.xDomain([f.domain()[0]-v*ri,f.domain()[1]+v*ri])),y!==0&&(ui=u.domain()[1]-u.domain()[0],r.yDomain([u.domain()[0]-y*ui,u.domain()[1]+y*ui])),(y!==0||v!==0)&&gt.select(".nv-scatterWrap").datum(n.filter(function(n){return!n.disabled})).call(r),tt&&(o.scale(f).ticks(o.ticks()&&o.ticks().length?o.ticks():et/100).tickSize(-kt,0),ft.select(".nv-x.nv-axis").attr("transform","translate(0,"+u.range()[0]+")").call(o)),it&&(e.scale(u).ticks(e.ticks()&&e.ticks().length?e.ticks():kt/36).tickSize(-et,0),ft.select(".nv-y.nv-axis").call(e)),ht&&(a.getData(r.x()).scale(f).width(et).color(n.map(function(n,t){return n.color||c(n,t)}).filter(function(t,i){return!n[i].disabled})),ot.select(".nv-distWrap").append("g").attr("class","nv-distributionX"),ft.select(".nv-distributionX").attr("transform","translate(0,"+u.range()[0]+")").datum(n.filter(function(n){return!n.disabled})).call(a)),ct&&(h.getData(r.y()).scale(u).width(kt).color(n.map(function(n,t){return n.color||c(n,t)}).filter(function(t,i){return!n[i].disabled})),ot.select(".nv-distWrap").append("g").attr("class","nv-distributionY"),ft.select(".nv-distributionY").attr("transform","translate("+(g?et:-h.size())+",0)").datum(n.filter(function(n){return!n.disabled})).call(h)),d3.fisheye){ft.select(".nv-background").attr("width",et).attr("height",kt);ft.select(".nv-background").on("mousemove",oi);ft.select(".nv-background").on("click",function(){b=!b});r.dispatch.on("elementClick.freezeFisheye",function(){b=!b})}d.dispatch.on("legendClick",function(n){n.disabled=!n.disabled;p=n.disabled?0:2.5;ft.select(".nv-background").style("pointer-events",n.disabled?"none":"all");ft.select(".nv-point-paths").style("pointer-events",n.disabled?"all":"none");n.disabled?(f.distortion(p).focus(0),u.distortion(p).focus(0),ft.select(".nv-scatterWrap").call(r),ft.select(".nv-x.nv-axis").call(o),ft.select(".nv-y.nv-axis").call(e)):b=!1;t.update()});l.dispatch.on("stateChange",function(n){s.disabled=n.disabled;w.stateChange(s);t.update()});r.dispatch.on("elementMouseover.tooltip",function(n){d3.select(".nv-chart-"+r.id()+" .nv-series-"+n.seriesIndex+" .nv-distx-"+n.pointIndex).attr("y1",function(){return n.pos[1]-kt});d3.select(".nv-chart-"+r.id()+" .nv-series-"+n.seriesIndex+" .nv-disty-"+n.pointIndex).attr("x2",n.pos[0]+a.size());n.pos=[n.pos[0]+i.left,n.pos[1]+i.top];w.tooltipShow(n)});w.on("tooltipShow",function(n){ut&&wt(n,fi.parentNode)});w.on("changeState",function(i){typeof i.disabled!="undefined"&&(n.forEach(function(n,t){n.disabled=i.disabled[t]}),s.disabled=i.disabled);t.update()});yt=f.copy();pt=u.copy()}),t}var r=n.models.scatter(),o=n.models.axis(),e=n.models.axis(),l=n.models.legend(),d=n.models.legend(),a=n.models.distribution(),h=n.models.distribution(),i={top:30,right:20,bottom:50,left:75},st=null,nt=null,c=n.utils.defaultColor(),f=d3.fisheye?d3.fisheye.scale(d3.scale.linear).distortion(0):r.xScale(),u=d3.fisheye?d3.fisheye.scale(d3.scale.linear).distortion(0):r.yScale(),v=0,y=0,ht=!1,ct=!1,lt=!0,tt=!0,it=!0,g=!1,rt=!!d3.fisheye,p=0,b=!1,ut=!0,ft=function(n,t){return"<strong>"+t+"<\/strong>"},et=function(n,t,i){return"<strong>"+i+"<\/strong>"},ot=null,s={},k=null,w=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState"),at="No Data Available.",vt=250,yt,pt,wt,bt;r.xScale(f).yScale(u);o.orient("bottom").tickPadding(10);e.orient(g?"right":"left").tickPadding(10);a.axis("x");h.axis("y");d.updateState(!1);wt=function(s,h){var a=s.pos[0]+(h.offsetLeft||0),v=s.pos[1]+(h.offsetTop||0),y=s.pos[0]+(h.offsetLeft||0),p=u.range()[0]+i.top+(h.offsetTop||0),w=f.range()[0]+i.left+(h.offsetLeft||0),b=s.pos[1]+(h.offsetTop||0),c=o.tickFormat()(r.x()(s.point,s.pointIndex)),l=e.tickFormat()(r.y()(s.point,s.pointIndex));ft!=null&&n.tooltip.show([y,p],ft(s.series.key,c,l,s,t),"n",1,h,"x-nvtooltip");et!=null&&n.tooltip.show([w,b],et(s.series.key,c,l,s,t),"e",1,h,"y-nvtooltip");ot!=null&&n.tooltip.show([a,v],ot(s.series.key,c,l,s,t),s.value<0?"n":"s",null,h)};bt=[{key:"Magnify",disabled:!0}];r.dispatch.on("elementMouseout.tooltip",function(n){w.tooltipHide(n);d3.select(".nv-chart-"+r.id()+" .nv-series-"+n.seriesIndex+" .nv-distx-"+n.pointIndex).attr("y1",0);d3.select(".nv-chart-"+r.id()+" .nv-series-"+n.seriesIndex+" .nv-disty-"+n.pointIndex).attr("x2",h.size())});w.on("tooltipHide",function(){ut&&n.tooltip.cleanup()});return t.dispatch=w,t.scatter=r,t.legend=l,t.controls=d,t.xAxis=o,t.yAxis=e,t.distX=a,t.distY=h,d3.rebind(t,r,"id","interactive","pointActive","x","y","shape","size","xScale","yScale","zScale","xDomain","yDomain","xRange","yRange","sizeDomain","sizeRange","forceX","forceY","forceSize","clipVoronoi","clipRadius","useVoronoi"),t.options=n.utils.optionsFunc.bind(t),t.margin=function(n){return arguments.length?(i.top=typeof n.top!="undefined"?n.top:i.top,i.right=typeof n.right!="undefined"?n.right:i.right,i.bottom=typeof n.bottom!="undefined"?n.bottom:i.bottom,i.left=typeof n.left!="undefined"?n.left:i.left,t):i},t.width=function(n){return arguments.length?(st=n,t):st},t.height=function(n){return arguments.length?(nt=n,t):nt},t.color=function(i){return arguments.length?(c=n.utils.getColor(i),l.color(c),a.color(c),h.color(c),t):c},t.showDistX=function(n){return arguments.length?(ht=n,t):ht},t.showDistY=function(n){return arguments.length?(ct=n,t):ct},t.showControls=function(n){return arguments.length?(rt=n,t):rt},t.showLegend=function(n){return arguments.length?(lt=n,t):lt},t.showXAxis=function(n){return arguments.length?(tt=n,t):tt},t.showYAxis=function(n){return arguments.length?(it=n,t):it},t.rightAlignYAxis=function(n){return arguments.length?(g=n,e.orient(n?"right":"left"),t):g},t.fisheye=function(n){return arguments.length?(p=n,t):p},t.xPadding=function(n){return arguments.length?(v=n,t):v},t.yPadding=function(n){return arguments.length?(y=n,t):y},t.tooltips=function(n){return arguments.length?(ut=n,t):ut},t.tooltipContent=function(n){return arguments.length?(ot=n,t):ot},t.tooltipXContent=function(n){return arguments.length?(ft=n,t):ft},t.tooltipYContent=function(n){return arguments.length?(et=n,t):et},t.state=function(n){return arguments.length?(s=n,t):s},t.defaultState=function(n){return arguments.length?(k=n,t):k},t.noData=function(n){return arguments.length?(at=n,t):at},t.transitionDuration=function(n){return arguments.length?(vt=n,t):vt},t};n.models.scatterPlusLineChart=function(){"use strict";function t(n){return n.each(function(n){function fi(){if(p)return it.select(".nv-point-paths").style("pointer-events","all"),!1;it.select(".nv-point-paths").style("pointer-events","none");var t=d3.mouse(this);u.distortion(v).focus(t[0]);f.distortion(v).focus(t[1]);it.select(".nv-scatterWrap").datum(n.filter(function(n){return!n.disabled})).call(r);g&&it.select(".nv-x.nv-axis").call(s);nt&&it.select(".nv-y.nv-axis").call(e);it.select(".nv-distributionX").datum(n.filter(function(n){return!n.disabled})).call(a);it.select(".nv-distributionY").datum(n.filter(function(n){return!n.disabled})).call(c)}var kt=d3.select(this),ii=this,rt=(ft||parseInt(kt.style("width"))||960)-i.left-i.right,wt=(d||parseInt(kt.style("height"))||400)-i.top-i.bottom,dt,gt,ni,ti,ui;if(t.update=function(){kt.transition().duration(lt).call(t)},t.container=this,o.disabled=n.map(function(n){return!!n.disabled}),!w){w={};for(dt in o)w[dt]=o[dt]instanceof Array?o[dt].slice(0):o[dt]}if(n&&n.length&&n.filter(function(n){return n.values.length}).length)kt.selectAll(".nv-noData").remove();else return gt=kt.selectAll(".nv-noData").data([ct]),gt.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),gt.attr("x",i.left+rt/2).attr("y",i.top+wt/2).text(function(n){return n}),t;u=r.xScale();f=r.yScale();at=at||u;vt=vt||f;var bt=kt.selectAll("g.nv-wrap.nv-scatterChart").data([n]),ri=bt.enter().append("g").attr("class","nvd3 nv-wrap nv-scatterChart nv-chart-"+r.id()),ut=ri.append("g"),it=bt.select("g");if(ut.append("rect").attr("class","nvd3 nv-background").style("pointer-events","none"),ut.append("g").attr("class","nv-x nv-axis"),ut.append("g").attr("class","nv-y nv-axis"),ut.append("g").attr("class","nv-scatterWrap"),ut.append("g").attr("class","nv-regressionLinesWrap"),ut.append("g").attr("class","nv-distWrap"),ut.append("g").attr("class","nv-legendWrap"),ut.append("g").attr("class","nv-controlsWrap"),bt.attr("transform","translate("+i.left+","+i.top+")"),k&&it.select(".nv-y.nv-axis").attr("transform","translate("+rt+",0)"),st&&(l.width(rt/2),bt.select(".nv-legendWrap").datum(n).call(l),i.top!=l.height()&&(i.top=l.height(),wt=(d||parseInt(kt.style("height"))||400)-i.top-i.bottom),bt.select(".nv-legendWrap").attr("transform","translate("+rt/2+","+-i.top+")")),ht&&(b.width(180).color(["#444"]),it.select(".nv-controlsWrap").datum(pt).attr("transform","translate(0,"+-i.top+")").call(b)),r.width(rt).height(wt).color(n.map(function(n,t){return n.color||h(n,t)}).filter(function(t,i){return!n[i].disabled})),bt.select(".nv-scatterWrap").datum(n.filter(function(n){return!n.disabled})).call(r),bt.select(".nv-regressionLinesWrap").attr("clip-path","url(#nv-edge-clip-"+r.id()+")"),ni=bt.select(".nv-regressionLinesWrap").selectAll(".nv-regLines").data(function(n){return n}),ni.enter().append("g").attr("class","nv-regLines"),ti=ni.selectAll(".nv-regLine").data(function(n){return[n]}),ui=ti.enter().append("line").attr("class","nv-regLine").style("stroke-opacity",0),ti.transition().attr("x1",u.range()[0]).attr("x2",u.range()[1]).attr("y1",function(n){return f(u.domain()[0]*n.slope+n.intercept)}).attr("y2",function(n){return f(u.domain()[1]*n.slope+n.intercept)}).style("stroke",function(n,t,i){return h(n,i)}).style("stroke-opacity",function(n){return n.disabled||typeof n.slope=="undefined"||typeof n.intercept=="undefined"?0:1}),g&&(s.scale(u).ticks(s.ticks()?s.ticks():rt/100).tickSize(-wt,0),it.select(".nv-x.nv-axis").attr("transform","translate(0,"+f.range()[0]+")").call(s)),nt&&(e.scale(f).ticks(e.ticks()?e.ticks():wt/36).tickSize(-rt,0),it.select(".nv-y.nv-axis").call(e)),et&&(a.getData(r.x()).scale(u).width(rt).color(n.map(function(n,t){return n.color||h(n,t)}).filter(function(t,i){return!n[i].disabled})),ut.select(".nv-distWrap").append("g").attr("class","nv-distributionX"),it.select(".nv-distributionX").attr("transform","translate(0,"+f.range()[0]+")").datum(n.filter(function(n){return!n.disabled})).call(a)),ot&&(c.getData(r.y()).scale(f).width(wt).color(n.map(function(n,t){return n.color||h(n,t)}).filter(function(t,i){return!n[i].disabled})),ut.select(".nv-distWrap").append("g").attr("class","nv-distributionY"),it.select(".nv-distributionY").attr("transform","translate("+(k?rt:-c.size())+",0)").datum(n.filter(function(n){return!n.disabled})).call(c)),d3.fisheye){it.select(".nv-background").attr("width",rt).attr("height",wt);it.select(".nv-background").on("mousemove",fi);it.select(".nv-background").on("click",function(){p=!p});r.dispatch.on("elementClick.freezeFisheye",function(){p=!p})}b.dispatch.on("legendClick",function(n){n.disabled=!n.disabled;v=n.disabled?0:2.5;it.select(".nv-background").style("pointer-events",n.disabled?"none":"all");it.select(".nv-point-paths").style("pointer-events",n.disabled?"all":"none");n.disabled?(u.distortion(v).focus(0),f.distortion(v).focus(0),it.select(".nv-scatterWrap").call(r),it.select(".nv-x.nv-axis").call(s),it.select(".nv-y.nv-axis").call(e)):p=!1;t.update()});l.dispatch.on("stateChange",function(n){o=n;y.stateChange(o);t.update()});r.dispatch.on("elementMouseover.tooltip",function(n){d3.select(".nv-chart-"+r.id()+" .nv-series-"+n.seriesIndex+" .nv-distx-"+n.pointIndex).attr("y1",n.pos[1]-wt);d3.select(".nv-chart-"+r.id()+" .nv-series-"+n.seriesIndex+" .nv-disty-"+n.pointIndex).attr("x2",n.pos[0]+a.size());n.pos=[n.pos[0]+i.left,n.pos[1]+i.top];y.tooltipShow(n)});y.on("tooltipShow",function(n){tt&&yt(n,ii.parentNode)});y.on("changeState",function(i){typeof i.disabled!="undefined"&&(n.forEach(function(n,t){n.disabled=i.disabled[t]}),o.disabled=i.disabled);t.update()});at=u.copy();vt=f.copy()}),t}var r=n.models.scatter(),s=n.models.axis(),e=n.models.axis(),l=n.models.legend(),b=n.models.legend(),a=n.models.distribution(),c=n.models.distribution(),i={top:30,right:20,bottom:50,left:75},ft=null,d=null,h=n.utils.defaultColor(),u=d3.fisheye?d3.fisheye.scale(d3.scale.linear).distortion(0):r.xScale(),f=d3.fisheye?d3.fisheye.scale(d3.scale.linear).distortion(0):r.yScale(),et=!1,ot=!1,st=!0,g=!0,nt=!0,k=!1,ht=!!d3.fisheye,v=0,p=!1,tt=!0,it=function(n,t){return"<strong>"+t+"<\/strong>"},rt=function(n,t,i){return"<strong>"+i+"<\/strong>"},ut=function(n,t,i,r){return"<h3>"+n+"<\/h3><p>"+r+"<\/p>"},o={},w=null,y=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState"),ct="No Data Available.",lt=250,at,vt,yt,pt;r.xScale(u).yScale(f);s.orient("bottom").tickPadding(10);e.orient(k?"right":"left").tickPadding(10);a.axis("x");c.axis("y");b.updateState(!1);yt=function(o,h){var a=o.pos[0]+(h.offsetLeft||0),v=o.pos[1]+(h.offsetTop||0),y=o.pos[0]+(h.offsetLeft||0),p=f.range()[0]+i.top+(h.offsetTop||0),w=u.range()[0]+i.left+(h.offsetLeft||0),b=o.pos[1]+(h.offsetTop||0),c=s.tickFormat()(r.x()(o.point,o.pointIndex)),l=e.tickFormat()(r.y()(o.point,o.pointIndex));it!=null&&n.tooltip.show([y,p],it(o.series.key,c,l,o,t),"n",1,h,"x-nvtooltip");rt!=null&&n.tooltip.show([w,b],rt(o.series.key,c,l,o,t),"e",1,h,"y-nvtooltip");ut!=null&&n.tooltip.show([a,v],ut(o.series.key,c,l,o.point.tooltip,o,t),o.value<0?"n":"s",null,h)};pt=[{key:"Magnify",disabled:!0}];r.dispatch.on("elementMouseout.tooltip",function(n){y.tooltipHide(n);d3.select(".nv-chart-"+r.id()+" .nv-series-"+n.seriesIndex+" .nv-distx-"+n.pointIndex).attr("y1",0);d3.select(".nv-chart-"+r.id()+" .nv-series-"+n.seriesIndex+" .nv-disty-"+n.pointIndex).attr("x2",c.size())});y.on("tooltipHide",function(){tt&&n.tooltip.cleanup()});return t.dispatch=y,t.scatter=r,t.legend=l,t.controls=b,t.xAxis=s,t.yAxis=e,t.distX=a,t.distY=c,d3.rebind(t,r,"id","interactive","pointActive","x","y","shape","size","xScale","yScale","zScale","xDomain","yDomain","xRange","yRange","sizeDomain","sizeRange","forceX","forceY","forceSize","clipVoronoi","clipRadius","useVoronoi"),t.options=n.utils.optionsFunc.bind(t),t.margin=function(n){return arguments.length?(i.top=typeof n.top!="undefined"?n.top:i.top,i.right=typeof n.right!="undefined"?n.right:i.right,i.bottom=typeof n.bottom!="undefined"?n.bottom:i.bottom,i.left=typeof n.left!="undefined"?n.left:i.left,t):i},t.width=function(n){return arguments.length?(ft=n,t):ft},t.height=function(n){return arguments.length?(d=n,t):d},t.color=function(i){return arguments.length?(h=n.utils.getColor(i),l.color(h),a.color(h),c.color(h),t):h},t.showDistX=function(n){return arguments.length?(et=n,t):et},t.showDistY=function(n){return arguments.length?(ot=n,t):ot},t.showControls=function(n){return arguments.length?(ht=n,t):ht},t.showLegend=function(n){return arguments.length?(st=n,t):st},t.showXAxis=function(n){return arguments.length?(g=n,t):g},t.showYAxis=function(n){return arguments.length?(nt=n,t):nt},t.rightAlignYAxis=function(n){return arguments.length?(k=n,e.orient(n?"right":"left"),t):k},t.fisheye=function(n){return arguments.length?(v=n,t):v},t.tooltips=function(n){return arguments.length?(tt=n,t):tt},t.tooltipContent=function(n){return arguments.length?(ut=n,t):ut},t.tooltipXContent=function(n){return arguments.length?(it=n,t):it},t.tooltipYContent=function(n){return arguments.length?(rt=n,t):rt},t.state=function(n){return arguments.length?(o=n,t):o},t.defaultState=function(n){return arguments.length?(w=n,t):w},t.noData=function(n){return arguments.length?(ct=n,t):ct},t.transitionDuration=function(n){return arguments.length?(lt=n,t):lt},t};n.models.sparkline=function(){"use strict";function t(n){return n.each(function(n){var w=o-i.left-i.right,b=s-i.top-i.bottom,k=d3.select(this),y,p;f.domain(c||d3.extent(n,e)).range(a||[0,w]);r.domain(l||d3.extent(n,u)).range(v||[b,0]);var t=k.selectAll("g.nv-wrap.nv-sparkline").data([n]),d=t.enter().append("g").attr("class","nvd3 nv-wrap nv-sparkline"),g=d.append("g"),nt=t.select("g");t.attr("transform","translate("+i.left+","+i.top+")");y=t.selectAll("path").data(function(n){return[n]});y.enter().append("path");y.exit().remove();y.style("stroke",function(n,t){return n.color||h(n,t)}).attr("d",d3.svg.line().x(function(n,t){return f(e(n,t))}).y(function(n,t){return r(u(n,t))}));p=t.selectAll("circle.nv-point").data(function(n){function i(t){if(t!=-1){var i=n[t];return i.pointIndex=t,i}return null}var t=n.map(function(n,t){return u(n,t)}),f=i(t.lastIndexOf(r.domain()[1])),e=i(t.indexOf(r.domain()[0])),o=i(t.length-1);return[e,f,o].filter(function(n){return n!=null})});p.enter().append("circle");p.exit().remove();p.attr("cx",function(n){return f(e(n,n.pointIndex))}).attr("cy",function(n){return r(u(n,n.pointIndex))}).attr("r",2).attr("class",function(n){return e(n,n.pointIndex)==f.domain()[1]?"nv-point nv-currentValue":u(n,n.pointIndex)==r.domain()[0]?"nv-point nv-minValue":"nv-point nv-maxValue"})}),t}var i={top:2,right:0,bottom:2,left:0},o=400,s=32,y=!0,f=d3.scale.linear(),r=d3.scale.linear(),e=function(n){return n.x},u=function(n){return n.y},h=n.utils.getColor(["#000"]),c,l,a,v;return t.options=n.utils.optionsFunc.bind(t),t.margin=function(n){return arguments.length?(i.top=typeof n.top!="undefined"?n.top:i.top,i.right=typeof n.right!="undefined"?n.right:i.right,i.bottom=typeof n.bottom!="undefined"?n.bottom:i.bottom,i.left=typeof n.left!="undefined"?n.left:i.left,t):i},t.width=function(n){return arguments.length?(o=n,t):o},t.height=function(n){return arguments.length?(s=n,t):s},t.x=function(n){return arguments.length?(e=d3.functor(n),t):e},t.y=function(n){return arguments.length?(u=d3.functor(n),t):u},t.xScale=function(n){return arguments.length?(f=n,t):f},t.yScale=function(n){return arguments.length?(r=n,t):r},t.xDomain=function(n){return arguments.length?(c=n,t):c},t.yDomain=function(n){return arguments.length?(l=n,t):l},t.xRange=function(n){return arguments.length?(a=n,t):a},t.yRange=function(n){return arguments.length?(v=n,t):v},t.animate=function(n){return arguments.length?(y=n,t):y},t.color=function(i){return arguments.length?(h=n.utils.getColor(i),t):h},t};n.models.sparklinePlus=function(){"use strict";function t(n){return n.each(function(p){function et(){if(!e){var n=w.selectAll(".nv-hoverValue").data(u),t=n.enter().append("g").attr("class","nv-hoverValue").style("stroke-opacity",0).style("fill-opacity",0);(n.exit().transition().duration(250).style("stroke-opacity",0).style("fill-opacity",0).remove(),n.attr("transform",function(n){return"translate("+c(r.x()(p[n],n))+",0)"}).transition().duration(250).style("stroke-opacity",1).style("fill-opacity",1),u.length)&&(t.append("line").attr("x1",0).attr("y1",-i.top).attr("x2",0).attr("y2",d),t.append("text").attr("class","nv-xValue").attr("x",-6).attr("y",-i.top).attr("text-anchor","end").attr("dy",".9em"),w.select(".nv-hoverValue .nv-xValue").text(l(r.x()(p[u[0]],u[0]))),t.append("text").attr("class","nv-yValue").attr("x",6).attr("y",-i.top).attr("text-anchor","start").attr("dy",".9em"),w.select(".nv-hoverValue .nv-yValue").text(o(r.y()(p[u[0]],u[0]))))}}function st(){function t(n,t){for(var u=Math.abs(r.x()(n[0],0)-t),f=0,i=0;i<n.length;i++)Math.abs(r.x()(n[i],i)-t)<u&&(u=Math.abs(r.x()(n[i],i)-t),f=i);return f}if(!e){var n=d3.mouse(this)[0]-i.left;u=[t(p,Math.round(c.invert(n)))];et()}}var b=d3.select(this),k=(s||parseInt(b.style("width"))||960)-i.left-i.right,d=(h||parseInt(b.style("height"))||400)-i.top-i.bottom,nt,tt,ut,ft,rt;if(t.update=function(){t(n)},t.container=this,p&&p.length)b.selectAll(".nv-noData").remove();else return nt=b.selectAll(".nv-noData").data([v]),nt.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),nt.attr("x",i.left+k/2).attr("y",i.top+d/2).text(function(n){return n}),t;tt=r.y()(p[p.length-1],p.length-1);c=r.xScale();y=r.yScale();var it=b.selectAll("g.nv-wrap.nv-sparklineplus").data([p]),ot=it.enter().append("g").attr("class","nvd3 nv-wrap nv-sparklineplus"),g=ot.append("g"),w=it.select("g");g.append("g").attr("class","nv-sparklineWrap");g.append("g").attr("class","nv-valueWrap");g.append("g").attr("class","nv-hoverArea");it.attr("transform","translate("+i.left+","+i.top+")");ut=w.select(".nv-sparklineWrap");r.width(k).height(d);ut.call(r);ft=w.select(".nv-valueWrap");rt=ft.selectAll(".nv-currentValue").data([tt]);rt.enter().append("text").attr("class","nv-currentValue").attr("dx",f?-8:8).attr("dy",".9em").style("text-anchor",f?"end":"start");rt.attr("x",k+(f?i.right:0)).attr("y",a?function(n){return y(n)}:0).style("fill",r.color()(p[p.length-1],p.length-1)).text(o(tt));g.select(".nv-hoverArea").append("rect").on("mousemove",st).on("click",function(){e=!e}).on("mouseout",function(){u=[];et()});w.select(".nv-hoverArea rect").attr("transform",function(){return"translate("+-i.left+","+-i.top+")"}).attr("width",k+i.left+i.right).attr("height",d+i.top)}),t}var r=n.models.sparkline(),i={top:15,right:100,bottom:10,left:50},s=null,h=null,c,y,u=[],e=!1,l=d3.format(",r"),o=d3.format(",.2f"),p=!0,a=!0,f=!1,v="No Data Available.";return t.sparkline=r,d3.rebind(t,r,"x","y","xScale","yScale","color"),t.options=n.utils.optionsFunc.bind(t),t.margin=function(n){return arguments.length?(i.top=typeof n.top!="undefined"?n.top:i.top,i.right=typeof n.right!="undefined"?n.right:i.right,i.bottom=typeof n.bottom!="undefined"?n.bottom:i.bottom,i.left=typeof n.left!="undefined"?n.left:i.left,t):i},t.width=function(n){return arguments.length?(s=n,t):s},t.height=function(n){return arguments.length?(h=n,t):h},t.xTickFormat=function(n){return arguments.length?(l=n,t):l},t.yTickFormat=function(n){return arguments.length?(o=n,t):o},t.showValue=function(n){return arguments.length?(p=n,t):p},t.alignValue=function(n){return arguments.length?(a=n,t):a},t.rightAlignValue=function(n){return arguments.length?(f=n,t):f},t.noData=function(n){return arguments.length?(v=n,t):v},t};n.models.stackedArea=function(){"use strict";function t(n){return n.each(function(n){var nt=c-i.left-i.right,tt=l-i.top-i.bottom,et=d3.select(this),g,it,ft;b=r.xScale();h=r.yScale();g=n;n.forEach(function(n,t){n.seriesIndex=t;n.values=n.values.map(function(n,i){return n.index=i,n.seriesIndex=t,n})});it=n.filter(function(n){return!n.disabled});n=d3.layout.stack().order(y).offset(v).values(function(n){return n.values}).x(f).y(s).out(function(n,t,i){var r=s(n)===0?0:i;n.display={y:r,y0:t}})(it);var k=et.selectAll("g.nv-wrap.nv-stackedarea").data([n]),rt=k.enter().append("g").attr("class","nvd3 nv-wrap nv-stackedarea"),ot=rt.append("defs"),ut=rt.append("g"),a=k.select("g");ut.append("g").attr("class","nv-areaWrap");ut.append("g").attr("class","nv-scatterWrap");k.attr("transform","translate("+i.left+","+i.top+")");r.width(nt).height(tt).x(f).y(function(n){return n.display.y+n.display.y0}).forceY([0]).color(n.map(function(n){return n.color||e(n,n.seriesIndex)}));ft=a.select(".nv-scatterWrap").datum(n);ft.call(r);ot.append("clipPath").attr("id","nv-edge-clip-"+o).append("rect");k.select("#nv-edge-clip-"+o+" rect").attr("width",nt).attr("height",tt);a.attr("clip-path",w?"url(#nv-edge-clip-"+o+")":"");var st=d3.svg.area().x(function(n,t){return b(f(n,t))}).y0(function(n){return h(n.display.y0)}).y1(function(n){return h(n.display.y+n.display.y0)}).interpolate(p),ht=d3.svg.area().x(function(n,t){return b(f(n,t))}).y0(function(n){return h(n.display.y0)}).y1(function(n){return h(n.display.y0)}),d=a.select(".nv-areaWrap").selectAll("path.nv-area").data(function(n){return n});d.enter().append("path").attr("class",function(n,t){return"nv-area nv-area-"+t}).attr("d",function(n){return ht(n.values,n.seriesIndex)}).on("mouseover",function(n){d3.select(this).classed("hover",!0);u.areaMouseover({point:n,series:n.key,pos:[d3.event.pageX,d3.event.pageY],seriesIndex:n.seriesIndex})}).on("mouseout",function(n){d3.select(this).classed("hover",!1);u.areaMouseout({point:n,series:n.key,pos:[d3.event.pageX,d3.event.pageY],seriesIndex:n.seriesIndex})}).on("click",function(n){d3.select(this).classed("hover",!1);u.areaClick({point:n,series:n.key,pos:[d3.event.pageX,d3.event.pageY],seriesIndex:n.seriesIndex})});d.exit().remove();d.style("fill",function(n){return n.color||e(n,n.seriesIndex)}).style("stroke",function(n){return n.color||e(n,n.seriesIndex)});d.transition().attr("d",function(n,t){return st(n.values,t)});r.dispatch.on("elementMouseover.area",function(n){a.select(".nv-chart-"+o+" .nv-area-"+n.seriesIndex).classed("hover",!0)});r.dispatch.on("elementMouseout.area",function(n){a.select(".nv-chart-"+o+" .nv-area-"+n.seriesIndex).classed("hover",!1)});t.d3_stackedOffset_stackPercent=function(n){for(var u=n.length,f=n[0].length,o=1/u,t,r,e=[],i=0;i<f;++i){for(t=0,r=0;t<g.length;t++)r+=s(g[t].values[i]);if(r)for(t=0;t<u;t++)n[t][i][1]/=r;else for(t=0;t<u;t++)n[t][i][1]=o}for(i=0;i<f;++i)e[i]=0;return e}}),t}var i={top:0,right:0,bottom:0,left:0},c=960,l=500,e=n.utils.defaultColor(),o=Math.floor(Math.random()*1e5),f=function(n){return n.x},s=function(n){return n.y},a="stack",v="zero",y="default",p="linear",w=!1,b,h,r=n.models.scatter(),u=d3.dispatch("tooltipShow","tooltipHide","areaClick","areaMouseover","areaMouseout");r.size(2.2).sizeDomain([2.2,2.2]);r.dispatch.on("elementClick.area",function(n){u.areaClick(n)});r.dispatch.on("elementMouseover.tooltip",function(n){n.pos=[n.pos[0]+i.left,n.pos[1]+i.top];u.tooltipShow(n)});r.dispatch.on("elementMouseout.tooltip",function(n){u.tooltipHide(n)});return t.dispatch=u,t.scatter=r,d3.rebind(t,r,"interactive","size","xScale","yScale","zScale","xDomain","yDomain","xRange","yRange","sizeDomain","forceX","forceY","forceSize","clipVoronoi","useVoronoi","clipRadius","highlightPoint","clearHighlights"),t.options=n.utils.optionsFunc.bind(t),t.x=function(n){return arguments.length?(f=d3.functor(n),t):f},t.y=function(n){return arguments.length?(s=d3.functor(n),t):s},t.margin=function(n){return arguments.length?(i.top=typeof n.top!="undefined"?n.top:i.top,i.right=typeof n.right!="undefined"?n.right:i.right,i.bottom=typeof n.bottom!="undefined"?n.bottom:i.bottom,i.left=typeof n.left!="undefined"?n.left:i.left,t):i},t.width=function(n){return arguments.length?(c=n,t):c},t.height=function(n){return arguments.length?(l=n,t):l},t.clipEdge=function(n){return arguments.length?(w=n,t):w},t.color=function(i){return arguments.length?(e=n.utils.getColor(i),t):e},t.offset=function(n){return arguments.length?(v=n,t):v},t.order=function(n){return arguments.length?(y=n,t):y},t.style=function(n){if(!arguments.length)return a;a=n;switch(a){case"stack":t.offset("zero");t.order("default");break;case"stream":t.offset("wiggle");t.order("inside-out");break;case"stream-center":t.offset("silhouette");t.order("inside-out");break;case"expand":t.offset("expand");t.order("default");break;case"stack_percent":t.offset(t.d3_stackedOffset_stackPercent);t.order("default")}return t},t.interpolate=function(n){return arguments.length?(p=n,t):p},t};n.models.stackedAreaChart=function(){"use strict";function t(w){return w.each(function(w){var vt=d3.select(this),ni=this,lt=(g||parseInt(vt.style("width"))||960)-i.left-i.right,yt=(v||parseInt(vt.style("height"))||400)-i.top-i.bottom,bt,dt,gt,wt,ti;if(t.update=function(){vt.transition().duration(st).call(t)},t.container=this,u.disabled=w.map(function(n){return!!n.disabled}),!a){a={};for(bt in u)a[bt]=u[bt]instanceof Array?u[bt].slice(0):u[bt]}if(w&&w.length&&w.filter(function(n){return n.values.length}).length)vt.selectAll(".nv-noData").remove();else return dt=vt.selectAll(".nv-noData").data([et]),dt.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),dt.attr("x",i.left+lt/2).attr("y",i.top+yt/2).text(function(n){return n}),t;ut=r.xScale();ht=r.yScale();var kt=vt.selectAll("g.nv-wrap.nv-stackedAreaChart").data([w]),pt=kt.enter().append("g").attr("class","nvd3 nv-wrap nv-stackedAreaChart").append("g"),at=kt.select("g");pt.append("rect").style("opacity",0);pt.append("g").attr("class","nv-x nv-axis");pt.append("g").attr("class","nv-y nv-axis");pt.append("g").attr("class","nv-stackedWrap");pt.append("g").attr("class","nv-legendWrap");pt.append("g").attr("class","nv-controlsWrap");pt.append("g").attr("class","nv-interactive");at.select("rect").attr("width",lt).attr("height",yt);nt&&(gt=b?lt-ot:lt,o.width(gt),at.select(".nv-legendWrap").datum(w).call(o),i.top!=o.height()&&(i.top=o.height(),yt=(v||parseInt(vt.style("height"))||400)-i.top-i.bottom),at.select(".nv-legendWrap").attr("transform","translate("+(lt-gt)+","+-i.top+")"));b&&(wt=[{key:c.stacked||"Stacked",metaKey:"Stacked",disabled:r.style()!="stack",style:"stack"},{key:c.stream||"Stream",metaKey:"Stream",disabled:r.style()!="stream",style:"stream"},{key:c.expanded||"Expanded",metaKey:"Expanded",disabled:r.style()!="expand",style:"expand"},{key:c.stack_percent||"Stack %",metaKey:"Stack_Percent",disabled:r.style()!="stack_percent",style:"stack_percent"}],ot=d.length/3*260,wt=wt.filter(function(n){return d.indexOf(n.metaKey)!==-1}),s.width(ot).color(["#444","#444","#444"]),at.select(".nv-controlsWrap").datum(wt).call(s),i.top!=Math.max(s.height(),o.height())&&(i.top=Math.max(s.height(),o.height()),yt=(v||parseInt(vt.style("height"))||400)-i.top-i.bottom),at.select(".nv-controlsWrap").attr("transform","translate(0,"+-i.top+")"));kt.attr("transform","translate("+i.left+","+i.top+")");k&&at.select(".nv-y.nv-axis").attr("transform","translate("+lt+",0)");rt&&(h.width(lt).height(yt).margin({left:i.left,top:i.top}).svgContainer(vt).xScale(ut),kt.select(".nv-interactive").call(h));r.width(lt).height(yt);ti=at.select(".nv-stackedWrap").datum(w);ti.transition().call(r);tt&&(l.scale(ut).ticks(lt/100).tickSize(-yt,0),at.select(".nv-x.nv-axis").attr("transform","translate(0,"+yt+")"),at.select(".nv-x.nv-axis").transition().duration(0).call(l));it&&(f.scale(ht).ticks(r.offset()=="wiggle"?0:yt/36).tickSize(-lt,0).setTickFormat(r.style()=="expand"||r.style()=="stack_percent"?d3.format("%"):ft),at.select(".nv-y.nv-axis").transition().duration(0).call(f));r.dispatch.on("areaClick.toggle",function(n){w.filter(function(n){return!n.disabled}).length===1?w.forEach(function(n){n.disabled=!1}):w.forEach(function(t,i){t.disabled=i!=n.seriesIndex});u.disabled=w.map(function(n){return!!n.disabled});e.stateChange(u);t.update()});o.dispatch.on("stateChange",function(n){u.disabled=n.disabled;e.stateChange(u);t.update()});s.dispatch.on("legendClick",function(n){n.disabled&&(wt=wt.map(function(n){return n.disabled=!0,n}),n.disabled=!1,r.style(n.style),u.style=r.style(),e.stateChange(u),t.update())});h.dispatch.on("elementMousemove",function(u){var a,o,s,e,b,k;if(r.clearHighlights(),e=[],w.filter(function(n,t){return n.seriesIndex=t,!n.disabled}).forEach(function(i,f){var h,c;(o=n.interactiveBisect(i.values,u.pointXValue,t.x()),r.highlightPoint(f,o,!0),h=i.values[o],typeof h!="undefined")&&(typeof a=="undefined"&&(a=h),typeof s=="undefined"&&(s=t.xScale()(t.x()(h,o))),c=r.style()=="expand"?h.display.y:t.y()(h,o),e.push({key:i.key,value:c,color:y(i,i.seriesIndex),stackedValue:h.display}))}),e.reverse(),e.length>2){var c=t.yScale().invert(u.mouseY),v=null;e.forEach(function(n,t){c=Math.abs(c);var i=Math.abs(n.stackedValue.y0),r=Math.abs(n.stackedValue.y);if(c>=i&&c<=r+i){v=t;return}});v!=null&&(e[v].highlight=!0)}b=l.tickFormat()(t.x()(a,o));k=r.style()=="expand"?function(n){return d3.format(".1%")(n)}:function(n){return f.tickFormat()(n)};h.tooltip.position({left:s+i.left,top:u.mouseY+i.top}).chartContainer(ni.parentNode).enabled(p).valueFormatter(k).data({value:b,series:e})();h.renderGuideLine(s)});h.dispatch.on("elementMouseout",function(){e.tooltipHide();r.clearHighlights()});e.on("tooltipShow",function(n){p&&ct(n,ni.parentNode)});e.on("changeState",function(n){typeof n.disabled!="undefined"&&w.length===n.disabled.length&&(w.forEach(function(t,i){t.disabled=n.disabled[i]}),u.disabled=n.disabled);typeof n.style!="undefined"&&r.style(n.style);t.update()})}),t}var r=n.models.stackedArea(),l=n.models.axis(),f=n.models.axis(),o=n.models.legend(),s=n.models.legend(),h=n.interactiveGuideline(),i={top:30,right:25,bottom:50,left:60},g=null,v=null,y=n.utils.defaultColor(),b=!0,nt=!0,tt=!0,it=!0,k=!1,rt=!1,p=!0,w=function(n,t,i){return"<h3>"+n+"<\/h3><p>"+i+" on "+t+"<\/p>"},ut,ht,ft=d3.format(",.2f"),u={style:r.style()},a=null,et="No Data Available.",e=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState"),ot=250,d=["Stacked","Stream","Expanded"],c={},st=250,ct;l.orient("bottom").tickPadding(7);f.orient(k?"right":"left");s.updateState(!1);ct=function(i,u){var e=i.pos[0]+(u.offsetLeft||0),o=i.pos[1]+(u.offsetTop||0),s=l.tickFormat()(r.x()(i.point,i.pointIndex)),h=f.tickFormat()(r.y()(i.point,i.pointIndex)),c=w(i.series.key,s,h,i,t);n.tooltip.show([e,o],c,i.value<0?"n":"s",null,u)};r.dispatch.on("tooltipShow",function(n){n.pos=[n.pos[0]+i.left,n.pos[1]+i.top];e.tooltipShow(n)});r.dispatch.on("tooltipHide",function(n){e.tooltipHide(n)});e.on("tooltipHide",function(){p&&n.tooltip.cleanup()});return t.dispatch=e,t.stacked=r,t.legend=o,t.controls=s,t.xAxis=l,t.yAxis=f,t.interactiveLayer=h,d3.rebind(t,r,"x","y","size","xScale","yScale","xDomain","yDomain","xRange","yRange","sizeDomain","interactive","useVoronoi","offset","order","style","clipEdge","forceX","forceY","forceSize","interpolate"),t.options=n.utils.optionsFunc.bind(t),t.margin=function(n){return arguments.length?(i.top=typeof n.top!="undefined"?n.top:i.top,i.right=typeof n.right!="undefined"?n.right:i.right,i.bottom=typeof n.bottom!="undefined"?n.bottom:i.bottom,i.left=typeof n.left!="undefined"?n.left:i.left,t):i},t.width=function(n){return arguments.length?(g=n,t):g},t.height=function(n){return arguments.length?(v=n,t):v},t.color=function(i){return arguments.length?(y=n.utils.getColor(i),o.color(y),r.color(y),t):y},t.showControls=function(n){return arguments.length?(b=n,t):b},t.showLegend=function(n){return arguments.length?(nt=n,t):nt},t.showXAxis=function(n){return arguments.length?(tt=n,t):tt},t.showYAxis=function(n){return arguments.length?(it=n,t):it},t.rightAlignYAxis=function(n){return arguments.length?(k=n,f.orient(n?"right":"left"),t):k},t.useInteractiveGuideline=function(n){return arguments.length?(rt=n,n===!0&&(t.interactive(!1),t.useVoronoi(!1)),t):rt},t.tooltip=function(n){return arguments.length?(w=n,t):w},t.tooltips=function(n){return arguments.length?(p=n,t):p},t.tooltipContent=function(n){return arguments.length?(w=n,t):w},t.state=function(n){return arguments.length?(u=n,t):u},t.defaultState=function(n){return arguments.length?(a=n,t):a},t.noData=function(n){return arguments.length?(et=n,t):et},t.transitionDuration=function(n){return arguments.length?(st=n,t):st},t.controlsData=function(n){return arguments.length?(d=n,t):d},t.controlLabels=function(n){return arguments.length?typeof n!="object"?c:(c=n,t):c},f.setTickFormat=f.tickFormat,f.tickFormat=function(n){return arguments.length?(ft=n,f):ft},t}})();